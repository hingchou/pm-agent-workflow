# **Video Creation Agent (è§†é¢‘åˆ›ä½œ Agent) - äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)**

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.7 (PM å®¡æŸ¥ä¿®å¤ç‰ˆ)
> **é€‚ç”¨èŒƒå›´**ï¼šOwlSeer AI è¿è¥ç³»ç»Ÿ - è§†é¢‘åˆ›ä½œæ¨¡å—
> **ç›®æ ‡è¯»è€…**ï¼šåç«¯æ¶æ„å¸ˆã€AI å·¥ç¨‹å¸ˆã€å‰ç«¯å¼€å‘å›¢é˜Ÿ
> **æ›´æ–°æ—¥æœŸ**ï¼š2026-02-13
> **æ–‡æ¡£ä½œè€…**ï¼šSpec Architect (Agent)
> **ä»£ç ä»“åº“**ï¼š[OwlSeer-prototype](https://github.com/hingchou/OwlSeer-prototype.git)
> **å®¡è®¡çŠ¶æ€**ï¼šâœ… å·²é€šè¿‡åŒæ¨¡å‹æ ¡éªŒ + èµ„æ·± PM å®¡æŸ¥ (16 é¡¹é—®é¢˜å·²ä¿®å¤)

## ğŸ“‹ ç›®å½•

1.  [æ–‡æ¡£æ¦‚è¿°](#ä¸€æ–‡æ¡£æ¦‚è¿°)
2.  [äº§å“æ¦‚è¿°](#äºŒäº§å“æ¦‚è¿°)
    *   **2.5 åŠŸèƒ½ä¼˜å…ˆçº§ä¸ MVP å®šä¹‰** â­
3.  [ç”¨æˆ·ç”»åƒä¸äº¤äº’æ—…ç¨‹](#ä¸‰ç”¨æˆ·ç”»åƒä¸äº¤äº’æ—…ç¨‹)
4.  [åŠŸèƒ½è¯¦ç»†è¯´æ˜](#å››åŠŸèƒ½è¯¦ç»†è¯´æ˜) â­ *NEW (å« F-06 IOM äº¤äº’æ§åˆ¶)*
5.  [æ ¸å¿ƒç®—æ³•é€»è¾‘â€”â€”IOM ç”µå½±çº§æ¶¦è‰²å¼•æ“](#äº”æ ¸å¿ƒç®—æ³•é€»è¾‘iom-ç”µå½±çº§æ¶¦è‰²å¼•æ“) â­ *NEW*
6.  [Agent æ¶æ„è®¾è®¡](#å…­agent-æ¶æ„è®¾è®¡)
7.  [æ•°æ®è¾“å…¥è§„èŒƒ](#ä¸ƒæ•°æ®è¾“å…¥è§„èŒƒ)
8.  [Tools & Skills è®¾è®¡](#å…«tools--skills-è®¾è®¡)
9.  [æ ¸å¿ƒæ¡ˆä¾‹åˆ†æ](#ä¹æ ¸å¿ƒæ¡ˆä¾‹åˆ†æ)
10. [ç”¨æˆ·äº¤äº’æµç¨‹](#åç”¨æˆ·äº¤äº’æµç¨‹)
11. [Agent å†…éƒ¨å¤„ç†é€»è¾‘](#åä¸€agent-å†…éƒ¨å¤„ç†é€»è¾‘)
12. [Prompt å·¥ç¨‹è§„èŒƒ](#åäºŒprompt-å·¥ç¨‹è§„èŒƒ)
13. [è¾“å‡ºç»“æœè§„èŒƒ](#åä¸‰è¾“å‡ºç»“æœè§„èŒƒ)
14. [æŠ€æœ¯å®ç°ä¸éåŠŸèƒ½æ€§éœ€æ±‚](#åå››æŠ€æœ¯å®ç°ä¸éåŠŸèƒ½æ€§éœ€æ±‚)
15. [æµ‹è¯•éªŒæ”¶æ ‡å‡†](#åäº”æµ‹è¯•éªŒæ”¶æ ‡å‡†)
16. [åŒæ¨¡å‹æ ¡éªŒæŠ¥å‘Š](#åå…­åŒæ¨¡å‹æ ¡éªŒæŠ¥å‘Š) â­ *NEW (v2.5)*

---

## ä¸€ã€æ–‡æ¡£æ¦‚è¿°

### 1.1 æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£å®šä¹‰äº† **Video Creation Agent (è§†é¢‘åˆ›ä½œ Agent)** çš„äº§å“éœ€æ±‚è§„æ ¼ã€‚è¯¥ Agent ä½œä¸º OwlSeer Studio çš„æ ¸å¿ƒæ™ºèƒ½å¼•æ“ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„åˆ›æ„è¾“å…¥ï¼ˆè‡ªåŠ¨/è¯é¢˜/è‡ªå®šä¹‰ï¼‰è½¬åŒ–ä¸ºç»“æ„åŒ–çš„è§†é¢‘è„šæœ¬å’Œå¯è§†åŒ–çš„åˆ†é•œæ–¹æ¡ˆã€‚

ç¡®ä¿æŠ€æœ¯å›¢é˜Ÿèƒ½å¤Ÿï¼š
1.  **æ„å»º Agent æ¶æ„**ï¼šå®ç°è¾“å…¥è§£æã€è„šæœ¬ç”Ÿæˆã€åˆ†é•œåˆæˆçš„èŠ‚ç‚¹åŒ–å¤„ç†ã€‚
2.  **è§„èŒƒæ•°æ®æµè½¬**ï¼šå®šä¹‰ Draftï¼ˆè‰ç¨¿ï¼‰ä¸ Storyboardï¼ˆåˆ†é•œï¼‰çš„æ ‡å‡†æ•°æ®å¥‘çº¦ã€‚
3.  **å®ç°æ™ºèƒ½å·¥å…·**ï¼šå¼€å‘åŸºäº LLM æˆ–è§„åˆ™çš„ç”Ÿæˆå·¥å…· (Tools)ã€‚

### 1.2 å…³é”®æœ¯è¯­å®šä¹‰

| æœ¯è¯­ | å®šä¹‰ |
| :--- | :--- |
| **Input Mode** | åˆ›ä½œè§¦å‘æ¨¡å¼ï¼šAuto (éšæœºçµæ„Ÿ)ã€Topic (è¯é¢˜é©±åŠ¨)ã€Custom (è‡ªå®šä¹‰) |
| **Draft** | åˆ›ä½œè¿‡ç¨‹ä¸­çš„ä¸­é—´æ€æ•°æ®å¯¹è±¡ï¼ŒåŒ…å«è„šæœ¬å†…å®¹ã€é…ç½®å’Œèµ„äº§å¼•ç”¨ |
| **Storyboard** | ç”± Scene (åœºæ™¯) ç»„æˆçš„åºåˆ—åŒ–è„šæœ¬ï¼ŒåŒ…å«è§†è§‰æ„å›¾å’Œæ—¶é•¿ |
| **StoryboardScene** | å•ä¸ªåˆ†é•œåœºæ™¯å¯¹è±¡ï¼ŒåŒ…å« type/visualIntent/desc/duration |
| **Visual Intent** | åœºæ™¯çš„è§†è§‰å‘ˆç°é‡ç‚¹ (Detail/Impact/Emotion/Default) |
| **Hydration** | Agent è¿è¡Œæ—¶ä»æŒä¹…åŒ–å­˜å‚¨æ¢å¤ä¸Šä¸‹æ–‡çš„è¿‡ç¨‹ |
| **Script Checkpoint** | Topic æ¨¡å¼ä¸‹ï¼Œè„šæœ¬ç”Ÿæˆåã€åˆ†é•œåˆæˆå‰çš„äººå·¥ç¡®è®¤ç¯èŠ‚ |
| **Visual Anchors** | Custom æ¨¡å¼ä¸‹ç”¨æˆ·ä¸Šä¼ çš„èµ·å§‹å¸§/ç»“æŸå¸§å‚è€ƒå›¾ |
| **Scheduled Task** | ä»æ’æœŸæ¨¡å—ä¼ å…¥çš„å¾…æ‰§è¡Œåˆ›ä½œä»»åŠ¡ |
| **Competitor Trends** | ä»ç«å“åˆ†ææ¨¡å—ä¼ å…¥çš„çƒ­é—¨è¯é¢˜èŠ¯ç‰‡ |
| **Predicted Performance** | åŸºäºå†å²æ•°æ®é¢„æµ‹çš„è§†é¢‘è¡¨ç°æŒ‡æ ‡ (ç•™å­˜ç‡/é¢„ä¼°æ’­æ”¾/çˆ†æ¬¾åˆ†) |
| **IOM (Intermediate Optimization Module)** | ä¸­é—´ä¼˜åŒ–æ¨¡å—ï¼Œå°†æè¿°æ€§è¯­è¨€è½¬åŒ–ä¸ºé•œå¤´è¯­è¨€çš„æ¡¥æ¢ (MVP ä½¿ç”¨è§„åˆ™å¼•æ“) |
| **Cinematic Prompt** | IOM æ¶¦è‰²åçš„é•œå¤´è¯­è¨€ Promptï¼ŒåŒ…å«è¿é•œã€å…‰å½±ã€é•œå¤´ç­‰ä¸“ä¸šå‚æ•° |
| **Scene Detail Sheet** | é€åœºæ™¯ IOM æ§åˆ¶é¢æ¿ï¼Œæ”¯æŒå¼€å…³ AI æ¶¦è‰²ã€åˆ‡æ¢ Visual Intentã€ç¼–è¾‘ Prompt |

---

## ğŸ“ ç‰ˆæœ¬æ›´æ–°è¯´æ˜

### v2.7 (PM å®¡æŸ¥ä¿®å¤ç‰ˆ) - 2026-02-13

1.  **âœ… ä¿®å¤çŠ¶æ€æœºä¸ DraftStatus å¯¹é½ (ç¬¬å…­ç« )**
    *   DraftStatus æ–°å¢ `done` å’Œ `publishing` çŠ¶æ€ï¼Œè¦†ç›–æ¸²æŸ“å®Œæˆå’Œå‘å¸ƒä¸­åœºæ™¯ã€‚
    *   æ–°å¢ `AgentUIPhase` ç±»å‹å®šä¹‰ï¼ŒåŒºåˆ† UI ç¬æ€é˜¶æ®µä¸æŒä¹…åŒ–çŠ¶æ€ã€‚
    *   æ–°å¢çŠ¶æ€æ˜ å°„è¡¨ï¼Œæ˜ç¡® UI Phase â†’ DraftStatus çš„å¯¹åº”å…³ç³»ã€‚

2.  **âœ… ä¿®å¤äº§å“è¾¹ç•ŒçŸ›ç›¾ (2.4 èŠ‚)**
    *   æ˜ç¡® T004/T005 å±äºæœ¬æ¨¡å—èŒƒå›´ï¼ŒPhase 1 ä½¿ç”¨ Mockï¼ŒPhase 2 æ¥å…¥çœŸå® APIã€‚
    *   æ›´æ–°"ä¸åŒ…å«èŒƒå›´"æªè¾ï¼Œæ¶ˆé™¤ä¸ç¬¬å…«ç« çš„çŸ›ç›¾ã€‚

3.  **âœ… ä¿®å¤ F-06 æ§ä»¶è¡¨ä¸å®ç°ä¸ä¸€è‡´ (ç¬¬å››ç« )**
    *   ç»Ÿä¸€æ§ä»¶è¡¨ä¸ºå• Textarea å®ç°ï¼Œç§»é™¤ C/D åŒ Textarea æ­§ä¹‰ã€‚
    *   æ˜ç¡® Textarea æ ¹æ® IOM çŠ¶æ€åˆ‡æ¢å†…å®¹æºå’Œç¼–è¾‘æƒé™ã€‚

4.  **âœ… è¡¥å…… Auto-Draft æŒ‰é’®é€»è¾‘ (F-01)**
    *   å®šä¹‰æ— æ’æœŸä»»åŠ¡æ—¶ Auto-Draft çš„è¾“å…¥æ¥æºå’Œè¡Œä¸ºã€‚

5.  **âœ… è¡¥å…… Custom Mode å‚æ•°æ¡ä¸‹æ‹‰å®šä¹‰ (F-03)**
    *   å®šä¹‰ 5 ä¸ªä¸‹æ‹‰é€‰é¡¹çš„é€‰é¡¹åˆ—è¡¨ã€é»˜è®¤å€¼å’Œæ•°æ®æ¨¡å‹æ˜ å°„ã€‚

6.  **âœ… è¡¥å…… RenderRequest è½¬æ¢é€»è¾‘ (T004)**
    *   æ–°å¢ `buildRenderRequest()` å‡½æ•°è§„æ ¼ï¼Œå®šä¹‰ StoryboardScene â†’ RenderRequest.scenes çš„æ˜ å°„ã€‚

7.  **âœ… ä¿®å¤ StoryboardScene.id ç±»å‹ (7.4 èŠ‚)**
    *   `id` ä» `number` æ”¹ä¸º `string` (UUID)ï¼Œæ–°å¢ `order: number` å­—æ®µç”¨äºæ’åºã€‚
    *   è§£å†³æ‹–æ‹½æ’åºæ—¶ ID å˜åŒ–çš„é—®é¢˜ã€‚

8.  **âœ… è¡¥å…… Predicted Performance è®¡ç®—é€»è¾‘ (13.2 èŠ‚)**
    *   å®šä¹‰ Phase 1 Mock è®¡ç®—å…¬å¼ï¼ŒåŸºäºåˆ†é•œæ•°é‡å’Œ IOM å¯ç”¨ç‡ã€‚

9.  **âœ… è¡¥å…… Done å›é€€é€»è¾‘ (F-05)**
    *   å®šä¹‰ "Back to Storyboard" çš„çŠ¶æ€å›é€€ã€è§†é¢‘ç¼“å­˜å’Œé‡æ–°æ¸²æŸ“ç­–ç•¥ã€‚

10. **âœ… ä¿®å¤ Case B/C ç« èŠ‚å¼•ç”¨é”™è¯¯ (ç¬¬ä¹ç« )**

11. **âœ… è¡¥å…… Token è®¡æ•°å™¨ Phase 1 è¡Œä¸º (10.1.1 èŠ‚)**

12. **âœ… ä¿®å¤ S001 Skill çŠ¶æ€å€¼ (8.2.1 èŠ‚)**

13. **âœ… æ›´æ–° T003 æ¥å£å®šä¹‰ (8.1.3 èŠ‚)**

14. **âœ… è¡¥å…… iom-engine.ts æ¨¡å—è§„æ ¼ (ç¬¬äº”ç« )**

15. **âœ… æ ‡æ³¨ PublishMetadata.platform å¤šå¹³å°ä¸º Phase 2 (T005)**

16. **âœ… ä¿®å¤åŸå‹å›¾è¿‡æ—¶å†…å®¹ (10.1.1 èŠ‚)**

### v2.6 (è§†é¢‘ç”Ÿæˆ API æµæ°´çº¿æ•´åˆç‰ˆ) - 2026-02-13

1.  **âœ… æ–°å¢è§†é¢‘ç”Ÿæˆ API æµæ°´çº¿ (ç¬¬å…«ç« )**
    *   æ–°å¢ T004 `render_video` å·¥å…·ï¼šå®šä¹‰è§†é¢‘æ¸²æŸ“çš„å®Œæ•´è¾“å…¥/è¾“å‡ºå¥‘çº¦ã€æ¸²æŸ“é˜¶æ®µã€è¿›åº¦å›è°ƒã€‚
    *   æ–°å¢ T005 `publish_video` å·¥å…·ï¼šå®šä¹‰ TikTok Content Posting API é›†æˆå¥‘çº¦ã€‚
    *   æ–°å¢ 8.1.6 èŠ‚ï¼šç«¯åˆ°ç«¯æ•°æ®æµåºåˆ—å›¾ (ä»ç”¨æˆ·è¾“å…¥åˆ° TikTok å‘å¸ƒ)ã€‚
    *   æ›´æ–° S001 Skill ç¼–æ’é€»è¾‘ï¼šè¦†ç›– T001â†’T002â†’IOMâ†’T003â†’T004â†’T005 å®Œæ•´é“¾è·¯ã€‚

2.  **âœ… ä¿®å¤ç”¨æˆ·æ—…ç¨‹å¹»è§‰ (ç¬¬ä¸‰ç« )**
    *   Sarah Scene 2ï¼šä¿®æ­£å¡ç‰‡é¢œè‰²æè¿° (çº¢/è“/ç´« â†’ æ©™/ç°è“/ç¿ ç»¿)ï¼Œç§»é™¤ä¸å® TTI å£°æ˜ã€‚
    *   Alex Scene 2/3ï¼šæ ‡æ³¨ Visual Anchor æ¸²æŸ“å’Œ "Save as Asset" ä¸º Phase 2 åŠŸèƒ½ã€‚
    *   Emilyï¼šæ ‡æ³¨ Batch Publish ä¸º Phase 2ï¼ŒMVP ä»…æ”¯æŒå•æ¡å‘å¸ƒã€‚

3.  **âœ… ä¿®å¤åŠŸèƒ½æè¿°ä¸ä¸€è‡´ (ç¬¬å››ç« )**
    *   F-04ï¼šä¿®æ­£å¡ç‰‡é¢œè‰²æè¿°ä¸å®é™…å®ç°å¯¹é½ã€‚
    *   F-06ï¼šVisual Intent é€‰é¡¹æ–°å¢ "Default"ï¼ŒSheet å¸ƒå±€æ›´æ–°ä¸ºå• Textarea å®ç°ã€‚
    *   F-06ï¼šæ˜ç¡® IOM ON = åªè¯»ï¼ŒIOM OFF = å¯ç¼–è¾‘ã€‚

4.  **âœ… ä¿®å¤æ¡ˆä¾‹å¼•ç”¨é”™è¯¯ (ç¬¬ä¹ç« )**
    *   Case Aï¼šä¿®æ­£é”™è¯¯çš„ç« èŠ‚å¼•ç”¨ (4.3 èŠ‚ â†’ 7.3 èŠ‚ï¼Œ8.1.4 èŠ‚ â†’ F-03)ã€‚
    *   Case Bï¼šä¿®æ­£é¢œè‰²æè¿°å’Œ TTI å£°æ˜ã€‚

5.  **âœ… è¡¥å……é”™è¯¯å¤„ç† (ç¬¬åä¸€ç« )**
    *   æ–°å¢ ERR_004 (æ¸²æŸ“è¶…æ—¶)ã€ERR_005 (æ¸²æŸ“å¤±è´¥)ã€ERR_006 (è®¤è¯å¤±è´¥)ã€ERR_007 (ä¸Šä¼ å¤±è´¥)ã€ERR_008 (æ–‡ä»¶æ ¼å¼é”™è¯¯)ã€‚
    *   æ›´æ–° AgentError ç±»å‹å®šä¹‰ã€‚

6.  **âœ… è¡¥å……æµ‹è¯•åœºæ™¯ (ç¬¬åäº”ç« )**
    *   æ–°å¢è§†é¢‘æ¸²æŸ“æµç¨‹æµ‹è¯• (T004)ã€‚
    *   æ–°å¢æ¸²æŸ“å¤±è´¥é‡è¯•æµ‹è¯• (ERR_005)ã€‚
    *   æ–°å¢å‘å¸ƒå¤±è´¥å¤„ç†æµ‹è¯• (ERR_007)ã€‚
    *   æ–°å¢æ‹–æ‹½æ’åºåˆ†é•œæµ‹è¯•ã€‚
    *   æ–°å¢ Visual Anchor æ–‡ä»¶æ ¼å¼æ ¡éªŒæµ‹è¯• (ERR_008)ã€‚

7.  **âœ… æ¶‰åŠæ–‡ä»¶**
    *   `docs/PRD_Studio_Create.md` (æœ¬æ–‡æ¡£)
    *   `src/app/lib/draft-service.ts` (æ•°æ®æ¨¡å‹)
    *   `src/app/components/video-studio/SceneDetailSheet.tsx` (UI)
    *   `src/app/components/video-studio/VideoStudioEditor.tsx` (æ¶æ„)
    *   `src/app/components/video-studio/VideoStudioInput.tsx` (æ¶æ„)

### v2.5 (åŒæ¨¡å‹æ ¡éªŒä¸ä¿®å¤ç‰ˆ) - 2026-02-13

1.  **âœ… åŒæ¨¡å‹ AI æ ¡éªŒå®Œæˆ**
    *   ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹ AI æ¨¡å‹ä»ä¸åŒè§’åº¦åˆ†æ PRDï¼š
        *   æ¨¡å‹ 1ï¼šå†…éƒ¨ä¸€è‡´æ€§ã€æ•°æ®ç»“æ„ã€æŠ€æœ¯å¯è¡Œæ€§
        *   æ¨¡å‹ 2ï¼šç”¨æˆ·æ—…ç¨‹å¯¹é½ã€æ•°æ®æµå®Œæ•´æ€§ã€API å¥‘çº¦ã€æµ‹è¯•è¦†ç›–
    *   è¯†åˆ«å‡º **7 ä¸ª CRITICAL é—®é¢˜**ã€**12 ä¸ª WARNING**ã€**8 ä¸ª SUGGESTION**
    *   æ‰€æœ‰ CRITICAL é—®é¢˜å·²ä¿®å¤ï¼ŒMVP å°±ç»ª

2.  **âœ… æ•°æ®æ¨¡å‹ä¿®å¤ (CRITICAL)**
    *   `Draft` æ¥å£æ–°å¢ `status: DraftStatus` å­—æ®µ (7.3 èŠ‚)
    *   `Draft` æ¥å£æ–°å¢ `updatedAt: number` å­—æ®µ (7.3 èŠ‚)
    *   æ–°å¢ `DraftStatus` ç±»å‹å®šä¹‰ (7.3 èŠ‚)
    *   æ›´æ–° `saveDraft()` å’Œ `updateDraft()` å‡½æ•°ä»¥æ”¯æŒæ–°å­—æ®µ

3.  **âœ… æ¶æ„åˆè§„æ€§ä¿®å¤ (CRITICAL)**
    *   ç§»é™¤ `VideoStudioEditor.tsx` ä¸­çš„ `react-router-dom` ä¾èµ–
    *   ç§»é™¤ `VideoStudioInput.tsx` ä¸­çš„ `react-router-dom` ä¾èµ–
    *   ç»„ä»¶ç°åœ¨å®Œå…¨é€šè¿‡ `onNavigate` prop è¿›è¡Œå¯¼èˆª (ç¬¦åˆ 14.1 èŠ‚è¦æ±‚)

4.  **âœ… UI å®Œæ•´æ€§ä¿®å¤ (CRITICAL)**
    *   `SceneDetailSheet.tsx` æ–°å¢ "Default" Visual Intent é€‰é¡¹ (ç¬¬ 4 ä¸ªé€‰é¡¹)
    *   æ›´æ–°ç½‘æ ¼å¸ƒå±€ä¸º `grid-cols-2 md:grid-cols-4` ä»¥å®¹çº³ 4 ä¸ªé€‰é¡¹
    *   ä¿®å¤ `visualIntent: 'Default'` åœºæ™¯æ— æ³•ç¼–è¾‘çš„è¿è¡Œæ—¶é”™è¯¯

5.  **âœ… IOM è¡Œä¸ºè§„èŒƒåŒ– (CRITICAL)**
    *   IOM ON æ—¶ Textarea è®¾ä¸ºåªè¯» (ç¬¦åˆ 4.2 èŠ‚ F-06 è§„èŒƒ)
    *   IOM OFF æ—¶ Textarea å¯ç¼–è¾‘
    *   æ–°å¢ `readOnly` å±æ€§å’Œ `cursor-not-allowed` æ ·å¼

6.  **âš ï¸ éƒ¨åˆ†å®ç°æ ‡è®°ä¸º Phase 2**
    *   Visual Anchor æ–‡ä»¶ä¸Šä¼ ï¼šæ•°æ®æ¨¡å‹å·²å°±ç»ªï¼ŒUI å®ç°å»¶åè‡³ Phase 2
    *   Script Checkpoint è„šæœ¬é‡æ–°ç”Ÿæˆï¼šUI æµç¨‹å·²å°±ç»ªï¼ŒLLM é›†æˆå»¶åè‡³ Phase 2

7.  **ğŸ“‹ Phase 2 å¾…åŠäº‹é¡¹**
    *   ç§»é™¤ 1.2s äººå·¥å»¶è¿Ÿ (VideoStudioEditor.tsx:127)
    *   å®ç° autosave debounce (å½“å‰ä¸ºç«‹å³ä¿å­˜)
    *   å®ç° T001/T002 mock å·¥å…·
    *   å®Œæˆ Visual Anchor æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
    *   å®Œæˆ Script Checkpoint è„šæœ¬é‡æ–°ç”Ÿæˆé€»è¾‘

8.  **âœ… æ–°å¢æ–‡æ¡£**
    *   æ–°å¢ç¬¬ 16 ç« ï¼šåŒæ¨¡å‹æ ¡éªŒæŠ¥å‘Š
    *   è¯¦ç»†è®°å½•æ‰€æœ‰ 27 ä¸ªé—®é¢˜åŠå…¶ä¿®å¤çŠ¶æ€

### v2.4 (IOM äº¤äº’æ§åˆ¶å±‚æ•´åˆç‰ˆ)

1.  **âœ… æ–°å¢ IOM äº¤äº’æ§åˆ¶ (Human-in-the-Loop)**
    *   `StoryboardScene` æ•°æ®æ¨¡å‹æ–°å¢ `iomEnabled` å’Œ `cinematicPrompt` å­—æ®µ (7.4 èŠ‚)ã€‚
    *   æ–°å¢ F-06: Scene Detail Sheet ç»„ä»¶è§„æ ¼ï¼Œæ”¯æŒé€åœºæ™¯ IOM å¼€å…³ã€Visual Intent åˆ‡æ¢ã€Prompt é¢„è§ˆä¸ç¼–è¾‘ã€‚
    *   æ›´æ–° F-04 å¡ç‰‡äº¤äº’ï¼šæ–°å¢ Magic Wand (âœ¨) æŒ‰é’®ï¼Œç‚¹å‡»æ‰“å¼€ Scene Detail Sheetã€‚
    *   æ›´æ–° Editor View äº¤äº’åŸå‹å›¾ï¼Œåæ˜  IOM æ§åˆ¶å…¥å£ã€‚
    *   æ–°å¢ IOM äº¤äº’ç›¸å…³æµ‹è¯•éªŒæ”¶åœºæ™¯ã€‚
    *   **IOM æ¶¦è‰²å±‚æ ‡è®°ä¸º P0 (MVP) åŠŸèƒ½**ï¼Œä½¿ç”¨è§„åˆ™å¼•æ“å®ç°é•œå¤´è¯­è¨€è¡¥å…¨ã€‚

2.  **âœ… æ¶‰åŠæ–‡ä»¶**
    *   `src/app/components/video-studio/VideoStudioEditor.tsx` (ä¸»ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†)
    *   `src/app/components/video-studio/SceneDetailSheet.tsx` (æ–°å»º)
    *   `src/app/lib/draft-service.ts` (æ•°æ®æ¨¡å‹æ›´æ–°)
    *   `src/app/lib/iom-engine.ts` (IOM æ¶¦è‰²å¼•æ“ï¼Œæ–°å»º)

### v2.3 (åŠŸèƒ½è§„æ ¼ä¸ IOM å¼•æ“æ•´åˆç‰ˆ)

1.  **âœ… æ–°å¢åŠŸèƒ½è¯¦ç»†è¯´æ˜ (ç¬¬å››ç« )**
    *   æŒ‰"ç‰©ç†åŒé¡µé¢"æ¶æ„æ‹†è§£ /create å’Œ /editor çš„åŠŸèƒ½ç‚¹ã€‚
    *   å®šä¹‰ F-01 ~ F-05 å…± 5 ä¸ªæ ¸å¿ƒåŠŸèƒ½è§„æ ¼ã€‚

2.  **âœ… æ–°å¢ IOM ç”µå½±çº§æ¶¦è‰²å¼•æ“ (ç¬¬äº”ç« )**
    *   å®šä¹‰ Script-to-Video Bridge çš„ä¸‰æ­¥å¤„ç†æµæ°´çº¿ã€‚
    *   æè¿°æè¿°æ€§è¯­è¨€åˆ°é•œå¤´è¯­è¨€çš„è½¬åŒ–é€»è¾‘ã€‚

### v2.2 (ç”¨æˆ·æ—…ç¨‹æ•´åˆç‰ˆ)

åŸºäºç”¨æˆ·æ—…ç¨‹åœ°å›¾ä¸æ ¸å¿ƒæ¡ˆä¾‹åˆ†æï¼Œæœ¬ç‰ˆæœ¬æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š

1.  **âœ… æ–°å¢ç”¨æˆ·ç”»åƒä¸äº¤äº’æ—…ç¨‹ (ç¬¬ä¸‰ç« )**
    *   å®šä¹‰ 4 ç±»å…¸å‹ç”¨æˆ·ç”»åƒ (Sarah/Ben/Alex/Emily)ã€‚
    *   ä¸ºæ¯ç±»ç”¨æˆ·ç»˜åˆ¶å®Œæ•´çš„ä¸‰é˜¶æ®µäº¤äº’æ—…ç¨‹ (Entry â†’ Engagement â†’ Delivery)ã€‚
    *   éªŒè¯"ä¸‰æºå…¥å£ + ç‰©ç†åŒé¡µé¢"æ¶æ„å¯¹æ‰€æœ‰ç”¨æˆ·ç±»å‹çš„è¦†ç›–åº¦ã€‚

2.  **âœ… æ–°å¢æ ¸å¿ƒæ¡ˆä¾‹åˆ†æ (ç¬¬ä¸ƒç« )**
    *   Case A: è§†è§‰é”šå®šè§£å†³ AI å¹»è§‰é—®é¢˜ã€‚
    *   Case B: è¯­ä¹‰åŒ–å¡ç‰‡æ¶ˆé™¤ç­‰å¾…ç„¦è™‘ã€‚
    *   Case C: ç›´æ¥å‘å¸ƒæ‰“é€šæœ€åä¸€å…¬é‡Œã€‚

3.  **âœ… æ–°å¢ä¿¡ä»»æ¡¥æ¥éåŠŸèƒ½æ€§éœ€æ±‚**
    *   å®šä¹‰"é€ƒç”Ÿèˆ± (Escape Hatch)"åŸåˆ™ã€‚

### v2.1 (å®¡è®¡ä¿®å¤ç‰ˆ)

åŸºäº PRD vs äº¤äº’åŸå‹å¯¹æ¯”å®¡è®¡ï¼Œæœ¬ç‰ˆæœ¬ä¿®å¤äº†ä»¥ä¸‹é—®é¢˜ï¼š

1.  **âœ… ç»Ÿä¸€æ•°æ®å¥‘çº¦**
    *   ä¿®å¤ Draft æ•°æ®æ¨¡å‹åŒé‡å®šä¹‰å†²çªï¼ˆåŸ 4.3 èŠ‚ vs 9.1 èŠ‚ï¼‰ã€‚
    *   æ–°å¢ `StoryboardScene` å®Œæ•´æ¥å£å®šä¹‰ã€‚
    *   ç»Ÿä¸€å­—æ®µå‘½åä¸º camelCase è§„èŒƒã€‚

2.  **âœ… è¡¥å……åŸå‹å·²å®ç°åŠŸèƒ½**
    *   æ–°å¢æ’æœŸä»»åŠ¡é›†æˆã€ç«å“æƒ…æŠ¥èŠ¯ç‰‡ã€è„šæœ¬æ£€æŸ¥ç‚¹ã€è§†è§‰é”šç‚¹ç­‰ 9 é¡¹ Critical åŠŸèƒ½ã€‚
    *   æ–°å¢ç¼–è¾‘å™¨é˜¶æ®µçš„é¢„æµ‹è¡¨ç°é¢æ¿ã€å‘å¸ƒæµç¨‹ã€è§†é¢‘é¢„è§ˆç­‰åŠŸèƒ½æè¿°ã€‚

3.  **âœ… ä¿®å¤çŠ¶æ€æœºä¸é£æ ¼åç§°**
    *   çŠ¶æ€æšä¸¾å€¼ç»Ÿä¸€ä¸º 7 ä¸ªæ ‡å‡†çŠ¶æ€ã€‚
    *   é£æ ¼åç§°å¯¹é½åŸå‹å®ç°ï¼šMinimal Tech / Storyteller / Edutainmentã€‚

4.  **âœ… è¡¥å……é”™è¯¯å“åº”æ•°æ®ç»“æ„ä¸æ•°æ®æºå®šä¹‰**

### v2.0 (Agent æ¶æ„é‡æ„ç‰ˆ)

1.  **âœ… å¼•å…¥ Agent èŠ‚ç‚¹æ¶æ„**
    *   å°†åŸæœ‰çš„å•ä½“ç»„ä»¶é€»è¾‘é‡æ„ä¸º 6 ä¸ªç‹¬ç«‹çš„ Agent èŠ‚ç‚¹ï¼ˆè¾“å…¥è§£æã€ä¸Šä¸‹æ–‡ç®¡ç†ã€æ„å›¾è·¯ç”±ã€è„šæœ¬ç”Ÿæˆã€åˆ†é•œåˆæˆã€ç»“æœå¤„ç†ï¼‰ã€‚
    *   æ˜ç¡®å®šä¹‰äº†èŠ‚ç‚¹é—´çš„è¾“å…¥è¾“å‡ºå¥‘çº¦ã€‚

2.  **âœ… è§„èŒƒåŒ– Tools & Skills**
    *   æ ‡å‡†åŒ– T001 (Script Gen) å’Œ T002 (Storyboard Syn) çš„æ¥å£å®šä¹‰ã€‚
    *   æ–°å¢ T003 (Draft Manage) ç”¨äºç»Ÿä¸€çŠ¶æ€ç®¡ç†ã€‚

3.  **âœ… æ˜ç¡® MVP èŒƒå›´ä¸åˆ†æœŸ**
    *   å®šä¹‰ P0 (MVP) ä»…åŒ…å«å•æœºç‰ˆé—­ç¯ï¼ˆLocalStorageï¼‰ã€‚
    *   å°†åç«¯æ•°æ®åº“é›†æˆä¸å¤šç«¯åŒæ­¥è§„åˆ’è‡³ Phase 2ã€‚

---

## äºŒã€äº§å“æ¦‚è¿°

### 2.1 äº§å“/åŠŸèƒ½åç§°

**Video Creation Agent (è§†é¢‘åˆ›ä½œæ™ºèƒ½ä½“)**

### 2.2 äº§å“å®šä½

> **TikTok çŸ­è§†é¢‘åˆ›ä½œçš„"æ™ºèƒ½å¯¼æ¼”"**ï¼Œé€šè¿‡å¤šæ¨¡å¼è¾“å…¥å¼•å¯¼å’Œé“¾å¼ç”Ÿæˆé€»è¾‘ï¼Œè‡ªåŠ¨åŒ–å®Œæˆä»"åˆ›æ„çµæ„Ÿ"åˆ°"åˆ†é•œè„šæœ¬"çš„è½¬åŒ–è¿‡ç¨‹ã€‚

### 2.3 æ ¸å¿ƒä»·å€¼

| ä»·å€¼ç‚¹ | æè¿° |
| :--- | :--- |
| **ç”¨æˆ·ä»·å€¼** | é™ä½åˆ›ä½œé—¨æ§›ï¼Œæä¾›ç»“æ„åŒ– (Hook/Body/CTA) çš„çˆ†æ¬¾è„šæœ¬æ¨¡æ¿ |
| **ä¸šåŠ¡ä»·å€¼** | æ²‰æ·€æ ‡å‡†åŒ–çš„å†…å®¹ç”Ÿäº§æ•°æ®ï¼Œä¸ºåç»­çš„æ‰¹é‡ç”Ÿæˆå’Œæ•ˆæœå½’å› æä¾›ç»“æ„åŒ–è¾“å…¥ |
| **æŠ€æœ¯ä»·å€¼** | å®ç°å†…å®¹ç”Ÿæˆçš„æ¨¡å—åŒ–ä¸å¯ç¼–æ’ï¼Œæ”¯æŒæœªæ¥æ¥å…¥æ›´å¤æ‚çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹ |

### 2.4 äº§å“è¾¹ç•Œ

**åŒ…å«èŒƒå›´ï¼š**
*   è§£æä¸‰ç§æ¨¡å¼çš„ç”¨æˆ·è¾“å…¥
*   ç”Ÿæˆç»“æ„åŒ–çš„è§†é¢‘è„šæœ¬ (Script Generation)
*   å°†è„šæœ¬è½¬åŒ–ä¸ºåˆ†é•œåºåˆ— (Storyboard Synthesis)
*   ç®¡ç†åˆ›ä½œè‰ç¨¿çŠ¶æ€ (Draft Management)
*   æ¨¡æ‹Ÿè§†é¢‘ç”Ÿæˆè¿›åº¦ä¸ç»“æœé¢„è§ˆ
*   æ’æœŸä»»åŠ¡å¿«æ·æ‰§è¡Œå…¥å£ (Scheduled Task Integration)
*   ç«å“çƒ­é—¨è¯é¢˜æ¨è (Competitor Trends)
*   è„šæœ¬æ£€æŸ¥ç‚¹ç¡®è®¤ (Script Checkpoint)
*   è§†è§‰é”šç‚¹ä¸Šä¼  (Visual Anchors)
*   é¢„æµ‹è¡¨ç°å±•ç¤º (Predicted Performance)
*   æ¨¡æ‹Ÿå‘å¸ƒæµç¨‹ (Publish Simulation)

**ä¸åŒ…å«èŒƒå›´ï¼š**
*   å®é™…çš„è§†é¢‘æ¸²æŸ“å¼•æ“å¼€å‘ - æœ¬æ¨¡å—é€šè¿‡ T004 å·¥å…·å¯¹æ¥å¤–éƒ¨è§†é¢‘ç”ŸæˆæœåŠ¡ (Phase 1: Mock / Phase 2: Sora/Kling/Runway)
*   è§†é¢‘å‘å¸ƒå¹³å° SDK å¼€å‘ - æœ¬æ¨¡å—é€šè¿‡ T005 å·¥å…·å¯¹æ¥å¹³å° API (Phase 1: Mock / Phase 2: TikTok Content Posting API)
*   å¤æ‚çš„éçº¿æ€§ç¼–è¾‘åŠŸèƒ½

### 2.5 åŠŸèƒ½ä¼˜å…ˆçº§ä¸ MVP å®šä¹‰

#### 2.5.1 MVP èŒƒå›´å®šä¹‰ (Phase 1)

**ç›®æ ‡**ï¼šå®ç°å•æœºç‰ˆ Agent é—­ç¯ï¼Œè·‘é€šä»è¾“å…¥åˆ°åˆ†é•œç”Ÿæˆçš„å®Œæ•´æµç¨‹ã€‚

**P0 åŠŸèƒ½æ¸…å•** ğŸ”´ï¼š

| åŠŸèƒ½æ¨¡å— | åŠŸèƒ½æè¿° | éªŒæ”¶æ ‡å‡† |
| :--- | :--- | :--- |
| **å¤šæ¨¡å¼è¾“å…¥è§£æ** | æ”¯æŒ Auto/Topic/Custom è¾“å…¥çš„æ ‡å‡†åŒ–å¤„ç† | ä¸åŒè¾“å…¥å‡èƒ½è½¬åŒ–ä¸ºç»Ÿä¸€ Draft å¯¹è±¡ |
| **è„šæœ¬ç”Ÿæˆå·¥å…·** | åŸºäºè¾“å…¥ç”Ÿæˆ Hook/Body/CTA ç»“æ„çš„è„šæœ¬ | è¾“å‡ºæ–‡æœ¬ç¬¦åˆç»“æ„åŒ–è¦æ±‚ |
| **åˆ†é•œåˆæˆå·¥å…·** | å°†æ–‡æœ¬è„šæœ¬æ‹†è§£ä¸ºå¸¦è§†è§‰æ ‡ç­¾çš„åˆ†é•œ | æ¯ä¸ªåœºæ™¯åŒ…å« type, visualIntent, duration |
| **è‰ç¨¿çŠ¶æ€ç®¡ç†** | æœ¬åœ°æŒä¹…åŒ– (LocalStorage) ä¸è‡ªåŠ¨æ¢å¤ | åˆ·æ–°é¡µé¢ä¸ä¸¢å¤± Agent ä¸Šä¸‹æ–‡ |
| **æ¨¡æ‹Ÿæ‰§è¡Œæµ** | æ¨¡æ‹Ÿç”Ÿæˆè€—æ—¶ä¸è¿›åº¦åé¦ˆ | çŠ¶æ€æœºæµè½¬é¡ºç•… (Loadingâ†’Genâ†’Done) |
| **æ’æœŸä»»åŠ¡é›†æˆ** | Auto æ¨¡å¼ä¸‹å±•ç¤ºå½“æ—¥æ’æœŸä»»åŠ¡ï¼Œæ”¯æŒä¸€é”®æ‰§è¡Œ | ç‚¹å‡» Execute åè¿›å…¥ Editor é¡µé¢ |
| **ç«å“æƒ…æŠ¥èŠ¯ç‰‡** | Topic æ¨¡å¼ä¸‹å±•ç¤ºç«å“çƒ­é—¨è¯é¢˜æ ‡ç­¾ | ç‚¹å‡»æ ‡ç­¾è‡ªåŠ¨å¡«å…¥ Topic è¾“å…¥æ¡† |
| **è„šæœ¬æ£€æŸ¥ç‚¹** | Topic æ¨¡å¼ç”Ÿæˆè„šæœ¬åï¼Œå±•ç¤º Hook/Body/CTA ä¾›ç”¨æˆ·ç¡®è®¤ | ç”¨æˆ·å¯ç¡®è®¤æˆ–è¿”å›ä¿®æ”¹ |
| **è§†è§‰é”šç‚¹ä¸Šä¼ ** | Custom æ¨¡å¼ä¸‹æ”¯æŒä¸Šä¼ èµ·å§‹å¸§/ç»“æŸå¸§å‚è€ƒå›¾ | æ–‡ä»¶åæ˜¾ç¤ºåœ¨ä¸Šä¼ åŒºåŸŸ |
| **ç”Ÿæˆè¿›åº¦åé¦ˆ** | Editor é˜¶æ®µå±•ç¤ºåˆ†é˜¶æ®µè¿›åº¦æ¡å’Œæ–‡æ¡ˆ | è¿›åº¦ä» 0â†’100%ï¼Œæ–‡æ¡ˆéšé˜¶æ®µå˜åŒ– |
| **è§†é¢‘é¢„è§ˆæ’­æ”¾å™¨** | Done é˜¶æ®µå±•ç¤º 9:16 ç«–å±è§†é¢‘é¢„è§ˆ | æ˜¾ç¤ºæ€»æ—¶é•¿ã€é£æ ¼æ ‡ç­¾ã€æ’­æ”¾æŒ‰é’® |
| **é¢„æµ‹è¡¨ç°é¢æ¿** | Done é˜¶æ®µå±•ç¤º 3s ç•™å­˜ç‡ã€é¢„ä¼°æ’­æ”¾é‡ã€çˆ†æ¬¾åˆ† | æ•°æ®ä»¥è¿›åº¦æ¡å½¢å¼å±•ç¤º |
| **æ¨¡æ‹Ÿå‘å¸ƒæµç¨‹** | Done é˜¶æ®µæ”¯æŒ Publish æŒ‰é’®æ¨¡æ‹Ÿå‘å¸ƒåˆ° TikTok | çŠ¶æ€æµè½¬: idleâ†’loadingâ†’success |
| **IOM äº¤äº’æ§åˆ¶** | Scene Detail Sheet æ”¯æŒé€åœºæ™¯ IOM å¼€å…³ã€Visual Intent åˆ‡æ¢ã€Prompt ç¼–è¾‘ | Magic Wand æŒ‰é’®çŠ¶æ€æ­£ç¡®ï¼ŒSheet æ‰“å¼€/ä¿å­˜æµç•… |
| **IOM æ¶¦è‰²å¼•æ“ (è§„åˆ™ç‰ˆ)** | åŸºäºè§„åˆ™å¼•æ“å°†æè¿°æ€§è¯­è¨€è½¬åŒ–ä¸ºé•œå¤´è¯­è¨€ | iomEnabled=true æ—¶è‡ªåŠ¨ç”Ÿæˆ cinematicPrompt |

#### 2.5.2 Phase 2 åŠŸèƒ½è§„åˆ’ (P1)

**ç›®æ ‡**ï¼šå®ç°äº‘ç«¯åŒæ­¥ä¸é«˜çº§ç”Ÿæˆèƒ½åŠ›ã€‚

**P1 åŠŸèƒ½æ¸…å•** ğŸŸ¡ï¼š

| åŠŸèƒ½æ¨¡å— | åŠŸèƒ½æè¿° | ä¾èµ– |
| :--- | :--- | :--- |
| **äº‘ç«¯è‰ç¨¿åŒæ­¥** | å°† Draft æ•°æ®æŒä¹…åŒ–åˆ°åç«¯ DB | Auth æ¨¡å— |
| **çœŸå® LLM æ¥å…¥** | æ›¿æ¢ Mock å·¥å…·ï¼Œæ¥å…¥ GPT-4/Claude | API Key é…ç½® |
| **IOM æ™ºèƒ½æ¶¦è‰² (LLM ç‰ˆ)** | ä½¿ç”¨ LLM æ›¿ä»£è§„åˆ™å¼•æ“å®ç°æ™ºèƒ½åŒ–é•œå¤´è¯­è¨€è¡¥å…¨ | çœŸå® LLM æ¥å…¥ |
| **å›¾ç‰‡ç”Ÿæˆé›†æˆ** | ä¸ºåˆ†é•œè‡ªåŠ¨ç”Ÿæˆå‚è€ƒå›¾ (Midjourney/DALL-E) | å›¾åƒç”ŸæˆæœåŠ¡ |
| **å¯¼å‡ºåŠŸèƒ½** | æ”¯æŒå¯¼å‡ºåˆ†é•œè„šæœ¬ä¸º PDF/JSON | - |
| **BGM é€‰æ‹©** | æ”¯æŒä¸ºè§†é¢‘é€‰æ‹©èƒŒæ™¯éŸ³ä¹é£æ ¼ | éŸ³é¢‘ç´ æåº“ |
| **Token ç”¨é‡ç®¡ç†** | æ˜¾ç¤º LLM Token æ¶ˆè€—é‡å’Œé…é¢ | è®¡è´¹æ¨¡å— |
| **Prompt æ¨¡æ¿è½®æ’­** | Auto æ¨¡å¼ä¸‹å¾ªç¯å±•ç¤ºä¸åŒåˆ›ä½œæ¡†æ¶æç¤º | DS001 |

---

## ä¸‰ã€ç”¨æˆ·ç”»åƒä¸äº¤äº’æ—…ç¨‹

> æœ¬ç« é€šè¿‡ 4 ç±»å…¸å‹ç”¨æˆ·ç”»åƒéªŒè¯ V2.0 æ¶æ„ï¼ˆä¸‰æºå…¥å£ Auto/Topic/Custom + ç‰©ç†åŒé¡µé¢ /create â†’ /editorï¼‰çš„è¦†ç›–åº¦ã€‚
> æ—…ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š**è§¦è¾¾ (Entry) â†’ äº¤äº’ (Engagement) â†’ äº¤ä»˜ (Delivery)**ã€‚

### 3.1 ç”¨æˆ·ç”»åƒæ€»è§ˆ

| ç”»åƒ | ä»£å· | ç‰¹å¾ | æ ¸å¿ƒè·¯å¾„ | å¯¹åº”å…¥å£ |
| :--- | :--- | :--- | :--- | :--- |
| ğŸŸ¢ æ–°æ‰‹æ¢ç´¢è€… | Sarah | åˆšåš TikTokï¼Œä¸çŸ¥é“æ‹ä»€ä¹ˆï¼Œæ€•éº»çƒ¦ | Auto â†’ One-Click â†’ Publish | Auto Mode |
| ğŸŸ¡ æˆé•¿è¿·èŒ«è€… | Ben | å‘äº†å‡ åæ¡è§†é¢‘ï¼Œæµé‡å¡åœ¨ 500ï¼Œæ€¥éœ€è¹­çƒ­ç‚¹ | Topic â†’ Breakout Chips â†’ Script Check â†’ Publish | Topic Mode |
| ğŸ”µ ä¸“ä¸šä¼˜åŒ–è€… | Alex | è·¨å¢ƒå–å®¶ï¼Œæœ‰è´§æœ‰æ–‡æ¡ˆï¼Œè¦æ±‚å±•ç¤ºäº§å“ç»†èŠ‚ | Custom â†’ Visual Anchor â†’ Publish | Custom Mode |
| ğŸŸ£ æ•°æ®é©±åŠ¨è€… | Emily | MCN è¿è¥ï¼Œç®¡ç† 10 ä¸ªè´¦å·ï¼Œåªçœ‹ ROI | Auto (Schedule) â†’ Single Publish (MVP) / Batch Publish (Phase 2) | Auto Mode |

### 3.2 ğŸŸ¢ Sarah â€” æ–°æ‰‹æ¢ç´¢è€… (The Novice Explorer)

> åˆšåš TikTokï¼Œä¸çŸ¥é“æ‹ä»€ä¹ˆï¼Œæ€•éº»çƒ¦ã€‚

**Scene 1: è¿·èŒ«å…¥åœº (/create)**
*   **ç—›ç‚¹**ï¼šå¯¹ç€ç©ºç™½è¾“å…¥æ¡†å‘å‘†ã€‚
*   **OwlSeer äº¤äº’**ï¼šAuto Mode é»˜è®¤æ¿€æ´»ã€‚ç•Œé¢ä¸æ˜¯ç©ºç™½ï¼Œè€Œæ˜¯ä¸€ä¸ª **"ğŸ“… ä»Šæ—¥å»ºè®®ï¼šå°è¯• [ASMR å¼€ç®±]"** çš„æ’æœŸä»»åŠ¡å¡ç‰‡ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šç‚¹å‡» **"Execute Plan"**ã€‚
*   **å¿ƒæµ**ï¼š"å¤ªå¥½äº†ï¼Œä¸éœ€è¦æˆ‘æƒ³ã€‚"

**Scene 2: ç¬é—´åé¦ˆ (/editor)**
*   **ç—›ç‚¹**ï¼šä¸æƒ³ç­‰ 30 ç§’ç”Ÿæˆã€‚
*   **OwlSeer äº¤äº’**ï¼šé¡µé¢è·³è½¬ `/editor`ï¼Œçœ‹åˆ° 6 å¼ è¯­ä¹‰åŒ–å¡ç‰‡ï¼ˆHook æ©™ / Body ç°è“ / CTA ç¿ ç»¿ï¼‰ã€‚å¡ç‰‡ç»“æ„å³æ—¶å¯è§ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…è§†é¢‘æ¸²æŸ“å³å¯å¼€å§‹å®¡é˜…è„šæœ¬ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šå¿«é€Ÿæ‰«äº†ä¸€çœ¼æ©™è‰² Hook å¡ä¸Šçš„æ–‡æ¡ˆã€‚
*   **å¿ƒæµ**ï¼š"ç»“æ„å¾ˆæ¸…æ™°ï¼Œæ–‡æ¡ˆæˆ‘ä¹Ÿæ‡‚ã€‚"

**Scene 3: å‚»ç“œäº¤ä»˜ (Action)**
*   **å…³é”®åŠ¨ä½œ**ï¼šç‚¹å‡»å³ä¸Šè§’ç»¿è‰²çš„ **"Publish to TikTok"**ã€‚
*   **ç»“æœ**ï¼šæŒ‰é’®å˜é»‘æ˜¾ç¤º "View Live Post â†—"ã€‚ä»»åŠ¡ç»“æŸã€‚

### 3.3 ğŸŸ¡ Ben â€” æˆé•¿è¿·èŒ«è€… (The Growth Stumbler)

> å‘äº†å‡ åæ¡è§†é¢‘ï¼Œæµé‡å¡åœ¨ 500 æ’­æ”¾ï¼Œæ€¥éœ€"è¹­çƒ­ç‚¹"ã€‚

**Scene 1: å¯»æ‰¾æ•‘å‘½ç¨»è‰ (/create)**
*   **ç—›ç‚¹**ï¼šåŸæ¥çš„å†…å®¹æ²¡äººçœ‹ï¼Œä¸çŸ¥é“ç°åœ¨çš„æµé‡å¯†ç ã€‚
*   **OwlSeer äº¤äº’**ï¼šåˆ‡æ¢åˆ° Topic Modeï¼Œçœ‹åˆ°è¾“å…¥æ¡†ä¸‹æ–¹çš„ **"ğŸ”¥ 7æ—¥ç«å“çˆ†æ¬¾"** èƒ¶å›Šæµã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šå‘ç°ä¸€ä¸ªèƒ¶å›Šå†™ç€ `#DopamineDecor (+200% Views)`ï¼Œç‚¹å‡»èƒ¶å›Šã€‚
*   **å¿ƒæµ**ï¼š"åŸæ¥å¤§å®¶éƒ½åœ¨æ‹è¿™ä¸ªï¼"

**Scene 2: ç¡®è®¤æ–¹å‘ (Script Checkpoint)**
*   **ç—›ç‚¹**ï¼šæ€• AI ç”Ÿæˆçš„å†…å®¹å’Œçƒ­ç‚¹ä¸æ­ã€‚
*   **OwlSeer äº¤äº’**ï¼šç³»ç»Ÿå¼¹èµ·è„šæœ¬å¤§çº²å¡ç‰‡ï¼Œå±•ç¤º Hook/Body/CTA ç»“æ„ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šBen çœ‹åˆ° Hook æ˜¯"ä½æˆæœ¬æ”¹é€ å¤šå·´èƒºå°å±‹"ï¼Œç¡®è®¤æ— è¯¯ï¼Œç‚¹å‡» **"Confirm"**ã€‚

**Scene 3: ç»“æ„åŒ–éªŒè¯ (/editor)**
*   **OwlSeer äº¤äº’**ï¼šè¿›å…¥ç¼–è¾‘å™¨ï¼Œçœ‹åˆ°è¯­ä¹‰åŒ–å¡ç‰‡é“ºæ»¡å±å¹•ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šå‘ç° Body éƒ¨åˆ†çš„æ–‡æ¡ˆæœ‰ç‚¹å¹³ï¼Œç‚¹å‡»å¡ç‰‡æ‰‹åŠ¨æ”¹äº†å‡ ä¸ªè¯ã€‚
*   **ç»“æœ**ï¼šç‚¹å‡»å‘å¸ƒã€‚

### 3.4 ğŸ”µ Alex â€” ä¸“ä¸šä¼˜åŒ–è€… (The Professional Optimizer)

> è·¨å¢ƒå–å®¶ï¼Œæœ‰è´§æœ‰äºšé©¬é€Šæ–‡æ¡ˆï¼Œè¦æ±‚è§†é¢‘å¿…é¡»å±•ç¤ºäº§å“ç»†èŠ‚ã€‚

**Scene 1: å¸¦ç€èµ„äº§å…¥åœº (/create)**
*   **ç—›ç‚¹**ï¼šAI ç”Ÿæˆçš„è§†é¢‘ç»å¸¸è´§ä¸å¯¹æ¿ï¼Œç”šè‡³æŠŠå……ç”µå®ç”»æˆç –å¤´ã€‚
*   **OwlSeer äº¤äº’**ï¼šåˆ‡æ¢åˆ° Custom Modeã€‚ç³»ç»Ÿè‡ªåŠ¨è®°å½•è¿™æ˜¯ä»–ä¸Šæ¬¡ä½¿ç”¨çš„æ¨¡å¼ï¼ˆSmart Routingï¼‰ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼š
    1.  ç²˜è´´äºšé©¬é€Šäº”ç‚¹æè¿°ã€‚
    2.  æ‹–æ‹½äº§å“ç²¾ä¿®å›¾åˆ° `[ é¦–å¸§ä¸Šä¼  ]` æ¡†ã€‚
    3.  çœ‹åˆ° `[ ğŸ“± 9:16 Locked ]` çš„æ ‡ç­¾ï¼Œæ„Ÿåˆ°å®‰å¿ƒã€‚

**Scene 2: è§†è§‰é”šå®š (/editor)**
*   **OwlSeer äº¤äº’**ï¼šè·³è½¬åˆ°ç¼–è¾‘å™¨ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šç¬¬ä¸€å¼  Hook å¡ç‰‡æ˜¾ç¤ºçš„æ˜¯ä»–åˆšåˆšä¸Šä¼ çš„äº§å“å›¾ï¼ˆVisual Anchor ç”Ÿæ•ˆï¼‰ï¼Œå…¶ä»–å¡ç‰‡æ˜¯è¯­ä¹‰åŒ–çš„ï¼ˆIconï¼‰ã€‚
*   **å¿ƒæµ**ï¼š"å¯¹ï¼Œè¿™å°±æ˜¯æˆ‘è¦çš„å¼€åœºã€‚"
*   **âš ï¸ MVP çŠ¶æ€**ï¼šPhase 1 ä»…æ”¯æŒæ–‡ä»¶åè®°å½•ï¼ŒHook å¡ç‰‡æ¸²æŸ“ä¸Šä¼ å›¾ç‰‡éœ€ Phase 2 å›¾ç‰‡å¤„ç†æœåŠ¡æ”¯æŒã€‚

**Scene 3: èµ„äº§å½’æ¡£ (Action)**
*   **å…³é”®åŠ¨ä½œ**ï¼šå‘å¸ƒåï¼Œç‚¹å‡» **"Save as Asset"**ã€‚
*   **ç»“æœ**ï¼šè¿™ä¸ª"é¦–å¸§+è„šæœ¬ç»“æ„"è¢«å­˜ä¸ºæ¨¡ç‰ˆï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ¢ä¸ªå“ç›´æ¥å¤ç”¨ã€‚
*   **âš ï¸ MVP çŠ¶æ€**ï¼š"Save as Asset" ä¸º Phase 2 åŠŸèƒ½ï¼ŒMVP é˜¶æ®µä»…æ”¯æŒ Draft ä¿å­˜ã€‚

### 3.5 ğŸŸ£ Emily â€” æ•°æ®é©±åŠ¨è€… (The Data-Driven Analyst)

> MCN è¿è¥ï¼Œç®¡ç† 10 ä¸ªè´¦å·ï¼Œåªçœ‹ ROIã€‚

**Scene 1: æ‰§è¡Œä»»åŠ¡ (/create)**
*   **ç—›ç‚¹**ï¼šæ²¡æ—¶é—´ä¸€ä¸ªä¸ªæƒ³åˆ›æ„ï¼Œä»Šå¤©è¦å‘ 10 æ¡ã€‚
*   **OwlSeer äº¤äº’**ï¼šè¿›å…¥ Auto Modeï¼Œç›´æ¥çœ‹åˆ° **"ğŸ“… å¾…åŠä»»åŠ¡ï¼šè´¦å·A - å‘¨ä¸‰æ’æœŸ"**ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šç‚¹å‡» **"Execute Plan"**ã€‚

**Scene 2: æ•ˆç‡éªŒè¯ (/editor)**
*   **OwlSeer äº¤äº’**ï¼šç§’çº§åŠ è½½è¯­ä¹‰åŒ–å¡ç‰‡ã€‚
*   **å…³é”®åŠ¨ä½œ**ï¼šå¥¹æ ¹æœ¬ä¸çœ‹å…·ä½“æ–‡æ¡ˆï¼Œåªæ£€æŸ¥ç»“æ„æ˜¯å¦å®Œæ•´ï¼ˆHook/CTA æ˜¯å¦å­˜åœ¨ï¼‰ã€‚
*   **å¿ƒæµ**ï¼š"æ ‡å‡†ç¬¦åˆ SOPï¼Œè¿‡ã€‚"

**Scene 3: é—­ç¯äº¤ä»˜ (Action)**
*   **å…³é”®åŠ¨ä½œ**ï¼šç‚¹å‡»å‘å¸ƒã€‚ç³»ç»Ÿè¿”å› API æˆåŠŸçŠ¶æ€ã€‚
*   **ç»“æœ**ï¼šç›´æ¥åœ¨ OwlSeer é‡Œçœ‹åˆ°å‘å¸ƒé“¾æ¥ï¼Œå¤åˆ¶åˆ° ROI è¡¨æ ¼ä¸­ã€‚

### 3.6 æ¶æ„éªŒè¯ç»“è®º

| éªŒè¯ç»´åº¦ | ç»“è®º |
| :--- | :--- |
| **ä¸‰æºå…¥å£è¦†ç›–åº¦** | Auto è¦†ç›– Sarah + Emilyï¼ŒTopic è¦†ç›– Benï¼ŒCustom è¦†ç›– Alexã€‚100% è¦†ç›–ã€‚ |
| **ç‰©ç†åŒé¡µé¢åˆç†æ€§** | `/create` æ‰¿è½½æ„å›¾è¾“å…¥ï¼Œ`/editor` æ‰¿è½½ç»“æ„åŒ–å®¡é˜…ä¸äº¤ä»˜ã€‚èŒè´£æ¸…æ™°ï¼Œæ— å†—ä½™ã€‚ |
| **Script Checkpoint å¿…è¦æ€§** | Ben çš„æ—…ç¨‹è¯æ˜ï¼šTopic æ¨¡å¼ä¸‹ç”¨æˆ·éœ€è¦åœ¨åˆ†é•œç”Ÿæˆå‰ç¡®è®¤è„šæœ¬æ–¹å‘ã€‚ |
| **Visual Anchor å¿…è¦æ€§** | Alex çš„æ—…ç¨‹è¯æ˜ï¼šCustom æ¨¡å¼ä¸‹ç”¨æˆ·éœ€è¦é”šå®šé¦–å¸§ä»¥æ¶ˆé™¤ AI å¹»è§‰ã€‚ |
| **Scheduled Task å¿…è¦æ€§** | Sarah + Emily çš„æ—…ç¨‹è¯æ˜ï¼šAuto æ¨¡å¼ä¸‹æ’æœŸä»»åŠ¡æ˜¯æ ¸å¿ƒå…¥å£ã€‚ |

---

## å››ã€åŠŸèƒ½è¯¦ç»†è¯´æ˜

> æœ¬ç« æŒ‰ V2.0 çš„"ç‰©ç†åŒé¡µé¢"æ¶æ„ï¼ˆ`/create` å’Œ `/editor`ï¼‰æ‹†è§£æ ¸å¿ƒåŠŸèƒ½ç‚¹ã€‚
> æ¯ä¸ªåŠŸèƒ½ç‚¹ä¸ç¬¬ä¸‰ç« ç”¨æˆ·æ—…ç¨‹ä¸€ä¸€å¯¹åº”ï¼Œç¡®ä¿è®¾è®¡æœ‰æ®å¯æŸ¥ã€‚

### 4.1 åˆ›ä½œå…¥å£å±‚ (/create)

#### F-01: æ™ºèƒ½æ’æœŸå…¥å£ (Auto Mode)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **åŠŸèƒ½æè¿°** | åŸºäºç”¨æˆ·çš„è´¦å·å†å²å’Œæ—¥å†ï¼Œè‡ªåŠ¨ç”Ÿæˆä»Šæ—¥æ‹æ‘„è®¡åˆ’ |
| **è¾“å…¥** | æ— ï¼ˆç³»ç»Ÿè‡ªåŠ¨è¯»å– `scheduledTask` Propsï¼‰ |
| **äº¤äº’** | å±•ç¤º"ğŸ“… ä»Šæ—¥å»ºè®®å¡ç‰‡"ï¼Œç”¨æˆ·ç‚¹å‡» "Execute" å³å¯ |
| **å¼‚å¸¸å¤„ç†** | æä¾› "Shuffle (æ¢ä¸€ä¸ª)" æŒ‰é’®ï¼Œå…è®¸ç”¨æˆ·æ‹’ç»å»ºè®® |
| **å¯¹åº”ç”¨æˆ·** | ğŸŸ¢ Sarah (æ–°æ‰‹æ¢ç´¢è€…)ã€ğŸŸ£ Emily (æ•°æ®é©±åŠ¨è€…) |
| **å¯¹åº”æ—…ç¨‹** | Sarah Scene 1: è¿·èŒ«å…¥åœºã€Emily Scene 1: æ‰§è¡Œä»»åŠ¡ |

**é€»è¾‘æµç¨‹**ï¼š
```
scheduledTask å­˜åœ¨?
  â”œâ”€ Yes â†’ å±•ç¤ºæ’æœŸä»»åŠ¡å¡ç‰‡ â†’ [Execute Plan] â†’ saveDraft() â†’ è·³è½¬ /editor
  â””â”€ No  â†’ å±•ç¤º Prompt æ¨¡æ¿è½®æ’­ â†’ [Shuffle] åˆ‡æ¢æ¨¡æ¿ â†’ [Auto-Draft] â†’ è·³è½¬ /editor
```

**Auto-Draft æŒ‰é’®è¡Œä¸º (æ— æ’æœŸä»»åŠ¡æ—¶)**ï¼š

| å±æ€§ | æè¿° |
| :--- | :--- |
| **è¾“å…¥æ¥æº** | å½“å‰å±•ç¤ºçš„ Prompt æ¨¡æ¿æ–‡æœ¬ (æ¥è‡ª DS001 æ¨¡æ¿åº“) |
| **æ‰§è¡Œé€»è¾‘** | å°†æ¨¡æ¿æ–‡æœ¬ä½œä¸º `topic` å‚æ•°ä¼ å…¥ T001 (generate_script)ï¼Œ`mode` è®¾ä¸º `'auto'` |
| **ä¸ Topic æ¨¡å¼åŒºåˆ«** | Auto-Draft è·³è¿‡ Script Checkpointï¼Œç›´æ¥è¿›å…¥åˆ†é•œç”Ÿæˆï¼›Topic æ¨¡å¼éœ€è¦ç”¨æˆ·ç¡®è®¤è„šæœ¬ |
| **Shuffle äº¤äº’** | æ¯æ¬¡ç‚¹å‡» Shuffle ä» DS001 ä¸­éšæœºé€‰å–ä¸‹ä¸€ä¸ªæ¨¡æ¿ï¼Œä¸è§¦å‘ç”Ÿæˆ |
| **é»˜è®¤æ¨¡æ¿** | DS001 ä¸­æ ‡è®°ä¸º `isDefault: true` çš„æ¨¡æ¿ï¼Œé¦–æ¬¡è¿›å…¥æ—¶å±•ç¤º |

#### F-02: çƒ­ç‚¹è·Ÿéšå…¥å£ (Topic Mode)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **åŠŸèƒ½æè¿°** | åŸºäº TikTok å®æ—¶çƒ­æ¦œï¼Œæä¾›çˆ†æ¬¾é€‰é¢˜ |
| **è¾“å…¥** | ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥å…³é”®è¯ï¼Œæˆ–é€‰æ‹©ä¸€ä¸ª "Breakout Chip" (çƒ­ç‚¹èƒ¶å›Š) |
| **äº¤äº’** | ç³»ç»Ÿå¼¹å‡º Script Checkpointï¼ˆå¤§çº²ç¡®è®¤çª—ï¼‰ï¼Œç”¨æˆ·ç¡®è®¤ Hook åè¿›å…¥ç”Ÿæˆ |
| **å¼‚å¸¸å¤„ç†** | ç©ºè¾“å…¥è§¦å‘ ERR_001 æ‹¦æˆªï¼›ç”¨æˆ·å¯åœ¨ Checkpoint ç‚¹å‡» "Modify Request" è¿”å› |
| **å¯¹åº”ç”¨æˆ·** | ğŸŸ¡ Ben (æˆé•¿è¿·èŒ«è€…) |
| **å¯¹åº”æ—…ç¨‹** | Ben Scene 1: å¯»æ‰¾æ•‘å‘½ç¨»è‰ â†’ Scene 2: ç¡®è®¤æ–¹å‘ |

**é€»è¾‘æµç¨‹**ï¼š
```
ç”¨æˆ·è¾“å…¥ Topic / ç‚¹å‡»ç«å“èƒ¶å›Š
  â†’ è§¦å‘ T001 (generate_script)
  â†’ å±•ç¤º Script Checkpoint (Hook/Body/CTA é¢„è§ˆ)
  â†’ [Confirm & Visualize] â†’ saveDraft() â†’ è·³è½¬ /editor
  â†’ [Modify Request] â†’ è¿”å›è¾“å…¥é˜¶æ®µ
```

#### F-03: è‡ªå®šä¹‰èµ„äº§å…¥å£ (Custom Mode)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **åŠŸèƒ½æè¿°** | å…è®¸ä¸“ä¸šç”¨æˆ·å¸¦ç€æ˜ç¡®ç´ æä¸åˆ›ä½œæè¿°ç›´æ¥ç”Ÿæˆè§†é¢‘åˆ†é•œ |
| **è¾“å…¥** | 1. è§†è§‰é”šç‚¹ï¼šé¦–å¸§/å°¾å¸§ä¸Šä¼ ï¼›2. æ–‡æœ¬æè¿°ï¼šä¸€æ®µå®Œæ•´çš„è§†é¢‘åˆ›ä½œæè¿° |
| **äº¤äº’** | ä¸‹æ–¹å‚æ•°æ¡ä»¥â€œèƒ¶å›Šä¸‹æ‹‰â€å½¢å¼æä¾›ç”Ÿæˆé…ç½®ï¼ˆæ¨¡å¼/æ¨¡å‹/å‚è€ƒ/æ¯”ä¾‹/æ—¶é•¿ï¼‰ï¼Œå³ä¾§åœ†å½¢æŒ‰é’®ä¸€é”®ç”Ÿæˆ |
| **æ ¸å¿ƒé€»è¾‘** | è‹¥ä¸Šä¼ é¦–å¸§/å°¾å¸§ï¼Œåˆ™åœ¨åˆ†é•œé¦–å°¾å¼ºåˆ¶è´´åˆé”šç‚¹ç”»é¢ï¼Œé¿å… AI åç§» |
| **å¯¹åº”ç”¨æˆ·** | ğŸ”µ Alex (ä¸“ä¸šä¼˜åŒ–è€…) |
| **å¯¹åº”æ—…ç¨‹** | Alex Scene 1: å¸¦ç€èµ„äº§å…¥åœº â†’ Scene 2: è§†è§‰é”šå®š |

**é€»è¾‘æµç¨‹**ï¼š
```
ç”¨æˆ·è¾“å…¥åˆ›ä½œæè¿° + (å¯é€‰)ä¸Šä¼ é¦–å¸§/å°¾å¸§
  â†’ é€‰æ‹©ç”Ÿæˆå‚æ•°ï¼ˆæ¨¡å¼/æ¨¡å‹/å‚è€ƒ/æ¯”ä¾‹/æ—¶é•¿ï¼‰
  â†’ [åœ†å½¢ç”ŸæˆæŒ‰é’®]
  â†’ saveDraft({ assets, generationConfig })
  â†’ è·³è½¬ /editor (é¦–å°¾å¡ç‰‡é”å®šä¸ºé”šç‚¹ç”»é¢)
```

**å‚æ•°æ¡ä¸‹æ‹‰å®šä¹‰ (Generation Config Bar)**ï¼š

| ä¸‹æ‹‰é¡¹ | é€‰é¡¹åˆ—è¡¨ | é»˜è®¤å€¼ | æ•°æ®æ¨¡å‹æ˜ å°„ | è¯´æ˜ |
| :--- | :--- | :--- | :--- | :--- |
| **ç”Ÿæˆæ¨¡å¼** | `è§†é¢‘ç”Ÿæˆ` / `å›¾ç‰‡ç”Ÿæˆ` | `è§†é¢‘ç”Ÿæˆ` | `generationConfig.outputType: 'video' \| 'image'` | Phase 1 ä»…æ”¯æŒè§†é¢‘ç”Ÿæˆ |
| **ç”Ÿæˆæ¨¡å‹** | `Seedance 2.0` / `Kling` / `Runway` / `Sora` | `Seedance 2.0` | `generationConfig.model: string` | Phase 1: Mock (æ¨¡å‹é€‰æ‹©ä¸å½±å“è¾“å‡º)ï¼›Phase 2: è·¯ç”±åˆ°å¯¹åº” API |
| **å‚è€ƒæ¨¡å¼** | `é¦–å°¾å¸§` / `ä»…é¦–å¸§` / `æ— å‚è€ƒ` | `é¦–å°¾å¸§` | `generationConfig.referenceMode: 'both' \| 'start_only' \| 'none'` | æ§åˆ¶ Visual Anchor ä½¿ç”¨æ–¹å¼ |
| **ç”»é¢æ¯”ä¾‹** | `9:16` / `16:9` / `1:1` | `9:16` | `generationConfig.aspectRatio: string` â†’ æ˜ å°„åˆ° `RenderConfig.resolution` | TikTok æ¨è 9:16 |
| **è§†é¢‘æ—¶é•¿** | `5s` / `10s` / `15s` / `30s` / `60s` | `5s` | `generationConfig.targetDuration: number` | å½±å“åˆ†é•œæ•°é‡å’Œå•åœºæ™¯æ—¶é•¿åˆ†é… |

```typescript
interface GenerationConfig {
  outputType: 'video' | 'image';
  model: string;
  referenceMode: 'both' | 'start_only' | 'none';
  aspectRatio: '9:16' | '16:9' | '1:1';
  targetDuration: number;  // ç§’
}
```

### 4.2 è¯­ä¹‰åŒ–ç¼–è¾‘å±‚ (/editor)

#### F-04: è¯­ä¹‰åŒ–å¡ç‰‡ç¼–è¾‘å™¨ (Semantic Card Editor)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **åŠŸèƒ½æè¿°** | å°†ä¼ ç»Ÿè§†é¢‘è½¨é“è½¬åŒ–ä¸º"æ©™(Hook)/ç°è“(Body)/ç¿ ç»¿(CTA)"ä¸‰è‰²å¡ç‰‡æµï¼Œé™ä½ç¼–è¾‘é—¨æ§› |
| **æ ¸å¿ƒä»·å€¼** | æ¶ˆé™¤ç­‰å¾…ç„¦è™‘ (Case B)ï¼Œè„šæœ¬ç»“æ„å³æ—¶å¯è§ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…è§†é¢‘æ¸²æŸ“å³å¯å®¡é˜… |
| **å¯¹åº”ç”¨æˆ·** | All (æ‰€æœ‰ç”¨æˆ·ç±»å‹) |

**å¡ç‰‡ç±»å‹ä¸è¯­ä¹‰**ï¼š

| å¡ç‰‡ç±»å‹ | é¢œè‰² | æ—¶é—´æ®µ | åŠŸèƒ½ | äº¤äº’ |
| :--- | :--- | :--- | :--- | :--- |
| ğŸ”´ **Hook Card** | æ©™çº¢è‰² (orange-50) | å‰ 3s | å¼ºè§†è§‰å†²å‡»ï¼ŒåŒ…å« Visual Anchor | ç‚¹å‡»å¯ä¿®æ”¹æ–‡æ¡ˆ |
| ğŸ”µ **Body Cards** | è“ç°è‰² (slate-50) | ä¸­é—´å†…å®¹ | å™äº‹é€»è¾‘ï¼Œæ”¯æŒ Text-to-Video æ¶¦è‰² | ç‚¹å‡»å¯ä¿®æ”¹æ–‡æ¡ˆï¼Œhover æ˜¾ç¤º "Generate Image" |
| ğŸŸ£ **CTA Card** | ç¿ ç»¿è‰² (emerald-50) | ç»“å°¾ 3-5s | å¼•å¯¼å…³æ³¨/è´­ä¹° | ç‚¹å‡»å¯ä¿®æ”¹æ–‡æ¡ˆ |

**ç¼–è¾‘äº¤äº’**ï¼š
*   ç‚¹å‡»å¡ç‰‡ â†’ æ‰“å¼€ **Scene Detail Sheet** (F-06)ï¼Œè¿›å…¥é€åœºæ™¯ç²¾ç»†æ§åˆ¶ã€‚
*   å¡ç‰‡å³ä¸Šè§’æ˜¾ç¤º **Magic Wand æŒ‰é’® (âœ¨)**ï¼š
    *   `iomEnabled === true`ï¼šå›¾æ ‡ä¸º Emerald/Active çŠ¶æ€ (ç¿ ç»¿è‰²é«˜äº®)ã€‚
    *   `iomEnabled === false`ï¼šå›¾æ ‡ä¸º Gray/Inactive çŠ¶æ€ (ç°è‰²)ã€‚
    *   ç‚¹å‡» Wand æŒ‰é’®ç­‰åŒäºç‚¹å‡»å¡ç‰‡ï¼Œæ‰“å¼€ Scene Detail Sheetã€‚
*   Hover å¡ç‰‡ â†’ æ˜¾ç¤º "Generate Image" æŒ‰é’® â†’ ç‚¹å‡»ä¸ºè¯¥åœºæ™¯ç”Ÿæˆå‚è€ƒå›¾ (Phase 2)ã€‚
*   å¡ç‰‡é¡¶éƒ¨æ˜¾ç¤ºåºå·å’Œæ—¶é•¿ (å¦‚ `01 Â· 3s`)ï¼Œåº•éƒ¨æ˜¾ç¤ºç”»é¢æè¿°ã€‚
*   è‹¥ `cinematicPrompt` å­˜åœ¨ï¼Œå¡ç‰‡åº•éƒ¨ä»¥å°å­—ç°è‰²å±•ç¤ºæ¶¦è‰²åçš„ Prompt æ‘˜è¦ (æˆªæ–­è‡³ 60 å­—ç¬¦)ã€‚

#### F-05: ç›´æ¥å‘å¸ƒé—­ç¯ (Publish First)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **åŠŸèƒ½æè¿°** | è·³è¿‡ä¸‹è½½ç¯èŠ‚ï¼Œç›´æ¥æ¨é€åˆ° TikTok è‰ç¨¿ç®±æˆ–å‘å¸ƒ |
| **æ ¸å¿ƒä»·å€¼** | å°† 6 æ­¥æ“ä½œç¼©å‡ä¸º 1 æ­¥ (Case C)ï¼ŒMCN æ¯å¤©èŠ‚çœ 2 å°æ—¶ |
| **API ä¾èµ–** | TikTok Content Posting API (Phase 2 çœŸå®æ¥å…¥) |
| **å¯¹åº”ç”¨æˆ·** | ğŸŸ¢ Sarahã€ğŸŸ£ Emily (é«˜é¢‘ä½¿ç”¨)ã€ğŸŸ¡ Benã€ğŸ”µ Alex |

**çŠ¶æ€æµè½¬**ï¼š
```
[Publish] (ç»¿è‰²æŒ‰é’®)
  â†’ publishStatus: 'idle' â†’ 'loading' (è½¬åœˆ, "Uploading...")
  â†’ 'success' (æŒ‰é’®å˜é»‘, "View Live Post â†—")
  â†’ ç‚¹å‡»è·³è½¬ TikTok è§†é¢‘é¡µ
```

**æŒ‰é’®ä¼˜å…ˆçº§ (Done é˜¶æ®µ)**ï¼š
1.  **Primary**: Publish (ç»¿è‰²) â€” æœ€æ˜¾çœ¼ä½ç½®
2.  **Secondary**: Export (ç™½è‰²è¾¹æ¡†) â€” å¯¼å‡ºåˆ†é•œ
3.  **Tertiary**: Save (æ–‡å­—é“¾æ¥) â€” ä»…ä¿å­˜è‰ç¨¿

**Done â†’ Back to Storyboard å›é€€é€»è¾‘**ï¼š

| å±æ€§ | æè¿° |
| :--- | :--- |
| **è§¦å‘** | ç”¨æˆ·åœ¨ Done é˜¶æ®µç‚¹å‡» "Back to Storyboard" æŒ‰é’® |
| **çŠ¶æ€å›é€€** | DraftStatus ä» `done` å›é€€åˆ° `reviewing` |
| **è§†é¢‘ç¼“å­˜** | å·²æ¸²æŸ“çš„è§†é¢‘ URL ä¿ç•™åœ¨ `RenderJob.result` ä¸­ï¼Œä¸ç«‹å³ä¸¢å¼ƒ |
| **åˆ†é•œæ¢å¤** | åˆ†é•œæ•°æ®ä¿æŒä¸å˜ï¼Œç”¨æˆ·å¯ç»§ç»­ç¼–è¾‘ |
| **é‡æ–°æ¸²æŸ“** | ç”¨æˆ·ä¿®æ”¹åˆ†é•œåéœ€é‡æ–°ç‚¹å‡» "Generate Video" è§¦å‘ T004ã€‚è‹¥åˆ†é•œæœªä¿®æ”¹ï¼Œå¯å¤ç”¨ç¼“å­˜è§†é¢‘ |
| **ç¼“å­˜å¤±æ•ˆ** | ä»»ä½•åˆ†é•œå†…å®¹å˜æ›´ (desc/cinematicPrompt/visualIntent/duration/order) å‡ä½¿è§†é¢‘ç¼“å­˜å¤±æ•ˆ |
| **Phase 1 å®ç°** | å›é€€åæ¸…é™¤è§†é¢‘é¢„è§ˆï¼Œé‡æ–°è¿›å…¥ Storyboard è§†å›¾ã€‚ä¸å®ç°ç¼“å­˜å¤ç”¨ (ç®€åŒ–) |

#### F-06: IOM äº¤äº’æ§åˆ¶ â€” Scene Detail Sheet (v2.4 æ–°å¢)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **åŠŸèƒ½æè¿°** | é€åœºæ™¯çš„ Human-in-the-Loop æ§åˆ¶é¢æ¿ï¼Œå…è®¸ç”¨æˆ·å¼€å…³ AI æ¶¦è‰²ã€åˆ‡æ¢è§†è§‰æ„å›¾ã€é¢„è§ˆ/ç¼–è¾‘æœ€ç»ˆ Prompt |
| **è§¦å‘æ–¹å¼** | ç‚¹å‡» StoryboardCard æˆ–å¡ç‰‡ä¸Šçš„ Magic Wand (âœ¨) æŒ‰é’® |
| **ç»„ä»¶å½¢æ€** | Dialog / Modal / Drawer (åº•éƒ¨æŠ½å±‰æˆ–ä¾§è¾¹é¢æ¿) |
| **æ ¸å¿ƒä»·å€¼** | å®ç° "Polish or No-Polish" å·¥ä½œæµï¼Œè®©ç”¨æˆ·å†³å®š AI ä»‹å…¥ç¨‹åº¦ |
| **å¯¹åº”ç”¨æˆ·** | ğŸ”µ Alex (éœ€è¦ç²¾ç¡®æ§åˆ¶)ã€ğŸŸ¡ Ben (æƒ³å¾®è°ƒ Hook)ã€All (é«˜çº§ç”¨æˆ·) |
| **æ¶‰åŠæ–‡ä»¶** | `src/app/components/video-studio/SceneDetailSheet.tsx` (æ–°å»º)ã€`src/app/components/video-studio/VideoStudioEditor.tsx` (çŠ¶æ€ç®¡ç†) |

**Sheet å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Edit Scene 01 (Hook Scene)                        [ âœ• ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  User Outcome (Visual Intent)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¦ Product â”‚ â”‚ âš¡ High    â”‚ â”‚ â¤ï¸ Story-  â”‚ â”‚ â–¦ Balan- â”‚ â”‚
â”‚  â”‚   Focus    â”‚ â”‚  Energy    â”‚ â”‚  telling   â”‚ â”‚   ced    â”‚ â”‚
â”‚  â”‚  (Detail)  â”‚ â”‚ (Impact)   â”‚ â”‚ (Emotion)  â”‚ â”‚(Default) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Script / Description              âœ¨ AI Polish  [ ON/OFF ] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ IOM ON:  æ˜¾ç¤º cinematicPrompt (åªè¯», ç¿ ç»¿è¾¹æ¡†)          â”‚â”‚
â”‚  â”‚ IOM OFF: æ˜¾ç¤º desc (å¯ç¼–è¾‘, æ ‡å‡†è¾¹æ¡†)                    â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚
â”‚  â”‚ ç¤ºä¾‹ (IOM ON):                                          â”‚â”‚
â”‚  â”‚ Cinematic impact shot, wide shot, dramatic lighting,    â”‚â”‚
â”‚  â”‚ Man drinking coffee, professional lighting, 4k          â”‚â”‚
â”‚  â”‚                              [ğŸ”’ Cinematic Mode Active] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  128 characters                                             â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ Cancel ]                              [ Save Changes ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **å®ç°è¯´æ˜**ï¼šå®é™…å®ç°ä¸ºå•ä¸ª Textareaï¼Œæ ¹æ® IOM å¼€å…³çŠ¶æ€åˆ‡æ¢æ˜¾ç¤ºå†…å®¹å’Œç¼–è¾‘æƒé™ã€‚
> IOM ON æ—¶æ˜¾ç¤º `cinematicPrompt` ä¸”åªè¯»ï¼›IOM OFF æ—¶æ˜¾ç¤º `desc` ä¸”å¯ç¼–è¾‘ã€‚

**æ§ä»¶è¯¦ç»†è¯´æ˜**ï¼š

| æ§ä»¶ | ç±»å‹ | è¡Œä¸º |
| :--- | :--- | :--- |
| **A: IOM Toggle** | Switch (å¼€å…³) | ON = ç³»ç»Ÿè‡ªåŠ¨æ¶¦è‰² description â†’ cinematicPromptï¼›OFF = cinematicPrompt ç›´æ¥ç­‰äº description |
| **B: Visual Intent** | Segmented Control (åˆ†æ®µé€‰æ‹©å™¨) | é€‰é¡¹: Detail / Impact / Emotion / Defaultã€‚åˆ‡æ¢åå®æ—¶æ›´æ–° Prompt Textarea å†…å®¹ |
| **C: Prompt Textarea** | TextArea (æ¡ä»¶å¯ç¼–è¾‘) | **å•ä¸ª Textarea**ï¼Œæ ¹æ® IOM çŠ¶æ€åˆ‡æ¢è¡Œä¸º (è§ä¸‹æ–¹è§„åˆ™) |

**Prompt Textarea è¡Œä¸ºè§„åˆ™ (å• Textarea å®ç°)**ï¼š

| IOM çŠ¶æ€ | æ˜¾ç¤ºå†…å®¹ | ç¼–è¾‘æƒé™ | è¾¹æ¡†æ ·å¼ | åº•éƒ¨æ ‡ç­¾ |
| :--- | :--- | :--- | :--- | :--- |
| **ON** | `cinematicPrompt` (ç³»ç»Ÿç”Ÿæˆçš„é•œå¤´è¯­è¨€) | åªè¯» (`readOnly=true`, `cursor-not-allowed`) | ç¿ ç»¿è‰²è¾¹æ¡† (`border-emerald-300`) | `ğŸ”’ Cinematic Mode Active` |
| **OFF** | `desc` (ç”¨æˆ·åŸå§‹æè¿°) | å¯ç¼–è¾‘ | æ ‡å‡†è¾¹æ¡† | `âœï¸ Manual Mode` |

> **å·¥ç¨‹å®ç°è¦ç‚¹**ï¼šä¸è¦åˆ›å»ºä¸¤ä¸ª Textareaã€‚ä½¿ç”¨å•ä¸ª `<Textarea>` ç»„ä»¶ï¼Œé€šè¿‡ `value`ã€`readOnly`ã€`className` ä¸‰ä¸ªå±æ€§æ ¹æ® `iomEnabled` çŠ¶æ€åŠ¨æ€åˆ‡æ¢ã€‚

**è§„åˆ™å¼•æ“æ¶¦è‰²é€»è¾‘ (MVP / Phase 1)**ï¼š

```typescript
function generateCinematicPrompt(scene: StoryboardScene): string {
  if (!scene.iomEnabled) {
    return scene.desc;
  }

  // MVP ç‰ˆæœ¬ï¼šåŸºäºè§„åˆ™çš„ç®€å•æ¨¡æ¿æ‹¼æ¥
  const intentMap = {
    'Detail': 'close-up, macro lens, shallow depth of field',
    'Impact': 'wide shot, dramatic lighting, high contrast',
    'Emotion': 'soft focus, warm tones, intimate framing',
    'Default': 'standard shot, balanced composition'
  };

  const intentStyle = intentMap[scene.visualIntent] || intentMap['Default'];

  return `Cinematic ${scene.visualIntent.toLowerCase()} shot, ${intentStyle}, ` +
         `${scene.desc}, professional lighting, high fidelity, 4k`;
}
```

> **Phase 2 å‡çº§**ï¼šå°†è§„åˆ™å¼•æ“æ›¿æ¢ä¸º LLM (GPT-4/Claude)ï¼Œå®ç°ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æ™ºèƒ½æ¶¦è‰²ã€‚

**çŠ¶æ€ç®¡ç† (Editor Page)**ï¼š

```typescript
// åœ¨ Editor page ä¸­ç®¡ç† selectedScene çŠ¶æ€
const [selectedScene, setSelectedScene] = useState<StoryboardScene | null>(null);
const [isSheetOpen, setIsSheetOpen] = useState(false);

// ç‚¹å‡»å¡ç‰‡æˆ– Wand æŒ‰é’®æ—¶
const handleSceneClick = (scene: StoryboardScene) => {
  setSelectedScene(scene);
  setIsSheetOpen(true);
};

// Sheet ä¿å­˜æ—¶æ›´æ–° storyboard çŠ¶æ€
const handleSceneSave = (updatedScene: StoryboardScene) => {
  setStoryboard(prev => prev.map(s => s.id === updatedScene.id ? updatedScene : s));
  setIsSheetOpen(false);
};
```

---

## äº”ã€æ ¸å¿ƒç®—æ³•é€»è¾‘â€”â€”IOM ç”µå½±çº§æ¶¦è‰²å¼•æ“

> æœ¬ç« æè¿° OwlSeer çš„æ ¸å¿ƒå·®å¼‚åŒ–æŠ€æœ¯ï¼š**IOM (Intermediate Optimization Module)**ã€‚
> IOM æ˜¯è¿æ¥"ç”¨æˆ·è„šæœ¬"ä¸"è§†é¢‘ç”Ÿæˆæ¨¡å‹"ä¹‹é—´çš„æ¡¥æ¢ï¼Œè§£å†³ AI ç”Ÿæˆè§†é¢‘"åƒ PPT"æˆ–"è¿é•œåƒµç¡¬"çš„é—®é¢˜ã€‚

### 5.1 ä»€ä¹ˆæ˜¯ IOMï¼Ÿ

IOM (Intermediate Optimization Module) æ˜¯ **Script-to-Video Bridge (è„šæœ¬åˆ°è§†é¢‘çš„æ¡¥æ¢)**ã€‚

å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯å°†ç”¨æˆ·çš„ **æè¿°æ€§è¯­è¨€ (Descriptive Language)** è½¬åŒ–ä¸ºè§†é¢‘ç”Ÿæˆæ¨¡å‹å¯ç†è§£çš„ **é•œå¤´è¯­è¨€ (Cinematic Language)**ã€‚

```
ç”¨æˆ·è¾“å…¥ (è‡ªç„¶è¯­è¨€)
    â†“
[ IOM æ¶¦è‰²å±‚ ]
    â†“
è§†é¢‘æ¨¡å‹ Prompt (é•œå¤´è¯­è¨€)
    â†“
æœ€ç»ˆè§†é¢‘ (Sora / Kling / Runway)
```

**ä¸ºä»€ä¹ˆéœ€è¦ IOMï¼Ÿ**

| é—®é¢˜ | æ²¡æœ‰ IOM | æœ‰ IOM |
| :--- | :--- | :--- |
| ç”¨æˆ·è¾“å…¥ | "ä¸€ä¸ªç”·äººåœ¨å–å’–å•¡" | "ä¸€ä¸ªç”·äººåœ¨å–å’–å•¡" |
| æ¨¡å‹æ”¶åˆ°çš„ Prompt | "a man drinking coffee" | "Cinematic wide shot, 35mm lens, soft morning sunlight through window, a man drinking coffee, slow motion, high fidelity, 4k" |
| ç”Ÿæˆç»“æœ | é™æ€ã€å¹³é¢ã€åƒ PPT | ç”µå½±æ„Ÿã€æœ‰å…‰å½±ã€æœ‰è¿é•œ |

### 5.2 å¤„ç†æµç¨‹ (The Pipeline)

#### Step 1: è¯­ä¹‰æå– (Semantic Extraction)

ç³»ç»Ÿè¯†åˆ«ç”¨æˆ·è„šæœ¬ä¸­çš„å…³é”®å®ä½“å’Œæƒ…æ„ŸåŸºè°ƒã€‚

| æå–ç»´åº¦ | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| **ä¸»ä½“ (Subject)** | ç”»é¢ä¸­çš„æ ¸å¿ƒå¯¹è±¡ | "ç”·äºº"ã€"å’–å•¡"ã€"æ‰‹æœº" |
| **åŠ¨ä½œ (Action)** | ä¸»ä½“æ­£åœ¨åšä»€ä¹ˆ | "å–"ã€"å±•ç¤º"ã€"æ‹†ç®±" |
| **æƒ…æ„ŸåŸºè°ƒ (Mood)** | åœºæ™¯çš„æƒ…ç»ªæ°›å›´ | Calm / Energetic / Dramatic / Cozy |
| **åœºæ™¯ç±»å‹ (Scene Type)** | Hook / Body / CTA | å†³å®šè¿é•œå¼ºåº¦å’ŒèŠ‚å¥ |

#### Step 2: é•œå¤´è¯­è¨€è¡¥å…¨ (Cinematic Completion)

IOM å¼•æ“æ ¹æ®æƒ…æ„ŸåŸºè°ƒ (Mood) å’Œåœºæ™¯ç±»å‹ (Scene Type)ï¼Œè‡ªåŠ¨è¡¥å…¨ç¼ºå¤±çš„è§†è§‰å‚æ•°ï¼š

**Camera (è¿é•œ)**ï¼š

| è¿é•œç±»å‹ | é€‚ç”¨åœºæ™¯ | æ•ˆæœ |
| :--- | :--- | :--- |
| **Pan (æ‘‡é•œå¤´)** | Body åœºæ™¯ï¼Œå±•ç¤ºç¯å¢ƒ | å¹³ç¨³å™äº‹æ„Ÿ |
| **Dolly Zoom (å¸ŒåŒºæŸ¯å…‹å˜ç„¦)** | Hook åœºæ™¯ï¼Œåˆ¶é€ æ‚¬å¿µ | å¼ºçƒˆè§†è§‰å†²å‡» |
| **Tracking Shot (è·Ÿæ‹)** | Body åœºæ™¯ï¼Œè·Ÿéšä¸»ä½“ | æ²‰æµ¸å¼ä½“éªŒ |
| **Static Close-up (é™æ€ç‰¹å†™)** | CTA åœºæ™¯ï¼Œèšç„¦äº§å“ | ç»†èŠ‚å±•ç¤º |

**Lighting (å…‰å½±)**ï¼š

| å…‰å½±ç±»å‹ | é€‚ç”¨ Mood | æ•ˆæœ |
| :--- | :--- | :--- |
| **Golden Hour (é»„é‡‘æ—¶åˆ»)** | Calm / Cozy | æ¸©æš–ã€æ²»æ„ˆ |
| **Cyberpunk Neon (èµ›åšéœ“è™¹)** | Energetic | ç§‘æŠ€æ„Ÿã€æ½®æµ |
| **Soft Studio (æŸ”å…‰)** | äº§å“å±•ç¤º | ä¸“ä¸šã€å¹²å‡€ |
| **High Contrast (é«˜å¯¹æ¯”)** | Dramatic | æˆå‰§å¼ åŠ› |

**Lens (é•œå¤´)**ï¼š

| é•œå¤´ç±»å‹ | ç„¦æ®µ | é€‚ç”¨åœºæ™¯ |
| :--- | :--- | :--- |
| **35mm (äººæ–‡)** | æ ‡å‡† | æ—¥å¸¸å™äº‹ã€Vlog |
| **85mm (äººåƒ)** | ä¸­é•¿ç„¦ | äººç‰©ç‰¹å†™ã€æƒ…æ„Ÿ |
| **Macro (å¾®è·)** | è¶…è¿‘ | äº§å“ç»†èŠ‚ã€é£Ÿç‰© |
| **Fisheye (é±¼çœ¼)** | è¶…å¹¿ | æé™è¿åŠ¨ã€å¤¸å¼ æ•ˆæœ |

#### Step 3: Prompt å¢å¼º (Prompt Injection)

å°† Step 1 å’Œ Step 2 çš„ç»“æœç»„åˆä¸ºè§†é¢‘æ¨¡å‹å¯æ‰§è¡Œçš„ Promptã€‚

**è½¬åŒ–ç¤ºä¾‹**ï¼š

| é˜¶æ®µ | å†…å®¹ |
| :--- | :--- |
| **ç”¨æˆ·è¾“å…¥** | "ä¸€ä¸ªç”·äººåœ¨å–å’–å•¡" |
| **è¯­ä¹‰æå–** | Subject: man, Action: drinking coffee, Mood: Calm |
| **é•œå¤´è¡¥å…¨** | Camera: Pan, Lighting: Golden Hour, Lens: 35mm |
| **æœ€ç»ˆ Prompt** | `"Cinematic wide shot, 35mm lens, soft morning sunlight through window, a man drinking coffee, slow pan right, golden hour lighting, shallow depth of field, high fidelity, 4k, film grain"` |

### 5.3 åŠ¨æ€å‚æ•°æ§åˆ¶

#### Visual Anchor èåˆ

å½“ç”¨æˆ·ä¸Šä¼ äº†äº§å“å›¾ (Custom Mode, F-03)ï¼ŒIOM ä¼šæ‰§è¡Œä»¥ä¸‹é¢å¤–æ­¥éª¤ï¼š

1.  **å›¾ç‰‡ç‰¹å¾æå– (img2img)**ï¼šåˆ†æä¸Šä¼ å›¾ç‰‡çš„ä¸»ä½“ã€è‰²è°ƒã€æ„å›¾ã€‚
2.  **å¼ºåˆ¶å‚è€ƒæ³¨å…¥**ï¼šè‡ªåŠ¨æ·»åŠ  `--cref` (Character Reference) å‚æ•°ï¼Œç¡®ä¿äº§å“åœ¨è§†é¢‘ä¸­ä¿æŒä¸€è‡´æ€§ã€‚
3.  **é¦–å¸§é”å®š**ï¼šç¬¬ä¸€ä¸ªåˆ†é•œçš„ Prompt å¼ºåˆ¶åŒ…å« `"matching reference image, consistent product appearance"`ã€‚

```
ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ â†’ ç‰¹å¾æå– â†’ --cref å‚æ•°æ³¨å…¥ â†’ é¦–å¸§é”å®š
                                              â†“
                              åç»­åˆ†é•œä¿æŒäº§å“è§†è§‰ä¸€è‡´æ€§
```

#### æ—¶é•¿æ§åˆ¶ (Duration Sync)

æ ¹æ®è„šæœ¬æœ—è¯»æ—¶é•¿ (TTS Duration)ï¼Œè‡ªåŠ¨è®¡ç®—è§†é¢‘ç‰‡æ®µçš„ç”Ÿæˆæ—¶é•¿ï¼Œç¡®ä¿éŸ³ç”»åŒæ­¥ï¼š

```typescript
interface DurationSync {
  scriptText: string;        // è„šæœ¬æ–‡æœ¬
  estimatedTTSDuration: number;  // TTS é¢„ä¼°æœ—è¯»æ—¶é•¿ (ç§’)
  videoClipDuration: number;     // è§†é¢‘ç‰‡æ®µç”Ÿæˆæ—¶é•¿ (ç§’)
  syncStrategy: 'match' | 'extend' | 'compress';  // åŒæ­¥ç­–ç•¥
}
```

| ç­–ç•¥ | æ¡ä»¶ | è¡Œä¸º |
| :--- | :--- | :--- |
| **match** | TTS æ—¶é•¿ â‰ˆ è§†é¢‘æ—¶é•¿ | ç›´æ¥å¯¹é½ |
| **extend** | TTS æ—¶é•¿ < è§†é¢‘æ—¶é•¿ | æ·»åŠ æ…¢åŠ¨ä½œ/ç©ºé•œå¤´å¡«å…… |
| **compress** | TTS æ—¶é•¿ > è§†é¢‘æ—¶é•¿ | åŠ é€Ÿç”»é¢æˆ–è£å‰ªå†—ä½™ |

### 5.4 IOM ä¸ Agent æ¶æ„çš„é›†æˆç‚¹

| Agent èŠ‚ç‚¹ | IOM ä»‹å…¥ç‚¹ | ä½œç”¨ |
| :--- | :--- | :--- |
| **N4 (è„šæœ¬ç”Ÿæˆ)** | Step 1: è¯­ä¹‰æå– | ä»ç”¨æˆ·è¾“å…¥ä¸­æå–å®ä½“å’Œ Mood |
| **N5 (åˆ†é•œåˆæˆ)** | Step 2 + Step 3: é•œå¤´è¡¥å…¨ + Prompt å¢å¼º | ä¸ºæ¯ä¸ª StoryboardScene ç”Ÿæˆ Cinematic Prompt |
| **N6 (ç»“æœå¤„ç†)** | Visual Anchor èåˆ | ç¡®ä¿é¦–å¸§ä¸ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ä¸€è‡´ |

> **Phase 1 (MVP)**ï¼šIOM ä½¿ç”¨è§„åˆ™å¼•æ“ (Rule-based) å®ç°é•œå¤´è¯­è¨€è¡¥å…¨ã€‚
> **Phase 2**ï¼šIOM æ¥å…¥ LLM (GPT-4/Claude) å®ç°æ™ºèƒ½åŒ–çš„ Cinematic Completionã€‚

### 5.5 iom-engine æ¨¡å—è§„æ ¼

> **æ–‡ä»¶è·¯å¾„**ï¼š`src/app/lib/iom-engine.ts`
> **èŒè´£**ï¼šå°è£… IOM æ¶¦è‰²é€»è¾‘ï¼Œæä¾›ç»Ÿä¸€çš„ Prompt ç”Ÿæˆæ¥å£ã€‚

**æ¨¡å—å…¬å…± API**ï¼š

```typescript
// src/app/lib/iom-engine.ts

/**
 * ä¸ºå•ä¸ªåœºæ™¯ç”Ÿæˆ Cinematic Prompt
 * è°ƒç”¨æ—¶æœºï¼šScene Detail Sheet ä¿å­˜æ—¶ã€åˆ†é•œé¦–æ¬¡ç”Ÿæˆæ—¶ (T002 è¾“å‡ºå)
 */
export function generateCinematicPrompt(scene: StoryboardScene): string;

/**
 * æ‰¹é‡ä¸ºæ‰€æœ‰åœºæ™¯ç”Ÿæˆ Cinematic Prompt
 * è°ƒç”¨æ—¶æœºï¼šT002 è¾“å‡ºåˆ†é•œåˆ—è¡¨åï¼Œè‡ªåŠ¨ä¸º iomEnabled=true çš„åœºæ™¯ç”Ÿæˆ
 */
export function batchGenerateCinematicPrompts(scenes: StoryboardScene[]): StoryboardScene[];

/**
 * Visual Intent åˆ°é•œå¤´å‚æ•°çš„æ˜ å°„è¡¨ (å¯å¯¼å‡ºä¾›æµ‹è¯•ä½¿ç”¨)
 */
export const INTENT_STYLE_MAP: Record<VisualIntent, string>;
```

**é›†æˆç‚¹**ï¼š

| è°ƒç”¨æ–¹ | è°ƒç”¨æ—¶æœº | è°ƒç”¨å‡½æ•° |
| :--- | :--- | :--- |
| `VideoStudioEditor.tsx` | T002 ç”Ÿæˆåˆ†é•œå | `batchGenerateCinematicPrompts(scenes)` |
| `SceneDetailSheet.tsx` | ç”¨æˆ·ä¿å­˜åœºæ™¯ä¿®æ”¹æ—¶ | `generateCinematicPrompt(scene)` |
| `SceneDetailSheet.tsx` | ç”¨æˆ·åˆ‡æ¢ Visual Intent æ—¶ | `generateCinematicPrompt(scene)` (å®æ—¶é¢„è§ˆ) |

---

## å…­ã€Agent æ¶æ„è®¾è®¡

### 6.1 Agent æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    User[ç”¨æˆ·è¾“å…¥] --> N1[N1 è¾“å…¥è§£æèŠ‚ç‚¹]
    
    subgraph "Video Creation Agent"
        N1 --> N2[N2 ä¸Šä¸‹æ–‡ç®¡ç†èŠ‚ç‚¹]
        N2 --> N3[N3 æ„å›¾è¯†åˆ«ä¸è·¯ç”±]
        N3 -->|ç”Ÿæˆè„šæœ¬| N4[N4 è„šæœ¬ç”ŸæˆèŠ‚ç‚¹]
        N3 -->|æ¢å¤è‰ç¨¿| N2
        N4 --> N5[N5 åˆ†é•œåˆæˆèŠ‚ç‚¹]
        N5 --> N6[N6 ç»“æœå¤„ç†èŠ‚ç‚¹]
    end
    
    N2 <--> DB[(LocalStorage/DB)]
    N4 --> T1[Tool: generate_script]
    N5 --> T2[Tool: synthesize_storyboard]
    N6 --> UI[ç”¨æˆ·ç•Œé¢/é¢„è§ˆ]
```

### 6.2 Agent èŠ‚ç‚¹è¯´æ˜

| èŠ‚ç‚¹ID | èŠ‚ç‚¹åç§° | åŠŸèƒ½æè¿° | ä¼˜å…ˆçº§ | è¾“å…¥ | è¾“å‡º | ä¾èµ– |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **N1** ğŸ”´ | è¾“å…¥è§£æèŠ‚ç‚¹ | æ¥æ”¶ç”¨æˆ· UI è¾“å…¥ï¼Œæ ‡å‡†åŒ–ä¸º Agent è¯·æ±‚å¯¹è±¡ | P0 | `UserIntent`, `Mode` | `StandardRequest` | - |
| **N2** ğŸ”´ | ä¸Šä¸‹æ–‡ç®¡ç†èŠ‚ç‚¹ | å¤„ç†è‰ç¨¿çš„ Hydration å’Œ Persistence | P0 | `DraftID`, `Request` | `DraftContext` | `draft-service` |
| **N3** ğŸ”´ | æ„å›¾è·¯ç”±èŠ‚ç‚¹ | åˆ¤æ–­æ˜¯æ–°ç”Ÿæˆã€ç»§ç»­ç¼–è¾‘è¿˜æ˜¯æŸ¥çœ‹ç»“æœ | P0 | `DraftContext` | `ActionPlan` | - |
| **N4** ğŸ”´ | è„šæœ¬ç”ŸæˆèŠ‚ç‚¹ | è°ƒç”¨ LLM æˆ–æ¨¡æ¿ç”Ÿæˆç»“æ„åŒ–æ–‡æœ¬ | P0 | `Topic`, `Style` | `ScriptText` | `T001` |
| **N5** ğŸ”´ | åˆ†é•œåˆæˆèŠ‚ç‚¹ | å°†è„šæœ¬æ–‡æœ¬è½¬åŒ–ä¸ºåˆ†é•œå¯¹è±¡åˆ—è¡¨ | P0 | `ScriptText` | `Storyboard` | `T002` |
| **N6** ğŸ”´ | ç»“æœå¤„ç†èŠ‚ç‚¹ | ç»„è£…æœ€ç»ˆ Draft å¯¹è±¡å¹¶é€šçŸ¥ UI æ¸²æŸ“ | P0 | `Draft` | `RenderView` | - |

### 6.3 Agent å·¥ä½œæµç¨‹ (å…¨é“¾è·¯)

```mermaid
graph TD
    %% è§¦å‘å±‚
    Start((ç”¨æˆ·è¿›å…¥ Studio)) --> ModeSelect{é€‰æ‹©æ¨¡å¼}
    ModeSelect -->|Topic| InputTopic[è¾“å…¥ä¸»é¢˜]
    ModeSelect -->|Auto| InputAuto[éšæœºç”Ÿæˆ]
    ModeSelect -->|Custom| InputCustom[ç²˜è´´è„šæœ¬]
    
    %% N1 è§£æ
    InputTopic & InputAuto & InputCustom --> N1[N1: è§£æè¯·æ±‚]
    
    %% N2 ä¸Šä¸‹æ–‡
    N1 --> N2[N2: åˆå§‹åŒ– Draft]
    N2 -->|æ£€æŸ¥ ID| CheckID{æœ‰ DraftID?}
    CheckID -->|Yes| LoadDraft[åŠ è½½å†å²è‰ç¨¿]
    CheckID -->|No| CreateDraft[åˆ›å»ºæ–°è‰ç¨¿ ID]
    
    %% N3 è·¯ç”±
    LoadDraft & CreateDraft --> N3[N3: è·¯ç”±åˆ¤æ–­]
    N3 -->|Need Gen| N4[N4: ç”Ÿæˆè„šæœ¬]
    N3 -->|Has Content| N6[N6: ç›´æ¥é¢„è§ˆ]
    
    %% N4/N5 ç”Ÿæˆ
    N4 --> T001[Tool: generate_script]
    T001 --> N5[N5: åˆæˆåˆ†é•œ]
    N5 --> T002[Tool: synthesize_storyboard]
    
    %% N6 ç»“æœ
    T002 --> N6[N6: ç»“æœç»„è£…]
    N6 --> T003[Tool: save_draft]
    T003 --> End((UI æ¸²æŸ“åˆ†é•œ))
```

### 6.4 Agent çŠ¶æ€æœº

```mermaid
stateDiagram-v2
    [*] --> Idle
    Idle --> Hydrating: ç»„ä»¶åŠ è½½
    Hydrating --> Idle: æ¢å¤å®Œæˆ

    Idle --> ScriptChecking: Topic æ¨¡å¼ç‚¹å‡»ç”Ÿæˆ
    ScriptChecking --> Idle: ç”¨æˆ·è¿”å›ä¿®æ”¹
    ScriptChecking --> Generating: ç”¨æˆ·ç¡®è®¤è„šæœ¬

    Idle --> Generating: Auto/Custom æ¨¡å¼ç‚¹å‡»ç”Ÿæˆ
    Generating --> Scripting: N4 æ‰§è¡Œä¸­
    Scripting --> Storyboarding: N5 æ‰§è¡Œä¸­
    Storyboarding --> Reviewing: N6 å®Œæˆ

    Reviewing --> Editing: ç”¨æˆ·ä¿®æ”¹åˆ†é•œ
    Editing --> Reviewing: ä¿å­˜ä¿®æ”¹

    Reviewing --> Finalizing: ç”¨æˆ·ç‚¹å‡»ç”Ÿæˆè§†é¢‘
    Finalizing --> Done: æ¨¡æ‹Ÿæ¸²æŸ“å®Œæˆ

    Done --> Publishing: ç”¨æˆ·ç‚¹å‡»å‘å¸ƒ
    Publishing --> Published: å‘å¸ƒæˆåŠŸ
    Done --> Reviewing: è¿”å›ç¼–è¾‘åˆ†é•œ

    Published --> [*]
```

**çŠ¶æ€æšä¸¾å®šä¹‰ (DraftStatus)**ï¼š

```typescript
type DraftStatus =
  | 'idle'              // åˆå§‹çŠ¶æ€
  | 'scripting'         // N4 è„šæœ¬ç”Ÿæˆä¸­
  | 'storyboarding'     // N5 åˆ†é•œåˆæˆä¸­
  | 'reviewing'         // ç”¨æˆ·å®¡é˜…åˆ†é•œä¸­
  | 'ready_for_render'  // å¯ä»¥ç”Ÿæˆè§†é¢‘
  | 'rendering'         // è§†é¢‘ç”Ÿæˆä¸­
  | 'done'              // è§†é¢‘æ¸²æŸ“å®Œæˆï¼Œç”¨æˆ·é¢„è§ˆä¸­
  | 'publishing'        // å‘å¸ƒä¸­
  | 'published';        // å·²å‘å¸ƒ
```

**UI ç¬æ€é˜¶æ®µ (AgentUIPhase)**ï¼š

> ä»¥ä¸‹é˜¶æ®µä¸º UI å±‚çš„ç¬æ€çŠ¶æ€ï¼Œä¸æŒä¹…åŒ–åˆ° Draft ä¸­ï¼Œä»…å­˜åœ¨äºç»„ä»¶ stateã€‚

```typescript
type AgentUIPhase =
  | 'hydrating'         // ä» LocalStorage æ¢å¤ä¸Šä¸‹æ–‡ (å¯¹åº” DraftStatus: ä¿æŒåŸçŠ¶æ€)
  | 'script_checking'   // Topic æ¨¡å¼è„šæœ¬ç¡®è®¤ä¸­ (å¯¹åº” DraftStatus: 'idle')
  | 'editing'           // ç”¨æˆ·æ­£åœ¨ç¼–è¾‘å•ä¸ªåˆ†é•œ (å¯¹åº” DraftStatus: 'reviewing')
  | 'finalizing';       // ç”¨æˆ·ç¡®è®¤ç”Ÿæˆè§†é¢‘ (å¯¹åº” DraftStatus: 'ready_for_render')
```

**çŠ¶æ€æ˜ å°„è¡¨ (UI Phase â†’ DraftStatus)**ï¼š

| çŠ¶æ€æœºèŠ‚ç‚¹ (6.4 å›¾) | UI Phase | DraftStatus (æŒä¹…åŒ–) | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| Idle | - | `idle` | åˆå§‹çŠ¶æ€ |
| Hydrating | `hydrating` | ä¿æŒåŸçŠ¶æ€ | æ¢å¤å®Œæˆåå›åˆ°åŸ DraftStatus |
| ScriptChecking | `script_checking` | `idle` | Topic æ¨¡å¼ç‰¹æœ‰ï¼Œè„šæœ¬æœªç¡®è®¤ä¸æŒä¹…åŒ– |
| Generating â†’ Scripting | - | `scripting` | N4 æ‰§è¡Œä¸­ |
| Storyboarding | - | `storyboarding` | N5 æ‰§è¡Œä¸­ |
| Reviewing | - | `reviewing` | åˆ†é•œå·²ç”Ÿæˆï¼Œç”¨æˆ·å®¡é˜… |
| Editing | `editing` | `reviewing` | ç”¨æˆ·ç¼–è¾‘åˆ†é•œï¼ŒDraftStatus ä¸å˜ |
| Finalizing | `finalizing` | `ready_for_render` | ç”¨æˆ·ç¡®è®¤ç”Ÿæˆè§†é¢‘ |
| (æ¸²æŸ“ä¸­) | - | `rendering` | T004 æ‰§è¡Œä¸­ |
| Done | - | `done` | è§†é¢‘æ¸²æŸ“å®Œæˆï¼Œç”¨æˆ·é¢„è§ˆ |
| Publishing | - | `publishing` | T005 æ‰§è¡Œä¸­ |
| Published | - | `published` | å‘å¸ƒæˆåŠŸ |

---

## ä¸ƒã€æ•°æ®è¾“å…¥è§„èŒƒ

### 7.1 ç”¨æˆ·è¾“å…¥æ•°æ® (AgentRequest)

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| `userId` | string | âœ… | ç”¨æˆ·å”¯ä¸€æ ‡è¯† | "user_001" |
| `sessionId` | string | âœ… | ä¼šè¯æ ‡è¯† | "sess_abc123" |
| `action` | enum | âœ… | 'create' \| 'update' \| 'load' | "create" |
| `payload` | object | âœ… | ä¸šåŠ¡è´Ÿè½½æ•°æ® (è§ä¸‹æ–¹ç±»å‹å®šä¹‰) | - |

**Payload ç±»å‹å®šä¹‰**ï¼š

```typescript
type AgentPayload = CreatePayload | UpdatePayload | LoadPayload;

interface CreatePayload {
  mode: 'auto' | 'topic' | 'custom';
  topic?: string;         // mode='topic' æ—¶å¿…å¡«
  customScript?: string;  // mode='custom' æ—¶å¿…å¡«
  style: string;          // 'minimal-tech' | 'storyteller' | 'edutainment'
  assets?: {              // mode='custom' æ—¶å¯é€‰
    startFrame?: string;  // èµ·å§‹å¸§æ–‡ä»¶å
    endFrame?: string;    // ç»“æŸå¸§æ–‡ä»¶å
  };
}

interface UpdatePayload {
  draftId: string;
  updates: Partial<Draft>;
}

interface LoadPayload {
  draftId: string;
}
```

**å¤–éƒ¨æ•°æ®æ³¨å…¥ (Props)**ï¼š

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| `scheduledTask` | `{ id: string; title: string; scriptDraft: string; date: string }` | âŒ | ä»æ’æœŸæ¨¡å—ä¼ å…¥çš„å½“æ—¥ä»»åŠ¡ |
| `competitorTrends` | `Array<{ id: string; topic: string; growth: string }>` | âŒ | ä»ç«å“åˆ†ææ¨¡å—ä¼ å…¥çš„çƒ­é—¨è¯é¢˜ |

### 7.2 å¤–éƒ¨æ•°æ®æº

| æ•°æ®æºID | åç§° | ç±»å‹ | è·å–æ–¹å¼ | è¯´æ˜ |
| :--- | :--- | :--- | :--- | :--- |
| **DS001** | Prompt æ¨¡æ¿åº“ | Constant/DB | æœ¬åœ°åŠ è½½ | å­˜å‚¨ T001/T002 éœ€ä½¿ç”¨çš„ System Prompts |
| **DS002** | ç”¨æˆ·åå¥½è®¾ç½® | JSON | LocalStorage | å­˜å‚¨ç”¨æˆ·å¸¸ç”¨çš„ Style æˆ–æ—¶é•¿åå¥½ |
| **DS003** | å†å²è‰ç¨¿åº“ | JSON | LocalStorage | `draft_` å‰ç¼€çš„æŒä¹…åŒ–æ•°æ® |

**æ•°æ®æºç»“æ„å®šä¹‰**ï¼š

```typescript
// DS001: Prompt æ¨¡æ¿åº“
interface PromptTemplate {
  id: string;
  toolId: 'T001' | 'T002';
  systemPrompt: string;
  userPromptTemplate: string;  // æ”¯æŒ {topic}, {style} ç­‰å˜é‡æ’å€¼
  version: string;
}

// DS002: ç”¨æˆ·åå¥½
interface UserPreferences {
  defaultStyle: string;
  defaultDuration: number;
  favoriteTopics: string[];
  autoSaveEnabled: boolean;
}

// DS003: LocalStorage Key è§„èŒƒ
const STORAGE_KEYS = {
  DRAFT_PREFIX: 'draft_',
  AUTOSAVE_KEY: 'videostudio_autosave',
  USER_PREFS: 'user_prefs_v1'
} as const;
```

### 7.3 Draft æ•°æ®æ¨¡å‹ (Context)

> **æ³¨æ„**ï¼šæ­¤ä¸º Draft çš„å”¯ä¸€æƒå¨å®šä¹‰ï¼Œç¬¬åä¸‰ç« è¾“å‡ºè§„èŒƒä¸­çš„ç¤ºä¾‹å¿…é¡»ç¬¦åˆæ­¤ Schemaã€‚

```typescript
interface Draft {
  id: string;                        // å”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼: d_{timestamp}
  mode: 'auto' | 'topic' | 'custom'; // åˆ›ä½œæ¨¡å¼
  content: string;                   // åŸå§‹è„šæœ¬å†…å®¹
  style: string;                     // è§†è§‰é£æ ¼: 'minimal-tech' | 'storyteller' | 'edutainment'
  assets?: {                         // è§†è§‰é”šç‚¹ (Custom æ¨¡å¼å¯é€‰)
    startFrame?: string;             // èµ·å§‹å¸§æ–‡ä»¶å
    endFrame?: string;               // ç»“æŸå¸§æ–‡ä»¶å
  };
  storyboard?: StoryboardScene[];    // ç”Ÿæˆçš„åˆ†é•œåˆ—è¡¨
  status: DraftStatus;               // è‰ç¨¿çŠ¶æ€ (è§ 6.4 èŠ‚çŠ¶æ€æšä¸¾)
  createdAt: number;                 // åˆ›å»ºæ—¶é—´ (Unix timestamp)
  updatedAt: number;                 // æœ€åæ›´æ–°æ—¶é—´ (Unix timestamp)
}
```

### 7.4 StoryboardScene æ•°æ®æ¨¡å‹

```typescript
interface StoryboardScene {
  id: string;                        // åœºæ™¯å”¯ä¸€æ ‡è¯† (UUID, æ ¼å¼: scene_{timestamp}_{random})
  order: number;                     // æ˜¾ç¤ºåºå· (ä» 1 å¼€å§‹, æ‹–æ‹½æ’åºæ—¶è‡ªåŠ¨é‡æ–°ç¼–å·)
  type: 'Hook' | 'Body' | 'CTA';    // åœºæ™¯ç±»å‹
  visualIntent: VisualIntent;        // è§†è§‰æ„å›¾
  desc: string;                      // ç”»é¢æè¿°æ–‡æœ¬
  duration: number;                  // æ—¶é•¿ (ç§’)
  thumbnail?: string;                // å¯é€‰: ç”Ÿæˆçš„å‚è€ƒå›¾ URL (Phase 2)
  audio?: string;                    // å¯é€‰: éŸ³é¢‘/æ—ç™½æ–‡æœ¬

  // IOM äº¤äº’æ§åˆ¶å­—æ®µ (v2.4 æ–°å¢)
  iomEnabled: boolean;               // AI ç”µå½±çº§æ¶¦è‰²å¼€å…³ (é»˜è®¤: true)
  cinematicPrompt?: string;          // IOM æ¶¦è‰²åçš„é•œå¤´è¯­è¨€ Prompt
                                     // iomEnabled=true æ—¶ç”±ç³»ç»Ÿç”Ÿæˆ
                                     // iomEnabled=false æ—¶ç­‰äº desc
}

type VisualIntent = 'Detail' | 'Impact' | 'Emotion' | 'Default';
```

> **å…³äº id ä¸ order çš„åŒºåˆ†**ï¼š
> - `id` æ˜¯ä¸å¯å˜çš„å”¯ä¸€æ ‡è¯†ï¼Œç”¨äº Scene Detail Sheet ç¼–è¾‘æ—¶å®šä½åœºæ™¯ã€React key æ¸²æŸ“ã€‚æ‹–æ‹½æ’åºä¸æ”¹å˜ idã€‚
> - `order` æ˜¯å¯å˜çš„æ˜¾ç¤ºåºå·ï¼Œæ‹–æ‹½æ’åºåè‡ªåŠ¨é‡æ–°ç¼–å· (1, 2, 3...)ã€‚UI ä¸Šæ˜¾ç¤ºçš„ "01 Â· 3s" ä½¿ç”¨ order å€¼ã€‚

**åœºæ™¯ç±»å‹è¯­ä¹‰**ï¼š

| ç±»å‹ | å«ä¹‰ | å…¸å‹æ—¶é•¿ | è§†è§‰ç‰¹å¾ |
| :--- | :--- | :--- | :--- |
| **Hook** | å¼€åœºé’©å­ (0-5s) | 3s | é«˜å†²å‡»åŠ›ï¼Œåå·®/æ‚¬å¿µ |
| **Body** | ä¸»ä½“å†…å®¹ (5-50s) | 4-10s | ä¿¡æ¯å¯†åº¦é«˜ï¼Œå¹²è´§å±•ç¤º |
| **CTA** | è¡ŒåŠ¨å·å¬ (50-60s) | 3-5s | æƒ…æ„Ÿé©±åŠ¨ï¼Œå¼•å¯¼äº’åŠ¨ |

---

## å…«ã€Tools & Skills è®¾è®¡

### 8.1 Tools åˆ—è¡¨

#### 8.1.1 Tool: `generate_script` (T001)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **Tool ID** | T001 |
| **åŠŸèƒ½æè¿°** | åŸºäºä¸»é¢˜å’Œé£æ ¼ç”Ÿæˆç»“æ„åŒ–è„šæœ¬ (Hook/Body/CTA) |
| **è¾“å…¥å‚æ•°** | `topic` (string), `style` (string) |
| **è¾“å‡ºæ ¼å¼** | JSON `{ hook: string, body: string, cta: string }` |
| **é”™è¯¯å¤„ç†** | è‹¥ç”Ÿæˆå¤±è´¥ï¼Œè¿”å›é»˜è®¤çš„ Fallback æ¨¡æ¿ |

#### 8.1.2 Tool: `synthesize_storyboard` (T002)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **Tool ID** | T002 |
| **åŠŸèƒ½æè¿°** | å°†æ–‡æœ¬è„šæœ¬æ‹†è§£ä¸ºåˆ†é•œåˆ—è¡¨ï¼Œè‡ªåŠ¨æ¨å¯¼ Visual Intent |
| **è¾“å…¥å‚æ•°** | `script` (object) |
| **è¾“å‡ºæ ¼å¼** | JSON Array `[{ id, order, type, visualIntent, description, duration }]` (è§ 7.4 èŠ‚ StoryboardScene) |
| **é”™è¯¯å¤„ç†** | è‹¥è§£æå¤±è´¥ï¼Œç”Ÿæˆå•åœºæ™¯é»˜è®¤åˆ†é•œ |

#### 8.1.3 Tool: `manage_draft` (T003)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **Tool ID** | T003 |
| **åŠŸèƒ½æè¿°** | è‰ç¨¿çš„ CRUD æ“ä½œ (LocalStorage Wrapper) |
| **è¾“å…¥å‚æ•°** | `action` ('save'\|'update'\|'load'\|'list'\|'delete'), `data` (Draft \| Partial\<Draft\>) |
| **è¾“å‡ºæ ¼å¼** | `Draft` object, `Draft[]` (list), or `string` (id) |

**Action è¡Œä¸ºå®šä¹‰**ï¼š

| Action | è¾“å…¥ | è¾“å‡º | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| `save` | `Omit<Draft, 'id' \| 'createdAt' \| 'updatedAt'>` | `Draft` (å«ç”Ÿæˆçš„ id) | åˆ›å»ºæ–°è‰ç¨¿ï¼Œè‡ªåŠ¨ç”Ÿæˆ id å’Œæ—¶é—´æˆ³ |
| `update` | `{ draftId: string, updates: Partial<Draft> }` | `Draft` (æ›´æ–°å) | æ›´æ–°ç°æœ‰è‰ç¨¿ï¼Œè‡ªåŠ¨æ›´æ–° `updatedAt` |
| `load` | `{ draftId: string }` | `Draft` | æŒ‰ ID åŠ è½½è‰ç¨¿ |
| `list` | æ—  | `Draft[]` | è¿”å›æ‰€æœ‰è‰ç¨¿åˆ—è¡¨ |
| `delete` | `{ draftId: string }` | `string` (è¢«åˆ é™¤çš„ id) | åˆ é™¤æŒ‡å®šè‰ç¨¿ |

> **S001 Skill ä¸­çš„çŠ¶æ€æ›´æ–°**ä½¿ç”¨ `update` actionï¼Œä¾‹å¦‚ï¼š`T003({ action: 'update', data: { draftId, updates: { status: 'rendering' } } })`

#### 8.1.4 Tool: `render_video` (T004)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **Tool ID** | T004 |
| **åŠŸèƒ½æè¿°** | å°†åˆ†é•œåºåˆ— + IOM Prompt æäº¤è‡³è§†é¢‘ç”ŸæˆæœåŠ¡ï¼Œå¼‚æ­¥æ¸²æŸ“è§†é¢‘ |
| **è¾“å…¥å‚æ•°** | `scenes` (StoryboardScene[]), `style` (string), `config` (RenderConfig) |
| **è¾“å‡ºæ ¼å¼** | `RenderJob` object (å« jobId, status, progress) |
| **é”™è¯¯å¤„ç†** | è¶…æ—¶ (>120s) è¿”å› ERR_004ï¼›æ¸²æŸ“å¤±è´¥è¿”å› ERR_005 å¹¶ä¿ç•™åˆ†é•œæ•°æ® |
| **ä¼˜å…ˆçº§** | Phase 1: Mock (è¿›åº¦æ¨¡æ‹Ÿ)ï¼›Phase 2: æ¥å…¥ Sora/Kling/Runway API |

**è¾“å…¥å¥‘çº¦**ï¼š

```typescript
interface RenderConfig {
  resolution: '1080x1920' | '1920x1080';  // ç«–å± 9:16 / æ¨ªå± 16:9
  fps: 24 | 30;
  quality: 'draft' | 'standard' | 'high';
  bgmStyle?: string;                       // Phase 2
}

interface RenderRequest {
  draftId: string;
  scenes: Array<{
    sceneId: string;              // StoryboardScene.id (UUID)
    order: number;                // StoryboardScene.order
    type: 'Hook' | 'Body' | 'CTA';
    prompt: string;           // æœ€ç»ˆ Prompt (cinematicPrompt æˆ– desc)
    duration: number;         // ç§’
    visualIntent: string;
    assets?: {                // Visual Anchor å¼•ç”¨
      referenceImage?: string;
    };
  }>;
  config: RenderConfig;
}
```

**StoryboardScene â†’ RenderRequest è½¬æ¢é€»è¾‘**ï¼š

> å‰ç«¯åœ¨è°ƒç”¨ T004 å‰ï¼Œå¿…é¡»æ‰§è¡Œä»¥ä¸‹è½¬æ¢ã€‚æ­¤é€»è¾‘åº”å°è£…ä¸ºç‹¬ç«‹å‡½æ•°ã€‚

```typescript
/**
 * å°† StoryboardScene[] è½¬æ¢ä¸º T004 æ‰€éœ€çš„ RenderRequest
 * è°ƒç”¨æ—¶æœºï¼šç”¨æˆ·ç‚¹å‡» "Generate Video" æ—¶
 * æ–‡ä»¶ä½ç½®ï¼šsrc/app/lib/render-utils.ts
 */
function buildRenderRequest(
  draft: Draft,
  config: RenderConfig
): RenderRequest {
  return {
    draftId: draft.id,
    scenes: draft.storyboard!
      .sort((a, b) => a.order - b.order)
      .map(scene => ({
        sceneId: scene.id,
        order: scene.order,
        type: scene.type,
        // æ ¸å¿ƒè½¬æ¢ï¼šæ ¹æ® IOM çŠ¶æ€é€‰æ‹© Prompt æ¥æº
        prompt: scene.iomEnabled && scene.cinematicPrompt
          ? scene.cinematicPrompt
          : scene.desc,
        duration: scene.duration,
        visualIntent: scene.visualIntent,
        assets: scene.type === 'Hook' && draft.assets?.startFrame
          ? { referenceImage: draft.assets.startFrame }
          : scene.type === 'CTA' && draft.assets?.endFrame
          ? { referenceImage: draft.assets.endFrame }
          : undefined,
      })),
    config,
  };
}
```

**è¾“å‡ºå¥‘çº¦**ï¼š

```typescript
interface RenderJob {
  jobId: string;              // æ¸²æŸ“ä»»åŠ¡ ID
  draftId: string;            // å…³è”çš„ Draft ID
  status: 'queued' | 'processing' | 'completed' | 'failed';
  progress: number;           // 0-100
  currentPhase: string;       // å½“å‰é˜¶æ®µæè¿°
  result?: {
    videoUrl: string;         // ç”Ÿæˆçš„è§†é¢‘ URL
    thumbnailUrl: string;     // å°é¢å›¾ URL
    duration: number;         // å®é™…æ—¶é•¿ (ç§’)
    fileSize: number;         // æ–‡ä»¶å¤§å° (bytes)
  };
  error?: {
    code: 'ERR_004' | 'ERR_005';
    message: string;
  };
  createdAt: number;
  updatedAt: number;
}
```

**æ¸²æŸ“é˜¶æ®µå®šä¹‰ (Progress Phases)**ï¼š

| è¿›åº¦èŒƒå›´ | é˜¶æ®µåç§° | æè¿° | å¯¹åº” UI æ–‡æ¡ˆ |
| :--- | :--- | :--- | :--- |
| 0-15% | `scene_analysis` | è§£æåˆ†é•œç»“æ„å’Œ Prompt | "æ­£åœ¨è§£æé£æ ¼..." |
| 15-40% | `hook_generation` | ç”Ÿæˆ Hook åœºæ™¯è§†é¢‘ç‰‡æ®µ | "æ­£åœ¨å¼ºåŒ– Hook..." |
| 40-70% | `body_generation` | ç”Ÿæˆ Body åœºæ™¯è§†é¢‘ç‰‡æ®µ | "æ­£åœ¨ç”Ÿæˆä¸»ä½“å†…å®¹..." |
| 70-85% | `audio_sync` | éŸ³é¢‘å¯¹é½å’Œ BGM æ··åˆ | "æ­£åœ¨å¯¹é½éŸ³é¢‘..." |
| 85-100% | `final_render` | æœ€ç»ˆåˆæˆå’Œç¼–ç  | "æœ€ç»ˆæ¸²æŸ“..." |

**Phase 1 Mock å®ç°**ï¼š

```typescript
async function mockRenderVideo(request: RenderRequest): Promise<RenderJob> {
  const jobId = `job_${Date.now()}`;
  const phases = [
    { progress: 15, phase: 'æ­£åœ¨è§£æé£æ ¼...', delay: 800 },
    { progress: 40, phase: 'æ­£åœ¨å¼ºåŒ– Hook...', delay: 1200 },
    { progress: 70, phase: 'æ­£åœ¨ç”Ÿæˆä¸»ä½“å†…å®¹...', delay: 1500 },
    { progress: 85, phase: 'æ­£åœ¨å¯¹é½éŸ³é¢‘...', delay: 800 },
    { progress: 100, phase: 'æœ€ç»ˆæ¸²æŸ“...', delay: 700 },
  ];

  // é€é˜¶æ®µæ¨è¿›è¿›åº¦ (é€šè¿‡ callback æˆ– state update)
  for (const p of phases) {
    await delay(p.delay);
    updateProgress(jobId, p.progress, p.phase);
  }

  return {
    jobId,
    draftId: request.draftId,
    status: 'completed',
    progress: 100,
    currentPhase: 'completed',
    result: {
      videoUrl: `https://mock.owlseer.ai/videos/${jobId}.mp4`,
      thumbnailUrl: `https://mock.owlseer.ai/thumbnails/${jobId}.jpg`,
      duration: request.scenes.reduce((sum, s) => sum + s.duration, 0),
      fileSize: 15_000_000, // 15MB mock
    },
    createdAt: Date.now(),
    updatedAt: Date.now(),
  };
}
```

**Phase 2 çœŸå® API é›†æˆ**ï¼š

```
POST /api/v1/render
Authorization: Bearer {api_key}
Content-Type: application/json

Body: RenderRequest

Response: RenderJob (status: 'queued')

---

GET /api/v1/render/{jobId}
â†’ è½®è¯¢è·å–æ¸²æŸ“è¿›åº¦

---

Webhook (å¯é€‰):
POST {callback_url}
Body: RenderJob (status: 'completed' | 'failed')
```

**è§†é¢‘ç”ŸæˆæœåŠ¡å¯¹æ¥çŸ©é˜µ (Phase 2)**ï¼š

| æœåŠ¡å•† | API ç±»å‹ | æ”¯æŒåˆ†è¾¨ç‡ | æœ€å¤§æ—¶é•¿ | ç‰¹ç‚¹ |
| :--- | :--- | :--- | :--- | :--- |
| **Sora (OpenAI)** | REST API | 1080p | 60s | æœ€é«˜è´¨é‡ï¼Œæˆæœ¬é«˜ |
| **Kling (å¿«æ‰‹)** | REST API | 1080p | 120s | ä¸­æ–‡åœºæ™¯ä¼˜åŒ– |
| **Runway Gen-3** | REST API | 4K | 16s/clip | è¿é•œæ§åˆ¶ç²¾ç»† |
| **Seedance 2.0** | REST API | 1080p | 10s/clip | èˆè¹ˆ/åŠ¨ä½œåœºæ™¯ |

> **é€‰å‹å»ºè®®**ï¼šMVP é˜¶æ®µä½¿ç”¨ Mockï¼ŒPhase 2 ä¼˜å…ˆæ¥å…¥ Kling (ä¸­æ–‡åœºæ™¯ä¼˜åŒ– + æˆæœ¬å¯æ§)ï¼Œé«˜ç«¯ç”¨æˆ·å¯é€‰ Soraã€‚

---

#### 8.1.5 Tool: `publish_video` (T005)

| å±æ€§ | æè¿° |
| :--- | :--- |
| **Tool ID** | T005 |
| **åŠŸèƒ½æè¿°** | å°†æ¸²æŸ“å®Œæˆçš„è§†é¢‘å‘å¸ƒåˆ° TikTok æˆ–å…¶ä»–å¹³å° |
| **è¾“å…¥å‚æ•°** | `videoUrl` (string), `metadata` (PublishMetadata) |
| **è¾“å‡ºæ ¼å¼** | `PublishResult` object |
| **é”™è¯¯å¤„ç†** | è®¤è¯å¤±è´¥è¿”å› ERR_006ï¼›ä¸Šä¼ å¤±è´¥è¿”å› ERR_007 |
| **ä¼˜å…ˆçº§** | Phase 1: Mock (æ¨¡æ‹Ÿ 2s å»¶è¿Ÿ)ï¼›Phase 2: æ¥å…¥ TikTok Content Posting API |

**è¾“å…¥å¥‘çº¦**ï¼š

```typescript
interface PublishMetadata {
  title: string;              // è§†é¢‘æ ‡é¢˜
  description: string;        // è§†é¢‘æè¿°
  hashtags: string[];         // è¯é¢˜æ ‡ç­¾
  platform: 'tiktok' | 'youtube_shorts' | 'instagram_reels';
    // Phase 1: ä»…æ”¯æŒ 'tiktok'
    // Phase 2: æ‰©å±•æ”¯æŒ youtube_shorts / instagram_reels
  publishMode: 'draft' | 'public' | 'private';
  scheduledTime?: Date;       // å®šæ—¶å‘å¸ƒ (Phase 2)
}

interface PublishRequest {
  draftId: string;
  videoUrl: string;           // æ¥è‡ª T004 çš„æ¸²æŸ“ç»“æœ
  thumbnailUrl?: string;
  metadata: PublishMetadata;
}
```

**è¾“å‡ºå¥‘çº¦**ï¼š

```typescript
interface PublishResult {
  publishId: string;
  platform: string;
  status: 'uploading' | 'processing' | 'published' | 'failed';
  postUrl?: string;           // å‘å¸ƒæˆåŠŸåçš„è§†é¢‘é“¾æ¥
  postId?: string;            // å¹³å°è§†é¢‘ ID
  error?: {
    code: 'ERR_006' | 'ERR_007';
    message: string;
  };
}
```

**TikTok Content Posting API é›†æˆ (Phase 2)**ï¼š

```
1. è·å– OAuth Token
   POST https://open.tiktokapis.com/v2/oauth/token/

2. åˆå§‹åŒ–ä¸Šä¼ 
   POST https://open.tiktokapis.com/v2/post/publish/inbox/video/init/
   Headers: Authorization: Bearer {access_token}
   Body: {
     "post_info": {
       "title": "{title}",
       "privacy_level": "SELF_ONLY",  // å…ˆå‘åˆ°è‰ç¨¿ç®±
       "disable_duet": false,
       "disable_comment": false,
       "disable_stitch": false
     },
     "source_info": {
       "source": "FILE_UPLOAD",
       "video_size": {fileSize}
     }
   }

3. ä¸Šä¼ è§†é¢‘æ–‡ä»¶
   PUT {upload_url}
   Content-Type: video/mp4
   Body: {video_binary}

4. ç¡®è®¤å‘å¸ƒ
   POST https://open.tiktokapis.com/v2/post/publish/status/fetch/
   Body: { "publish_id": "{publish_id}" }
```

**Phase 1 Mock å®ç°**ï¼š

```typescript
async function mockPublishVideo(request: PublishRequest): Promise<PublishResult> {
  await delay(2000); // æ¨¡æ‹Ÿ 2s ä¸Šä¼ å»¶è¿Ÿ
  return {
    publishId: `pub_${Date.now()}`,
    platform: request.metadata.platform,
    status: 'published',
    postUrl: `https://www.tiktok.com/@user/video/${Date.now()}`,
    postId: String(Date.now()),
  };
}
```

---

#### 8.1.6 å®Œæ•´è§†é¢‘ç”Ÿæˆ API æµæ°´çº¿

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant FE as å‰ç«¯ (Editor)
    participant T004 as T004 render_video
    participant VS as è§†é¢‘ç”ŸæˆæœåŠ¡
    participant T005 as T005 publish_video
    participant TK as TikTok API

    U->>FE: ç‚¹å‡» "Generate Video"
    FE->>FE: æ”¶é›† scenes + cinematicPrompts
    FE->>T004: RenderRequest
    
    rect rgb(240, 248, 255)
        Note over T004,VS: Phase 1: Mock / Phase 2: çœŸå® API
        T004->>VS: POST /api/v1/render
        loop è½®è¯¢è¿›åº¦
            FE->>T004: GET /api/v1/render/{jobId}
            T004-->>FE: RenderJob (progress: 0-100%)
            FE->>FE: æ›´æ–°è¿›åº¦æ¡ UI
        end
        VS-->>T004: RenderJob (status: completed)
    end
    
    T004-->>FE: videoUrl + thumbnailUrl
    FE->>FE: å±•ç¤ºè§†é¢‘é¢„è§ˆ + é¢„æµ‹è¡¨ç°
    
    U->>FE: ç‚¹å‡» "Publish"
    FE->>T005: PublishRequest
    
    rect rgb(255, 248, 240)
        Note over T005,TK: Phase 1: Mock / Phase 2: TikTok API
        T005->>TK: OAuth + Upload + Publish
        TK-->>T005: postUrl
    end
    
    T005-->>FE: PublishResult (postUrl)
    FE->>FE: æŒ‰é’®å˜ä¸º "View Live Post â†—"
```

**ç«¯åˆ°ç«¯æ•°æ®æµ**ï¼š

```
ç”¨æˆ·è¾“å…¥ (text/assets)
    â†“ saveDraft()
Draft (localStorage)
    â†“ T001 generate_script
Script (Hook/Body/CTA)
    â†“ T002 synthesize_storyboard
StoryboardScene[] (6 scenes)
    â†“ IOM Engine (generateCinematicPrompt)
StoryboardScene[] + cinematicPrompt
    â†“ ç”¨æˆ·å®¡é˜…/ç¼–è¾‘ (Scene Detail Sheet)
Final StoryboardScene[]
    â†“ T004 render_video
RenderJob â†’ videoUrl
    â†“ ç”¨æˆ·é¢„è§ˆ + é¢„æµ‹è¡¨ç°
Video Preview
    â†“ T005 publish_video
PublishResult â†’ postUrl (TikTok)
    â†“ AttributionAgent (Phase 2)
æ•ˆæœå½’å›  â†’ åé¦ˆå¾ªç¯
```

---

### 8.2 Skills åˆ—è¡¨

#### 8.2.1 Skill: `Full Video Creation` (S001)

*   **åŠŸèƒ½æè¿°**ï¼šä¸€é”®å¼è§†é¢‘åˆ›ä½œèƒ½åŠ›ï¼Œè¦†ç›–ä»è„šæœ¬åˆ°å‘å¸ƒçš„å®Œæ•´é“¾è·¯ã€‚
*   **ç¼–æ’é€»è¾‘**ï¼š
    1.  è°ƒç”¨ T001 ç”Ÿæˆè„šæœ¬ (Hook/Body/CTA)ã€‚
    2.  è°ƒç”¨ T002 ç”Ÿæˆåˆ†é•œ (StoryboardScene[])ã€‚
    3.  è°ƒç”¨ IOM Engine (`batchGenerateCinematicPrompts`) ä¸ºæ¯ä¸ªåœºæ™¯ç”Ÿæˆ cinematicPromptã€‚
    4.  è°ƒç”¨ T003 (`save`) ä¿å­˜ Draft (å«åˆ†é•œå’Œ Prompt)ï¼Œstatus è®¾ä¸º `reviewing`ã€‚
    5.  **[ç”¨æˆ·å®¡é˜…]** â€” ç”¨æˆ·é€šè¿‡ Scene Detail Sheet è°ƒæ•´åˆ†é•œã€‚
    6.  è°ƒç”¨ T003 (`update`) æ›´æ–° Draft çŠ¶æ€ (`reviewing` â†’ `rendering`)ï¼Œè°ƒç”¨ T004 æäº¤è§†é¢‘æ¸²æŸ“ (å¼‚æ­¥)ã€‚
    7.  æ¸²æŸ“å®Œæˆåï¼Œè°ƒç”¨ T003 (`update`) æ›´æ–° Draft çŠ¶æ€ (`rendering` â†’ `done`)ã€‚
    8.  **[ç”¨æˆ·ç¡®è®¤]** â€” ç”¨æˆ·é¢„è§ˆè§†é¢‘å’Œé¢„æµ‹è¡¨ç°ã€‚
    9.  è°ƒç”¨ T003 (`update`) æ›´æ–° Draft çŠ¶æ€ (`done` â†’ `publishing`)ï¼Œè°ƒç”¨ T005 å‘å¸ƒåˆ° TikTok (å¼‚æ­¥)ã€‚
    10. å‘å¸ƒæˆåŠŸåï¼Œè°ƒç”¨ T003 (`update`) æ›´æ–° Draft çŠ¶æ€ (`publishing` â†’ `published`)ã€‚

*   **Phase 1 (MVP) èŒƒå›´**ï¼šæ­¥éª¤ 1-7 ä½¿ç”¨ Mock æ•°æ®ï¼Œæ­¥éª¤ 8-10 ä½¿ç”¨æ¨¡æ‹Ÿå‘å¸ƒã€‚
*   **Phase 2 èŒƒå›´**ï¼šæ¥å…¥çœŸå® LLM (T001/T002)ã€è§†é¢‘ç”ŸæˆæœåŠ¡ (T004)ã€TikTok API (T005)ã€‚

---

## ä¹ã€æ ¸å¿ƒæ¡ˆä¾‹åˆ†æ

> æœ¬ç« é€šè¿‡ 3 ä¸ªçœŸå®æ¡ˆä¾‹å‘å¼€å‘å›¢é˜Ÿè§£é‡Šå…³é”®è®¾è®¡å†³ç­–çš„ **"Why"**ï¼Œè¡¥å……åŠŸèƒ½è®¾è®¡çš„ä¸Šä¸‹æ–‡ã€‚

### 9.1 Case A: æ‹¯æ•‘"å¹»è§‰" â€” è·¨å¢ƒå–å®¶çš„é¦–å¸§æ§åˆ¶

**é—®é¢˜èƒŒæ™¯**ï¼š
ç”¨æˆ·åé¦ˆ V1.0 ç‰ˆæœ¬ç”Ÿæˆçš„è§†é¢‘ä¸­ï¼ŒAI ç»å¸¸æŠŠ"æŠ˜å å±æ‰‹æœº"ç”Ÿæˆä¸º"ç¿»ç›–æ‰‹æœº"ï¼Œå¯¼è‡´è¯„è®ºåŒºå…¨æ˜¯å˜²è®½ã€‚è¿™æ˜¯å…¸å‹çš„ **AI è§†è§‰å¹»è§‰ (Visual Hallucination)** é—®é¢˜ã€‚

**V2.0 è§£å†³æ–¹æ¡ˆ**ï¼šCustom Mode + è§†è§‰é”šç‚¹ (Visual Anchor)

**äº¤äº’æµ**ï¼š
1.  ç”¨æˆ·åœ¨ Custom é¡µä¸Šä¼ ä¸€å¼ "æŠ˜å å±å±•å¼€çŠ¶æ€"çš„é«˜æ¸…å›¾ä½œä¸º **Start Frame**ã€‚
2.  ç‚¹å‡»ç”Ÿæˆã€‚
3.  ç³»ç»Ÿå¼ºåˆ¶é”å®šç¬¬ä¸€å¼ åˆ†é•œä¸ºè¯¥å›¾ç‰‡ï¼Œä»…å¯¹åç»­åˆ†é•œè¿›è¡Œè¯­ä¹‰åŒ–ç”Ÿæˆã€‚

**ä»·å€¼**ï¼šå°†"ä¸å¯æ§çš„ AI"å˜æˆäº†"å¯æ§çš„ PPT å¢å¼ºç‰ˆ"ï¼Œé€€è´§ç‡/å·®è¯„ç‡é™ä½ 80%ã€‚

**å¯¹åº”åŠŸèƒ½**ï¼š`Draft.assets.startFrame` (7.3 èŠ‚)ã€Custom æ¨¡å¼ Visual Anchors (F-03, 4.1 èŠ‚)

### 9.2 Case B: æ‹’ç»"ç­‰å¾…ç„¦è™‘" â€” è¯­ä¹‰åŒ–å¡ç‰‡çš„èƒœåˆ©

**é—®é¢˜èƒŒæ™¯**ï¼š
ç”¨æˆ·æµ‹è¯•æ˜¾ç¤ºï¼Œåœ¨ V1.8 ä¹‹å‰ï¼Œç”¨æˆ·ç‚¹å‡»ç”Ÿæˆåéœ€è¦ç­‰å¾… 25 ç§’ï¼ŒæœŸé—´ 40% çš„ç”¨æˆ·ä¼šåˆ‡å‡ºæµè§ˆå™¨å»å¹²åˆ«çš„ï¼Œå¯¼è‡´æµå¤±ã€‚

**V2.0 è§£å†³æ–¹æ¡ˆ**ï¼šSemantic Concept Cards (è¯­ä¹‰åŒ–å¡ç‰‡)

**äº¤äº’æµ**ï¼š
1.  ç‚¹å‡»ç”Ÿæˆï¼Œé¡µé¢åœ¨ 0.5 ç§’å†…è·³è½¬åˆ° `/editor`ã€‚
2.  å±å¹•ç¬é—´è¢« **æ©™(Hook) / ç°è“(Body) / ç¿ ç»¿(CTA)** çš„è¯­ä¹‰åŒ–è‰²å—å¡«æ»¡ã€‚
3.  ç”¨æˆ·ç«‹åˆ»å¼€å§‹é˜…è¯»è„šæœ¬ï¼Œæ­¤æ—¶å¤§è„‘è¢«"é˜…è¯»ä»»åŠ¡"å æ®ï¼Œå®Œå…¨æ²¡æœ‰"ç­‰å¾…æ„Ÿ"ã€‚

**ä»·å€¼**ï¼šå°† TTI (Time to Interactive) ä» 25s å¤§å¹…é™ä½ã€‚ç”¨æˆ·åœ¨è„šæœ¬ç»“æ„åŠ è½½åå³å¯å¼€å§‹å®¡é˜…ï¼Œæ¶ˆé™¤ç­‰å¾…ç„¦è™‘ã€‚

**å¯¹åº”åŠŸèƒ½**ï¼šè¯­ä¹‰åŒ–å¡ç‰‡ç¼–è¾‘å™¨ (F-04, 4.2 èŠ‚)ã€`StoryboardScene.type` é©±åŠ¨çš„è¯­ä¹‰åŒ–é…è‰² (7.4 èŠ‚)

### 9.3 Case C: æ‰“é€š"æœ€åä¸€å…¬é‡Œ" â€” ç›´æ¥å‘å¸ƒçš„é—­ç¯

**é—®é¢˜èƒŒæ™¯**ï¼š
ä»¥å‰ç”¨æˆ·ç”Ÿæˆè§†é¢‘åï¼Œéœ€è¦ï¼š`ä¸‹è½½ MP4` â†’ `æ‰“å¼€æ‰‹æœº` â†’ `ä¼ åˆ°æ‰‹æœº` â†’ `æ‰“å¼€ TikTok` â†’ `ä¸Šä¼ ` â†’ `å¡«æ ‡é¢˜`ã€‚é“¾è·¯å¤ªé•¿ï¼ŒæŸè€—å·¨å¤§ã€‚

**V2.0 è§£å†³æ–¹æ¡ˆ**ï¼šPublish First (å‘å¸ƒä¼˜å…ˆ)

**äº¤äº’æµ**ï¼š
1.  åœ¨ `/editor` é¡µé¢ï¼ŒPrimary Button ä¸å†æ˜¯"ä¿å­˜"ï¼Œè€Œæ˜¯ç»¿è‰²çš„ **"Publish to TikTok"**ã€‚
2.  ç‚¹å‡»åï¼Œé€šè¿‡ Server-Side API ç›´æ¥æ¨æµã€‚
3.  æˆåŠŸåæŒ‰é’®å˜ä¸ºé»‘è‰² "View Post"ã€‚

**ä»·å€¼**ï¼šå°† 6 æ­¥æ“ä½œç¼©å‡ä¸º 1 æ­¥ã€‚å¯¹äº MCN æœºæ„ï¼ˆEmilyï¼‰æ¥è¯´ï¼Œè¿™æ„å‘³ç€æ¯å¤©èŠ‚çœ 2 å°æ—¶å·¥æ—¶ã€‚

**å¯¹åº”åŠŸèƒ½**ï¼šç›´æ¥å‘å¸ƒé—­ç¯ (F-05, 4.2 èŠ‚)ã€T005 publish_video (8.1.5 èŠ‚)ã€`publishStatus` çŠ¶æ€ç®¡ç†

---

## åã€ç”¨æˆ·äº¤äº’æµç¨‹

### 10.1 äº¤äº’åŸå‹å›¾

#### 10.1.1 è¾“å…¥é˜¶æ®µ (Input View)

**é€šç”¨å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] OwlSeer Studio V1.5          TOKEN: 8,492 / 10,000 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  > Phase 1: TOKEN æ˜¾ç¤ºä¸ºé™æ€å ä½ "-- / --"ï¼Œä¸å±•ç¤ºå…·ä½“æ•°å­—ã€‚  â”‚
â”‚  > Phase 2: æ¥å…¥çœŸå® LLM åæ˜¾ç¤ºå®é™… Token æ¶ˆè€—é‡ã€‚            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ Auto âœ¨ ]  [ Topic ğŸ’¬ ]  [ Custom âœï¸ ]                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€ æ¨¡å¼å†…å®¹åŒº (è§ä¸‹æ–¹å„æ¨¡å¼è¯¦æƒ…) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Auto æ¨¡å¼**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… Today's Plan (æ’æœŸä»»åŠ¡å¡ç‰‡ï¼Œä»…å½“ scheduledTask å­˜åœ¨æ—¶)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [æ ‡é¢˜] iPhone 15 Review     [æ—¥æœŸ] 2026-02-11          â”‚â”‚
â”‚  â”‚ [è„šæœ¬æ‘˜è¦...]                                          â”‚â”‚
â”‚  â”‚ [ âš¡ Execute Script ]                                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ è¾“å…¥æ¡† + Prompt æ¨¡æ¿è½®æ’­ [Hook First] [ğŸ”„ Shuffle]     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  [Switch to Custom â†—]                    [ ğŸª„ Auto-Draft ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Topic æ¨¡å¼ (è¾“å…¥é˜¶æ®µ)**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Topic / Keyword                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ e.g., iPhone 16 Pro Review, Summer Sale 2026            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  ğŸ“Š Competitor Intelligence (ç«å“æƒ…æŠ¥èŠ¯ç‰‡)                   â”‚
â”‚  [ AI News +32% ] [ iPhone Tips +28% ] [ Remote Work +15% ]â”‚
â”‚                                                             â”‚
â”‚  [Switch to Custom â†—]                [ ğŸ“„ Generate Script ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Topic æ¨¡å¼ (Script Checkpoint é˜¶æ®µ)**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Script Checkpoint          Please verify before visualizingâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HOOK    åˆ«å†ä¹° iPhone 15 äº†ï¼Œé™¤éä½ çŸ¥é“è¿™ä¸‰ç‚¹...            â”‚
â”‚  BODY    ç¬¬ä¸€ç‚¹... ç¬¬äºŒç‚¹... ç¬¬ä¸‰ç‚¹...                       â”‚
â”‚  CTA     å…³æ³¨æˆ‘ï¼Œå°‘èŠ±å†¤æ‰é’±ã€‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ Modify Request ]              [ Confirm & Visualize â†’ ]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Custom æ¨¡å¼**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¦–å¸§ + å°¾å¸§ (å¯é€‰)                    è¾“å…¥ä½ çš„åˆ›ä½œæè¿°       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  +  â”‚ â”‚  +  â”‚  â”‚  ä¾‹å¦‚ï¼šä¸€ä¸ª3Då½¢è±¡çš„å°ç”·å­©...           â”‚ â”‚
â”‚  â”‚é¦–å¸§ â”‚ â”‚å°¾å¸§ â”‚  â”‚                                     0 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  [ è§†é¢‘ç”Ÿæˆ â–¾ ] [ Seedance 2.0 â–¾ ] [ é¦–å°¾å¸§ â–¾ ] [ 16:9 â–¾ ] [ 5s â–¾ ]   âœ¨30  [ â¬† ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 10.1.2 ç»“æœå±•ç¤ºé˜¶æ®µ (Editor View)

**Storyboard é˜¶æ®µ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† Back]  [Topic Mode] [9:16] [Lo-Fi BGM]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Grid View (2-4 åˆ—è‡ªé€‚åº”):                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚âš¡ HOOK [âœ¨]â”‚ â”‚ğŸ“¦ BODY [âœ¨]â”‚ â”‚ğŸ“¦ BODY [âœ¨]â”‚ â”‚ğŸ“¦ BODY [âœ¨]â”‚        â”‚
â”‚  â”‚ 01 Â· 3s  â”‚ â”‚ 02 Â· 5s  â”‚ â”‚ 03 Â· 4s  â”‚ â”‚ 04 Â· 5s  â”‚        â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚        â”‚
â”‚  â”‚ [å›¾æ ‡]   â”‚ â”‚ [å›¾æ ‡]   â”‚ â”‚ [å›¾æ ‡]   â”‚ â”‚ [å›¾æ ‡]   â”‚        â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚        â”‚
â”‚  â”‚ ç”»é¢æè¿° â”‚ â”‚ ç”»é¢æè¿° â”‚ â”‚ ç”»é¢æè¿° â”‚ â”‚ ç”»é¢æè¿° â”‚        â”‚
â”‚  â”‚[Gen Img] â”‚ â”‚[Gen Img] â”‚ â”‚[Gen Img] â”‚ â”‚[Gen Img] â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  âœ¨ = Magic Wand (ç¿ ç»¿=IOM ON, ç°è‰²=IOM OFF)                â”‚
â”‚  ç‚¹å‡»å¡ç‰‡æˆ– âœ¨ â†’ æ‰“å¼€ Scene Detail Sheet (F-06)              â”‚
â”‚                                                             â”‚
â”‚              [ âœ¨ Generate Video ]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Generating é˜¶æ®µ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­£åœ¨å¼ºåŒ– Hook...                                    45%    â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚
â”‚                                                             â”‚
â”‚  (åˆ†é•œç½‘æ ¼æ¨¡ç³ŠåŒ–æ˜¾ç¤º)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Done é˜¶æ®µ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† Back]  [Topic Mode] [9:16] [Lo-Fi BGM]                 â”‚
â”‚                                    [ğŸ“¤ Publish] [â¬‡ Export]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  â”‚  â”‚ Video Details                    â”‚ â”‚
â”‚  â”‚   9:16 è§†é¢‘é¢„è§ˆ   â”‚  â”‚ Duration: 24s                    â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ Scenes: 6                        â”‚ â”‚
â”‚  â”‚   [â–¶ æ’­æ”¾æŒ‰é’®]   â”‚  â”‚ Resolution: 1080Ã—1920            â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ Format: 9:16 Vertical            â”‚ â”‚
â”‚  â”‚  [Minimal Tech]  â”‚  â”‚ BGM: Lo-Fi Chill                 â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚ Style: Minimal Tech              â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€ 00:24      â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Predicted Performance            â”‚ â”‚
â”‚                        â”‚ Retention (3s): 78% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘   â”‚ â”‚
â”‚                        â”‚ Est. Views: 8.5K   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘   â”‚ â”‚
â”‚                        â”‚ Viral Score: 82    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘   â”‚ â”‚
â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                        â”‚ [ğŸ”„ Back to Storyboard]          â”‚ â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åä¸€ã€Agent å†…éƒ¨å¤„ç†é€»è¾‘

### 11.1 å¼‚å¸¸å¤„ç†ç­–ç•¥

| é”™è¯¯ç  | é”™è¯¯ç±»å‹ | è§¦å‘åœºæ™¯ | å¤„ç†é€»è¾‘ |
| :--- | :--- | :--- | :--- |
| **ERR_001** | InputInvalid | ç”¨æˆ·æœªè¾“å…¥ Topic | N1 èŠ‚ç‚¹æ‹¦æˆªï¼ŒUI æ˜¾ç¤ºçº¢è‰²æç¤ºï¼Œä¸è§¦å‘åç»­æµç¨‹ |
| **ERR_002** | GenerationFail | T001 è°ƒç”¨è¶…æ—¶ (>30s) | N4 èŠ‚ç‚¹æ•è·ï¼Œè¿”å› Fallback æ¨¡æ¿ï¼Œå¹¶æ ‡è®° Warning |
| **ERR_003** | StorageQuota | LocalStorage æ»¡ | T003 æ•è·ï¼Œæç¤ºç”¨æˆ·æ¸…ç†å†å²è‰ç¨¿ï¼Œä»…ä¿ç•™å½“å‰ä¼šè¯ |
| **ERR_004** | RenderTimeout | T004 è§†é¢‘æ¸²æŸ“è¶…æ—¶ (>120s) | ä¿ç•™åˆ†é•œæ•°æ®ï¼Œæç¤ºç”¨æˆ·é‡è¯•æˆ–é™ä½ç”»è´¨ |
| **ERR_005** | RenderFail | è§†é¢‘ç”ŸæˆæœåŠ¡è¿”å›é”™è¯¯ | ä¿ç•™åˆ†é•œæ•°æ®ï¼Œå±•ç¤ºé”™è¯¯è¯¦æƒ…ï¼Œæ”¯æŒé‡è¯• |
| **ERR_006** | PublishAuthFail | TikTok OAuth è®¤è¯å¤±è´¥ | å¼•å¯¼ç”¨æˆ·é‡æ–°æˆæƒï¼Œä¸å½±å“å·²ç”Ÿæˆè§†é¢‘ |
| **ERR_007** | PublishUploadFail | è§†é¢‘ä¸Šä¼ åˆ°å¹³å°å¤±è´¥ | ä¿ç•™è§†é¢‘æ–‡ä»¶ï¼Œæ”¯æŒé‡è¯•å‘å¸ƒ |
| **ERR_008** | InvalidFileFormat | Visual Anchor æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ | æç¤ºæ”¯æŒçš„æ ¼å¼ (JPG/PNG/WebP)ï¼Œä¸é˜»å¡å…¶ä»–è¾“å…¥ |

**é”™è¯¯å“åº”æ•°æ®ç»“æ„**ï¼š

```typescript
interface AgentError {
  code: 'ERR_001' | 'ERR_002' | 'ERR_003' | 'ERR_004' | 'ERR_005' | 'ERR_006' | 'ERR_007' | 'ERR_008';
  message: string;       // äººç±»å¯è¯»çš„é”™è¯¯æè¿°
  nodeId: string;        // æŠ›å‡ºé”™è¯¯çš„èŠ‚ç‚¹ ID (N1/N4/T003)
  recoverable: boolean;  // æ˜¯å¦å¯æ¢å¤
  fallbackData?: any;    // ERR_002 æ—¶è¿”å›çš„ Fallback æ¨¡æ¿
}
```

**Fallback æ¨¡æ¿ç¤ºä¾‹ (ERR_002)**ï¼š
```json
{
  "hook": "ä»Šå¤©åˆ†äº«ä¸€ä¸ªæœ‰è¶£çš„è¯é¢˜...",
  "body": "è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹...",
  "cta": "å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤šå†…å®¹ã€‚"
}
```

### 11.2 è‡ªåŠ¨ä¿å­˜æœºåˆ¶ (Auto-save)

Agent é‡‡ç”¨ **"Dirty Check + Debounce"** ç­–ç•¥ï¼š
1.  ç›‘å¬ `InputMode`, `DraftContent` å˜åŒ–ã€‚
2.  å˜åŒ–å‘ç”Ÿåï¼Œæ ‡è®° `isDirty = true`ã€‚
3.  500ms æ— æ–°å˜åŒ–ï¼Œè§¦å‘ T003 (Save) æ“ä½œã€‚
4.  é¡µé¢åˆ·æ–°/é‡å¼€æ—¶ï¼ŒN2 èŠ‚ç‚¹ä¼˜å…ˆè¯»å– LocalStorage æ¢å¤ `isDirty` çš„æ•°æ®ã€‚

---

## åäºŒã€Prompt å·¥ç¨‹è§„èŒƒ

### 12.1 è„šæœ¬ç”Ÿæˆ Prompt (T001)

```markdown
Role: TikTok çˆ†æ¬¾è„šæœ¬å†™æ‰‹
Task: æ ¹æ®ä¸»é¢˜ "{topic}" ç”Ÿæˆä¸€æ®µ 60s çŸ­è§†é¢‘è„šæœ¬ã€‚
Format: JSON
Requirements:
1. Hook (0-5s): å¿…é¡»åŒ…å«åå·®æˆ–æ‚¬å¿µã€‚
2. Body (5-50s): åˆ† 3 ä¸ªè¦ç‚¹é˜è¿°ï¼Œå¹²è´§ä¸ºä¸»ã€‚
3. CTA (50-60s): å¼•å¯¼å…³æ³¨æˆ–è¯„è®ºã€‚

Output Example:
{
  "hook": "åˆ«å†ä¹° iPhone 15 äº†ï¼Œé™¤éä½ çŸ¥é“è¿™ä¸‰ç‚¹...",
  "body": "ç¬¬ä¸€ç‚¹... ç¬¬äºŒç‚¹... ç¬¬ä¸‰ç‚¹...",
  "cta": "å…³æ³¨æˆ‘ï¼Œå°‘èŠ±å†¤æ‰é’±ã€‚"
}
```

### 12.2 åˆ†é•œæ‹†è§£ Prompt (T002)

```markdown
Role: è§†é¢‘åˆ†é•œå¸ˆ
Task: å°†ä»¥ä¸‹è„šæœ¬æ‹†è§£ä¸º 5-8 ä¸ªåˆ†é•œåœºæ™¯ã€‚
Input: "{script_text}"
Output Format: Array of Objects (å­—æ®µå‘½åç»Ÿä¸€ä½¿ç”¨ camelCase)
{
  "id": "scene_{timestamp}_{random}",
  "order": åœºæ™¯åºå·,
  "type": "Hook" | "Body" | "CTA",
  "visualIntent": "Detail" | "Impact" | "Emotion" | "Default",
  "desc": "ç”»é¢æè¿°",
  "duration": ç§’æ•°
}
```

---

## åä¸‰ã€è¾“å‡ºç»“æœè§„èŒƒ

### 13.1 æœ€ç»ˆäº¤ä»˜ç‰© (Draft Artifact)

Agent æœ€ç»ˆè¾“å‡ºçš„ Draft å¯¹è±¡éœ€æ»¡è¶³ç¬¬ 7.3 èŠ‚å®šä¹‰çš„ Schemaã€‚ä»¥ä¸‹ä¸ºå®Œæ•´ç¤ºä¾‹ï¼š

```json
{
  "id": "d_1707033600000",
  "mode": "topic",
  "content": "iPhone 15 Pro Review",
  "style": "minimal-tech",
  "assets": null,
  "storyboard": [
    {
      "id": "scene_1707033600001_a1b2",
      "order": 1,
      "type": "Hook",
      "visualIntent": "Impact",
      "desc": "Close-up of the iPhone 15 Pro Titanium frame, catching the light.",
      "duration": 3,
      "audio": "Don't buy this yet...",
      "iomEnabled": true,
      "cinematicPrompt": "Cinematic impact shot, wide shot, dramatic lighting, high contrast, Close-up of the iPhone 15 Pro Titanium frame, catching the light., professional lighting, high fidelity, 4k"
    },
    {
      "id": "scene_1707033600002_c3d4",
      "order": 2,
      "type": "Body",
      "visualIntent": "Detail",
      "desc": "Split screen comparison with iPhone 14 Pro. Zoom into the bezel difference.",
      "duration": 5,
      "iomEnabled": true
    },
    {
      "id": "scene_1707033600003_e5f6",
      "order": 3,
      "type": "Body",
      "visualIntent": "Impact",
      "desc": "Action button demo: Fast cuts of setting timer, flashlight, camera.",
      "duration": 4,
      "iomEnabled": true
    },
    {
      "id": "scene_1707033600004_g7h8",
      "order": 4,
      "type": "Body",
      "visualIntent": "Detail",
      "desc": "Camera test: Side-by-side photo comparison in low light conditions.",
      "duration": 5,
      "iomEnabled": true
    },
    {
      "id": "scene_1707033600005_i9j0",
      "order": 5,
      "type": "Body",
      "visualIntent": "Default",
      "desc": "Battery life test montage: Morning to night usage with timer overlay.",
      "duration": 4,
      "iomEnabled": true
    },
    {
      "id": "scene_1707033600006_k1l2",
      "order": 6,
      "type": "CTA",
      "visualIntent": "Emotion",
      "desc": "Creator holding phone, asking 'Worth the upgrade?' Text overlay: SUBSCRIBE.",
      "duration": 3,
      "iomEnabled": true
    }
  ],
  "status": "done",
  "createdAt": 1707033600000,
  "updatedAt": 1707033660000
}
```

### 13.2 é¢„æµ‹è¡¨ç°æ•°æ® (Predicted Performance)

Done é˜¶æ®µå±•ç¤ºçš„é¢„æµ‹æ•°æ®ç»“æ„ï¼š

```typescript
interface PredictedPerformance {
  retention3s: number;    // 3 ç§’ç•™å­˜ç‡ (0-100%)
  estimatedViews: string; // é¢„ä¼°æ’­æ”¾é‡ (å¦‚ "8.5K")
  viralScore: number;     // çˆ†æ¬¾åˆ† (0-100)
}
```

**Phase 1 Mock è®¡ç®—å…¬å¼**ï¼š

> Phase 1 ä½¿ç”¨åŸºäºåˆ†é•œè´¨é‡ä¿¡å·çš„å¯å‘å¼å…¬å¼ï¼Œç¡®ä¿æ•°æ®æœ‰å‚è€ƒæ„ä¹‰è€Œééšæœºå€¼ã€‚
> ç”¨æˆ·åº”è¢«å‘ŠçŸ¥è¿™æ˜¯é¢„ä¼°å€¼ï¼Œä»…ä¾›å‚è€ƒã€‚

```typescript
function calculateMockPerformance(scenes: StoryboardScene[]): PredictedPerformance {
  const totalScenes = scenes.length;
  const iomEnabledRatio = scenes.filter(s => s.iomEnabled).length / totalScenes;
  const hasHook = scenes.some(s => s.type === 'Hook');
  const hasCTA = scenes.some(s => s.type === 'CTA');
  const totalDuration = scenes.reduce((sum, s) => sum + s.duration, 0);

  // åŸºç¡€åˆ† = 50ï¼ŒIOM å¯ç”¨ç‡åŠ åˆ† (æœ€å¤š +20)ï¼Œç»“æ„å®Œæ•´æ€§åŠ åˆ† (æœ€å¤š +15)
  let baseScore = 50;
  baseScore += Math.round(iomEnabledRatio * 20);
  if (hasHook) baseScore += 8;
  if (hasCTA) baseScore += 7;
  // æ—¶é•¿åœ¨ 15-45s ä¹‹é—´ä¸ºæœ€ä½³åŒºé—´
  if (totalDuration >= 15 && totalDuration <= 45) baseScore += 5;

  const viralScore = Math.min(100, Math.max(0, baseScore));
  const retention3s = Math.min(100, 60 + Math.round(iomEnabledRatio * 25) + (hasHook ? 10 : 0));
  const viewsBase = viralScore * 100;
  const estimatedViews = viewsBase >= 1000
    ? `${(viewsBase / 1000).toFixed(1)}K`
    : String(viewsBase);

  return { retention3s, estimatedViews, viralScore };
}
```

> **UI å±•ç¤ºè¦æ±‚**ï¼šåœ¨é¢„æµ‹è¡¨ç°é¢æ¿åº•éƒ¨æ˜¾ç¤ºç°è‰²å°å­— "é¢„ä¼°æ•°æ®ä»…ä¾›å‚è€ƒï¼ŒåŸºäºå†…å®¹ç»“æ„åˆ†æ"ã€‚
> **Phase 2 å‡çº§**ï¼šæ¥å…¥çœŸå®é¢„æµ‹æ¨¡å‹ï¼ŒåŸºäºå†å²æ•°æ®å’Œå¹³å°ç®—æ³•ç‰¹å¾è®¡ç®—ã€‚

---

## åå››ã€æŠ€æœ¯å®ç°ä¸éåŠŸèƒ½æ€§éœ€æ±‚

### 14.1 æŠ€æœ¯å®ç°è¦æ±‚

1.  **å‰ç«¯è¿è¡Œæ—¶**ï¼šåŸºäº React 18 + TypeScript æ„å»º Agent å®¿ä¸»ç¯å¢ƒã€‚
2.  **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨ React Context æˆ– Zustand ç®¡ç† Agent çš„ Node çŠ¶æ€æµè½¬ã€‚
3.  **è·¯ç”±è§£è€¦**ï¼šAgent ç»„ä»¶ (`VideoStudioInput`, `VideoStudioEditor`) å¿…é¡»é€šè¿‡ `onNavigate` å›è°ƒä¸å®¿ä¸»åº”ç”¨é€šä¿¡ï¼Œä¸¥ç¦ç¡¬ç¼–ç  `react-router` ä¾èµ–ã€‚ç»„ä»¶ import ä¸­ä¸åº”åŒ…å« `react-router-dom`ã€‚
4.  **Mock æ•°æ®**ï¼šåœ¨ Phase 1 é˜¶æ®µï¼ŒT001/T002 ä½¿ç”¨æœ¬åœ° Mock æ•°æ®ï¼Œä½†æ¥å£å®šä¹‰éœ€æ”¯æŒæœªæ¥æ— ç¼åˆ‡æ¢è‡³çœŸå® LLM APIã€‚
5.  **è‡ªåŠ¨ä¿å­˜**ï¼šä½¿ç”¨ Debounce (500ms) ç­–ç•¥ï¼Œé¿å…é¢‘ç¹å†™å…¥ LocalStorageã€‚
6.  **ç»„ä»¶ Props è®¾è®¡**ï¼š`VideoStudioInput` éœ€æ¥å— `scheduledTask` å’Œ `competitorTrends` ä½œä¸ºå¯é€‰ Propsï¼Œå®ç°ä¸æ’æœŸ/ç«å“æ¨¡å—çš„æ¾è€¦åˆé›†æˆã€‚
7.  **æ ·å¼æ–¹æ¡ˆ**ï¼šä½¿ç”¨ Tailwind CSSï¼Œåœºæ™¯å¡ç‰‡æŒ‰ type (Hook/Body/CTA) ä½¿ç”¨è¯­ä¹‰åŒ–é…è‰²ã€‚

### 14.2 éåŠŸèƒ½æ€§éœ€æ±‚ï¼šä¿¡ä»»æ¡¥æ¥ (Trust Bridging)

> é‰´äºæˆ‘ä»¬çš„ç”¨æˆ·æ¶µç›–äº†"å°ç™½"(Sarah) å’Œ"ä¸“å®¶"(Alex)ï¼Œç³»ç»Ÿå¿…é¡»åœ¨æ‰€æœ‰è‡ªåŠ¨åŒ–ç¯èŠ‚æä¾› **"é€ƒç”Ÿèˆ± (Escape Hatch)"**ã€‚

**åŸåˆ™ï¼šAI å¯ä»¥é¢†èˆªï¼Œä½†æ–¹å‘ç›˜å¿…é¡»éšæ—¶èƒ½äº¤å›åˆ°ç”¨æˆ·æ‰‹ä¸­ã€‚**

| æ¨¡å¼ | é€ƒç”Ÿèˆ±æœºåˆ¶ | å¯¹åº”ç”¨æˆ· | å®ç°è¦æ±‚ |
| :--- | :--- | :--- | :--- |
| **Auto Mode** | Shuffle æŒ‰é’®ï¼ˆæ¢ä¸€ä¸ªçµæ„Ÿï¼‰ | Sarah | ç‚¹å‡»åè½®æ¢ Prompt æ¨¡æ¿ï¼Œä¸è§¦å‘ç”Ÿæˆ |
| **Topic Mode** | Script Checkpointï¼ˆç¡®è®¤å¤§çº²ï¼‰ | Ben | è„šæœ¬ç”Ÿæˆåå¿…é¡»ç»è¿‡ç”¨æˆ·ç¡®è®¤æ‰èƒ½è¿›å…¥åˆ†é•œåˆæˆ |
| **Custom Mode** | Visual Anchorï¼ˆé”šå®šé¦–å¸§ï¼‰ | Alex | ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å¼ºåˆ¶é”å®šä¸ºç¬¬ä¸€å¼ åˆ†é•œ |
| **Editor Mode** | æ‰‹åŠ¨ä¿®æ”¹æ–‡å­— + IOM å¼€å…³ | All | æ‰€æœ‰åˆ†é•œå¡ç‰‡æ”¯æŒç‚¹å‡»ç¼–è¾‘ï¼›Scene Detail Sheet æ”¯æŒå…³é—­ AI æ¶¦è‰² |
| **Done Mode** | Back to Storyboard | All | ç”¨æˆ·å¯ä»¥ä»å®ŒæˆçŠ¶æ€è¿”å›åˆ†é•œç¼–è¾‘ |

**éªŒæ”¶æ ‡å‡†**ï¼š
*   æ¯ä¸ªè‡ªåŠ¨åŒ–æ­¥éª¤éƒ½å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªç”¨æˆ·å¯æ§çš„å›é€€/ä¿®æ”¹å…¥å£ã€‚
*   ä»»ä½•è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹éƒ½ä¸åº”åœ¨æœªç»ç”¨æˆ·ç¡®è®¤çš„æƒ…å†µä¸‹ç›´æ¥å‘å¸ƒã€‚
*   é€ƒç”Ÿèˆ±æ“ä½œä¸åº”å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼ˆå·²ç”Ÿæˆçš„å†…å®¹éœ€ä¿ç•™ï¼‰ã€‚

---

## åäº”ã€æµ‹è¯•éªŒæ”¶æ ‡å‡†

### 15.1 æ ¸å¿ƒæµç¨‹æµ‹è¯• (Gherkin)

```gherkin
Feature: è§†é¢‘åˆ›ä½œ Agent æ ¸å¿ƒæµç¨‹

  Scenario: è¯é¢˜æ¨¡å¼ç”Ÿæˆåˆ†é•œ (å« Script Checkpoint)
    Given Agent å¤„äº "Idle" çŠ¶æ€
    When ç”¨æˆ·é€‰æ‹© "Topic" æ¨¡å¼å¹¶è¾“å…¥ "AI News"
    And ç”¨æˆ·è§¦å‘ "Generate"
    Then è¿›å…¥ Script Checkpoint é˜¶æ®µ
    And å±•ç¤º Hook/Body/CTA è„šæœ¬é¢„è§ˆ
    When ç”¨æˆ·ç‚¹å‡» "Confirm & Visualize"
    Then Agent çŠ¶æ€è½¬å˜ä¸º "Generating"
    And T001 å·¥å…·è¢«è°ƒç”¨
    And T002 å·¥å…·è¢«è°ƒç”¨
    And æœ€ç»ˆè¾“å‡º Draft åº”åŒ…å«è‡³å°‘ 3 ä¸ªåˆ†é•œåœºæ™¯
    And Agent çŠ¶æ€è½¬å˜ä¸º "Reviewing"

  Scenario: å¼‚å¸¸è¾“å…¥æ‹¦æˆª
    Given Agent å¤„äº "Idle" çŠ¶æ€
    When ç”¨æˆ·é€‰æ‹© "Topic" æ¨¡å¼ä½†è¾“å…¥ä¸ºç©º
    And ç”¨æˆ·è§¦å‘ "Generate"
    Then N1 èŠ‚ç‚¹åº”è¿”å› "InputInvalid" é”™è¯¯
    And Agent çŠ¶æ€ä¿æŒ "Idle"

  Scenario: Auto æ¨¡å¼æ‰§è¡Œæ’æœŸä»»åŠ¡
    Given Agent å¤„äº "Idle" çŠ¶æ€
    And scheduledTask æ•°æ®å·²æ³¨å…¥
    When ç”¨æˆ·ç‚¹å‡» "Execute Script"
    Then åˆ›å»ºæ–° Draft å¹¶è·³è½¬åˆ° Editor é¡µé¢
    And Draft.content ç­‰äº scheduledTask.scriptDraft

  Scenario: Custom æ¨¡å¼å«è§†è§‰é”šç‚¹
    Given Agent å¤„äº "Idle" çŠ¶æ€
    When ç”¨æˆ·é€‰æ‹© "Custom" æ¨¡å¼
    And ç”¨æˆ·ç²˜è´´è„šæœ¬å†…å®¹
    And ç”¨æˆ·ä¸Šä¼  Start Frame å›¾ç‰‡
    And ç”¨æˆ·é€‰æ‹© "Minimal Tech" é£æ ¼
    And ç”¨æˆ·è§¦å‘ "Generate Storyboard"
    Then Draft.assets.startFrame åº”åŒ…å«æ–‡ä»¶å
    And è·³è½¬åˆ° Editor é¡µé¢

  Scenario: ç«å“è¯é¢˜å¿«æ·å¡«å…¥
    Given Agent å¤„äº "Idle" çŠ¶æ€
    And competitorTrends æ•°æ®å·²æ³¨å…¥
    When ç”¨æˆ·é€‰æ‹© "Topic" æ¨¡å¼
    And ç”¨æˆ·ç‚¹å‡»ç«å“è¯é¢˜èŠ¯ç‰‡ "AI News"
    Then Topic è¾“å…¥æ¡†è‡ªåŠ¨å¡«å…¥ "AI News"
    And è¿›å…¥ Script Checkpoint é˜¶æ®µ

  Scenario: è§†é¢‘ç”Ÿæˆä¸å‘å¸ƒæµç¨‹
    Given Agent å¤„äº "Reviewing" çŠ¶æ€ (åˆ†é•œå·²ç”Ÿæˆ)
    When ç”¨æˆ·ç‚¹å‡» "Generate Video"
    Then è¿›åº¦æ¡ä» 0% æ¨è¿›åˆ° 100%
    And è¿›åº¦æ–‡æ¡ˆä¾æ¬¡æ˜¾ç¤º "æ­£åœ¨è§£æé£æ ¼..." â†’ "æ­£åœ¨å¼ºåŒ– Hook..." â†’ "æ­£åœ¨å¯¹é½éŸ³é¢‘..." â†’ "æœ€ç»ˆæ¸²æŸ“..."
    And Agent çŠ¶æ€è½¬å˜ä¸º "Done"
    When ç”¨æˆ·ç‚¹å‡» "Publish"
    Then æŒ‰é’®çŠ¶æ€å˜ä¸º "Uploading..."
    And æœ€ç»ˆå˜ä¸º "View Live"

  Scenario: è‰ç¨¿è‡ªåŠ¨ä¿å­˜ä¸æ¢å¤
    Given ç”¨æˆ·åœ¨ Topic æ¨¡å¼è¾“å…¥äº† "AI News"
    When ç”¨æˆ·åˆ·æ–°é¡µé¢
    Then Agent ä» LocalStorage æ¢å¤ä¸Šä¸‹æ–‡
    And Topic è¾“å…¥æ¡†æ˜¾ç¤º "AI News"
    And é€‰ä¸­çš„é£æ ¼ä¿æŒä¸å˜

  Scenario: æ•°æ®å¥‘çº¦éªŒè¯
    Given Agent ç”Ÿæˆäº†å®Œæ•´çš„ Draft
    Then Draft å¯¹è±¡å¿…é¡»åŒ…å« id, mode, content, style, status, createdAt, updatedAt
    And storyboard ä¸­æ¯ä¸ª scene å¿…é¡»åŒ…å« id (string UUID), order (number), type, visualIntent, desc, duration, iomEnabled
    And type å€¼å¿…é¡»ä¸º 'Hook' | 'Body' | 'CTA'
    And visualIntent å€¼å¿…é¡»ä¸º 'Detail' | 'Impact' | 'Emotion' | 'Default'
    And iomEnabled é»˜è®¤å€¼ä¸º true
    And status å€¼å¿…é¡»ä¸º DraftStatus æšä¸¾ä¸­çš„åˆæ³•å€¼

  Scenario: IOM å¼€å…³ â€” å¼€å¯æ¶¦è‰² (F-06)
    Given Agent å¤„äº "Reviewing" çŠ¶æ€ (åˆ†é•œå·²ç”Ÿæˆ)
    And æŸåœºæ™¯çš„ iomEnabled ä¸º true
    When ç”¨æˆ·ç‚¹å‡»è¯¥åœºæ™¯å¡ç‰‡çš„ Magic Wand (âœ¨) æŒ‰é’®
    Then æ‰“å¼€ Scene Detail Sheet
    And IOM Toggle æ˜¾ç¤ºä¸º ON (ç¿ ç»¿è‰²)
    And Final Prompt Preview æ˜¾ç¤ºæ¶¦è‰²åçš„ cinematicPrompt
    And Final Prompt Preview ä¸ºåªè¯»çŠ¶æ€

  Scenario: IOM å¼€å…³ â€” å…³é—­æ¶¦è‰² (F-06)
    Given Scene Detail Sheet å·²æ‰“å¼€
    And IOM Toggle å½“å‰ä¸º ON
    When ç”¨æˆ·å°† IOM Toggle åˆ‡æ¢ä¸º OFF
    Then Final Prompt Preview å˜ä¸ºå¯ç¼–è¾‘çŠ¶æ€
    And Final Prompt Preview å†…å®¹å˜ä¸º Raw Description çš„åŸå§‹æ–‡æœ¬
    When ç”¨æˆ·ç‚¹å‡» "Save Changes"
    Then è¯¥åœºæ™¯çš„ iomEnabled æ›´æ–°ä¸º false
    And è¯¥åœºæ™¯çš„ cinematicPrompt ç­‰äº desc
    And å¡ç‰‡ä¸Šçš„ Magic Wand å›¾æ ‡å˜ä¸ºç°è‰²

  Scenario: Visual Intent åˆ‡æ¢ (F-06)
    Given Scene Detail Sheet å·²æ‰“å¼€
    And IOM Toggle ä¸º ON
    When ç”¨æˆ·å°† Visual Intent ä» "Impact" åˆ‡æ¢ä¸º "Detail"
    Then Final Prompt Preview å®æ—¶æ›´æ–°ï¼ŒåŒ…å« "detail" å…³é”®è¯
    When ç”¨æˆ·ç‚¹å‡» "Save Changes"
    Then è¯¥åœºæ™¯çš„ visualIntent æ›´æ–°ä¸º "Detail"

  Scenario: Raw Description ç¼–è¾‘ (F-06)
    Given Scene Detail Sheet å·²æ‰“å¼€
    When ç”¨æˆ·ä¿®æ”¹ Raw Description ä¸º "Woman unboxing a product"
    And IOM Toggle ä¸º ON
    Then Final Prompt Preview å®æ—¶æ›´æ–°ï¼ŒåŒ…å«æ–°çš„æè¿°æ–‡æœ¬
    When ç”¨æˆ·ç‚¹å‡» "Save Changes"
    Then è¯¥åœºæ™¯çš„ desc æ›´æ–°ä¸º "Woman unboxing a product"
    And cinematicPrompt åŸºäºæ–° desc é‡æ–°ç”Ÿæˆ

  Scenario: è§†é¢‘æ¸²æŸ“æµç¨‹ (T004)
    Given Agent å¤„äº "Reviewing" çŠ¶æ€ (åˆ†é•œå·²ç”Ÿæˆ)
    And æ‰€æœ‰åœºæ™¯çš„ cinematicPrompt å·²ç”Ÿæˆ
    When ç”¨æˆ·ç‚¹å‡» "Generate Video"
    Then T004 render_video è¢«è°ƒç”¨
    And è¿›åº¦æ¡ä» 0% æ¨è¿›åˆ° 100%
    And è¿›åº¦æ–‡æ¡ˆä¾æ¬¡æ˜¾ç¤º "æ­£åœ¨è§£æé£æ ¼..." â†’ "æ­£åœ¨å¼ºåŒ– Hook..." â†’ "æ­£åœ¨ç”Ÿæˆä¸»ä½“å†…å®¹..." â†’ "æ­£åœ¨å¯¹é½éŸ³é¢‘..." â†’ "æœ€ç»ˆæ¸²æŸ“..."
    And Agent çŠ¶æ€è½¬å˜ä¸º "Done"
    And è§†é¢‘é¢„è§ˆåŒºåŸŸæ˜¾ç¤º 9:16 ç«–å±æ’­æ”¾å™¨

  Scenario: è§†é¢‘æ¸²æŸ“å¤±è´¥é‡è¯• (ERR_005)
    Given Agent å¤„äº "Reviewing" çŠ¶æ€
    When ç”¨æˆ·ç‚¹å‡» "Generate Video"
    And T004 è¿”å› ERR_005 (æ¸²æŸ“å¤±è´¥)
    Then è¿›åº¦æ¡åœæ­¢
    And æ˜¾ç¤ºé”™è¯¯æç¤º "è§†é¢‘ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•"
    And æä¾› "é‡è¯•" æŒ‰é’®
    And åˆ†é•œæ•°æ®ä¿æŒä¸å˜ (ä¸ä¸¢å¤±)
    When ç”¨æˆ·ç‚¹å‡» "é‡è¯•"
    Then é‡æ–°è°ƒç”¨ T004

  Scenario: å‘å¸ƒå¤±è´¥å¤„ç† (ERR_007)
    Given Agent å¤„äº "Done" çŠ¶æ€ (è§†é¢‘å·²ç”Ÿæˆ)
    When ç”¨æˆ·ç‚¹å‡» "Publish"
    And T005 è¿”å› ERR_007 (ä¸Šä¼ å¤±è´¥)
    Then æŒ‰é’®æ¢å¤ä¸º "Publish" çŠ¶æ€
    And æ˜¾ç¤ºé”™è¯¯æç¤º "å‘å¸ƒå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•"
    And è§†é¢‘æ–‡ä»¶ä¿æŒå¯ç”¨

  Scenario: æ‹–æ‹½æ’åºåˆ†é•œ (Drag & Drop)
    Given Agent å¤„äº "Reviewing" çŠ¶æ€ (åˆ†é•œå·²ç”Ÿæˆ)
    And åˆ†é•œ order é¡ºåºä¸º [Hook(1), Body1(2), Body2(3), Body3(4), Body4(5), CTA(6)]
    When ç”¨æˆ·å°† Body2 æ‹–æ‹½åˆ° Body1 å‰é¢
    Then åˆ†é•œ order é¡ºåºå˜ä¸º [Hook(1), Body2(2), Body1(3), Body3(4), Body4(5), CTA(6)]
    And å„åœºæ™¯çš„ id (UUID) ä¿æŒä¸å˜
    And order å€¼è‡ªåŠ¨é‡æ–°ç¼–å·

  Scenario: Visual Anchor æ–‡ä»¶æ ¼å¼æ ¡éªŒ (ERR_008)
    Given Agent å¤„äº "Idle" çŠ¶æ€
    And ç”¨æˆ·é€‰æ‹© "Custom" æ¨¡å¼
    When ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ª .gif æ–‡ä»¶ä½œä¸ºé¦–å¸§
    Then æ˜¾ç¤ºé”™è¯¯æç¤º "ä»…æ”¯æŒ JPG/PNG/WebP æ ¼å¼"
    And ä¸Šä¼ åŒºåŸŸæ¢å¤ä¸ºç©ºçŠ¶æ€
```

---

## åå…­ã€åŒæ¨¡å‹æ ¡éªŒæŠ¥å‘Š

> **æ ¡éªŒæ—¥æœŸ**ï¼š2026-02-13  
> **æ ¡éªŒæ–¹æ³•**ï¼šåŒæ¨¡å‹ç‹¬ç«‹åˆ†æ + äº¤å‰éªŒè¯  
> **æ ¡éªŒçŠ¶æ€**ï¼šâœ… æ‰€æœ‰ CRITICAL é—®é¢˜å·²ä¿®å¤ï¼ŒMVP å°±ç»ª

### 16.1 æ ¡éªŒæ–¹æ³•è®º

æœ¬æ¬¡æ ¡éªŒé‡‡ç”¨ **åŒæ¨¡å‹ç‹¬ç«‹åˆ†æ** æ–¹æ³•ï¼Œç¡®ä¿å‘ç°çš„é—®é¢˜å…·æœ‰é«˜å¯ä¿¡åº¦ï¼š

| æ¨¡å‹ | åˆ†æè§’åº¦ | å…³æ³¨ç‚¹ |
| :--- | :--- | :--- |
| **æ¨¡å‹ 1** | å†…éƒ¨ä¸€è‡´æ€§åˆ†æ | æ•°æ®ç»“æ„ä¸€è‡´æ€§ã€é€»è¾‘çŸ›ç›¾ã€æŠ€æœ¯å¯è¡Œæ€§ã€ç¼ºå¤±ä¿¡æ¯ |
| **æ¨¡å‹ 2** | å¤–éƒ¨å¯¹é½åˆ†æ | ç”¨æˆ·æ—…ç¨‹å¯¹é½ã€æ•°æ®æµå®Œæ•´æ€§ã€API å¥‘çº¦ã€æµ‹è¯•è¦†ç›– |

**éªŒè¯åŸåˆ™**ï¼šåªæœ‰ä¸¤ä¸ªæ¨¡å‹éƒ½è¯†åˆ«å‡ºçš„é—®é¢˜æ‰è¢«æ ‡è®°ä¸º CRITICALï¼Œç¡®ä¿é›¶è¯¯æŠ¥ã€‚

---

### 16.2 é—®é¢˜æ±‡æ€»

| ä¸¥é‡çº§åˆ« | æ•°é‡ | çŠ¶æ€ | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| ğŸ”´ CRITICAL | 7 | âœ… å·²ä¿®å¤ | é˜»å¡ MVP çš„é—®é¢˜ |
| âš ï¸ WARNING | 12 | ğŸ“‹ å·²è®°å½• | åº”åœ¨ Phase 2 ä¿®å¤çš„è´¨é‡é—®é¢˜ |
| ğŸ’¡ SUGGESTION | 8 | ğŸ“‹ å·²è®°å½• | æœªæ¥å¢å¼ºå»ºè®® |

---

### 16.3 CRITICAL é—®é¢˜è¯¦æƒ…ä¸ä¿®å¤

#### C1: Draft æ•°æ®æ¨¡å‹ç¼ºå¤±å¿…éœ€å­—æ®µ âœ…

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 7.3 èŠ‚å®šä¹‰ `Draft.status` å’Œ `Draft.updatedAt` å­—æ®µ
- å®é™…å®ç° `draft-service.ts` ç¼ºå¤±è¿™ä¸¤ä¸ªå­—æ®µ
- å¯¼è‡´çŠ¶æ€æœº (6.4 èŠ‚) æ— æ³•è¿è¡Œï¼Œè‡ªåŠ¨ä¿å­˜æ— æ³•è¿½è¸ªæ›´æ–°æ—¶é—´

**å½±å“èŒƒå›´**ï¼š
- çŠ¶æ€æœºæµè½¬é€»è¾‘
- æµ‹è¯•åœºæ™¯ (15.1 èŠ‚) å¼•ç”¨çš„çŠ¶æ€è½¬æ¢
- è‡ªåŠ¨ä¿å­˜æœºåˆ¶ (11.2 èŠ‚)

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// draft-service.ts æ–°å¢å†…å®¹
export type DraftStatus =
  | 'idle' | 'scripting' | 'storyboarding' | 'reviewing'
  | 'ready_for_render' | 'rendering' | 'done' | 'publishing' | 'published';

export interface Draft {
  // ... åŸæœ‰å­—æ®µ
  status: DraftStatus;      // âœ… æ–°å¢
  updatedAt: number;        // âœ… æ–°å¢
}
```

**éªŒè¯æ–¹æ³•**ï¼š
- TypeScript ç¼–è¯‘é€šè¿‡
- æµ‹è¯•åœºæ™¯ "æ•°æ®å¥‘çº¦éªŒè¯" é€šè¿‡
- Draft å¯¹è±¡åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ

---

#### C2: Router ä¾èµ–è¿åæ¶æ„åŸåˆ™ âœ…

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 14.1 èŠ‚æ˜ç¡®è¦æ±‚ï¼š"ç»„ä»¶ import ä¸­ä¸åº”åŒ…å« `react-router-dom`"
- `VideoStudioEditor.tsx` å’Œ `VideoStudioInput.tsx` å‡å¯¼å…¥ router hooks
- è¿åè§£è€¦åŸåˆ™ï¼Œç»„ä»¶æ— æ³•åœ¨é Router ç¯å¢ƒä¸­ä½¿ç”¨

**å½±å“èŒƒå›´**ï¼š
- ç»„ä»¶å¯å¤ç”¨æ€§
- æ¶æ„åˆè§„æ€§
- æœªæ¥é›†æˆå…¶ä»–è·¯ç”±æ–¹æ¡ˆçš„çµæ´»æ€§

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// ç§»é™¤å‰
import { useNavigate, useParams } from 'react-router-dom';

// ç§»é™¤å
// å®Œå…¨ä¾èµ– onNavigate prop
const handleNavigate = (path: string) => {
  if (onNavigate) {
    onNavigate(path);
  } else {
    console.warn('Navigation not handled: onNavigate prop missing');
  }
};
```

**éªŒè¯æ–¹æ³•**ï¼š
- ç»„ä»¶å¯åœ¨é Router ç¯å¢ƒä¸­æ¸²æŸ“
- é€šè¿‡ `onNavigate` prop æ­£ç¡®è§¦å‘å¯¼èˆª
- æ—  router ç›¸å…³ import è¯­å¥

---

#### C3: DraftStatus ç±»å‹æœªå®šä¹‰ âœ…

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 6.4 èŠ‚æè¿°çŠ¶æ€æœºçš„ 7 ä¸ªçŠ¶æ€å€¼
- PRD ç¬¬ 7.3 èŠ‚ä½¿ç”¨ `status: DraftStatus` ä½†æœªå®šä¹‰ç±»å‹
- å¯¼è‡´ TypeScript ç¼–è¯‘å¤±è´¥

**å½±å“èŒƒå›´**ï¼š
- TypeScript ç±»å‹æ£€æŸ¥
- çŠ¶æ€æœºé€»è¾‘å®ç°
- Draft æ¥å£å®Œæ•´æ€§

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
åœ¨ `draft-service.ts` ä¸­æ–°å¢ç±»å‹å®šä¹‰ (è§ C1)

**éªŒè¯æ–¹æ³•**ï¼š
- TypeScript ç¼–è¯‘æ— é”™è¯¯
- çŠ¶æ€æšä¸¾å€¼ä¸ PRD 6.4 èŠ‚ä¸€è‡´
- Draft æ¥å£ç±»å‹å®Œæ•´

---

#### C4: Visual Intent "Default" é€‰é¡¹ç¼ºå¤± âœ…

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 7.4 èŠ‚å®šä¹‰ `visualIntent: 'Detail' | 'Impact' | 'Emotion' | 'Default'`
- `SceneDetailSheet.tsx` ä»…æ˜¾ç¤º 3 ä¸ªé€‰é¡¹ (Detail/Impact/Emotion)
- å¯¼è‡´ `visualIntent: 'Default'` çš„åœºæ™¯æ— æ³•ç¼–è¾‘

**å½±å“èŒƒå›´**ï¼š
- Scene Detail Sheet UI
- Mock æ•°æ®ä¸­ä½¿ç”¨ 'Default' çš„åœºæ™¯
- ç”¨æˆ·æ— æ³•é€‰æ‹© "Balanced" é£æ ¼

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// SceneDetailSheet.tsx æ–°å¢é€‰é¡¹
{
  value: 'Default',
  label: 'Balanced',
  description: 'Standard composition with balanced framing.',
  icon: Grid3x3,
  activeBg: 'bg-slate-50',
}
```

åŒæ—¶æ›´æ–°ç½‘æ ¼å¸ƒå±€ï¼š
```typescript
// ä» grid-cols-1 md:grid-cols-3 æ”¹ä¸º
<div className="grid grid-cols-2 md:grid-cols-4 gap-3">
```

**éªŒè¯æ–¹æ³•**ï¼š
- Scene Detail Sheet æ˜¾ç¤º 4 ä¸ªé€‰é¡¹
- å¯é€‰æ‹© "Default" å¹¶ä¿å­˜
- ç½‘æ ¼å¸ƒå±€åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å‡æ­£å¸¸æ˜¾ç¤º

---

#### C5: IOM ç¼–è¾‘è¡Œä¸ºä¸ä¸€è‡´ âœ…

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 4.2 èŠ‚ F-06 è§„å®šï¼š"IOM ON æ—¶ä¸ºåªè¯»ï¼ŒIOM OFF æ—¶å¯ç¼–è¾‘"
- å®é™…å®ç°å…è®¸ IOM ON æ—¶ç¼–è¾‘ Prompt
- ç”¨æˆ·ä½“éªŒä¸ä¸€è‡´ï¼Œè¿å PRD è§„èŒƒ

**å½±å“èŒƒå›´**ï¼š
- Scene Detail Sheet äº¤äº’é€»è¾‘
- IOM å·¥ä½œæµä¸€è‡´æ€§
- æµ‹è¯•åœºæ™¯ "IOM å¼€å…³ â€” å¼€å¯æ¶¦è‰²" (15.1 èŠ‚)

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// SceneDetailSheet.tsx ä¿®æ”¹
<Textarea
  value={localScene.iomEnabled ? (localScene.cinematicPrompt || '') : localScene.desc}
  readOnly={localScene.iomEnabled}  // âœ… æ–°å¢
  onChange={(e) => {
    if (localScene.iomEnabled) {
      return;  // âœ… IOM ON æ—¶ç¦æ­¢ç¼–è¾‘
    } else {
      handleDescChange(e.target.value);
    }
  }}
  className={`... ${localScene.iomEnabled ? 'cursor-not-allowed' : ''}`}  // âœ… æ–°å¢
/>
```

**éªŒè¯æ–¹æ³•**ï¼š
- IOM ON æ—¶ Textarea æ˜¾ç¤ºç°è‰²ä¸”æ— æ³•ç¼–è¾‘
- IOM OFF æ—¶ Textarea å¯æ­£å¸¸ç¼–è¾‘
- æµ‹è¯•åœºæ™¯ "IOM å¼€å…³ â€” å¼€å¯æ¶¦è‰²" é€šè¿‡

---

#### C6: Visual Anchor æœªå®ç° âš ï¸ (éƒ¨åˆ†ä¿®å¤)

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 3.4 èŠ‚ (Alex ç”¨æˆ·æ—…ç¨‹) æ‰¿è¯ºï¼š"ç¬¬ä¸€å¼  Hook å¡ç‰‡æ˜¾ç¤ºçš„æ˜¯ä»–åˆšåˆšä¸Šä¼ çš„äº§å“å›¾"
- PRD ç¬¬ 9.1 èŠ‚ (Case A) æè¿° Visual Anchor è§£å†³ AI å¹»è§‰é—®é¢˜
- å®é™…å®ç°ä»…ä½¿ç”¨ Mock æ•°æ®ï¼Œæœªæ¸²æŸ“ä¸Šä¼ çš„å›¾ç‰‡

**å½±å“èŒƒå›´**ï¼š
- Custom Mode æ ¸å¿ƒä»·å€¼ä¸»å¼ 
- ç”¨æˆ·æ—…ç¨‹ (Alex) æ— æ³•å®Œæˆ
- Case A çš„è§£å†³æ–¹æ¡ˆæœªäº¤ä»˜

**ä¿®å¤æ–¹æ¡ˆ (Phase 1 - æ•°æ®æ¨¡å‹)**ï¼š
```typescript
// Draft æ¥å£å·²æ”¯æŒ
assets?: {
  startFrame?: string;
  endFrame?: string;
};
```

**Phase 2 å¾…åŠ**ï¼š
1. åœ¨ Custom Mode æ·»åŠ  `<input type="file">` å…ƒç´ 
2. å®ç°æ–‡ä»¶ä¸Šä¼ å¤„ç†é€»è¾‘
3. åœ¨ Hook å¡ç‰‡ä¸­æ¸²æŸ“ä¸Šä¼ çš„å›¾ç‰‡ (æ›¿ä»£ Icon)
4. åœ¨ Scene Detail Sheet ä¸­æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ

**å½“å‰çŠ¶æ€**ï¼š
- âœ… æ•°æ®æ¨¡å‹æ”¯æŒ Visual Anchor
- âš ï¸ UI å®ç°å»¶åè‡³ Phase 2 (éœ€è¦æ–‡ä»¶å¤„ç†é€»è¾‘)

---

#### C7: Script Checkpoint ä¿®æ”¹æµç¨‹ä¸å®Œæ•´ âš ï¸ (éƒ¨åˆ†ä¿®å¤)

**é—®é¢˜æè¿°**ï¼š
- PRD ç¬¬ 3.3 èŠ‚ (Ben ç”¨æˆ·æ—…ç¨‹) æè¿°ï¼š"ç‚¹å‡» 'Modify Request' è¿”å›ä¿®æ”¹"
- `VideoStudioInput.tsx` ä¸­ "Modify Request" æŒ‰é’®ä»…è®¾ç½® phaseï¼Œæ— å®é™…é‡æ–°ç”Ÿæˆé€»è¾‘

**å½±å“èŒƒå›´**ï¼š
- Topic Mode ç”¨æˆ·ä½“éªŒ
- Script Checkpoint å·¥ä½œæµå®Œæ•´æ€§
- ç”¨æˆ·æ— æ³•çœŸæ­£ä¿®æ”¹è„šæœ¬

**ä¿®å¤æ–¹æ¡ˆ (Phase 1 - UI æµç¨‹)**ï¼š
```typescript
// VideoStudioInput.tsx å·²å®ç°
const handleModifyRequest = () => {
  setPhase('input');  // âœ… è¿”å›è¾“å…¥é˜¶æ®µ
};
```

**Phase 2 å¾…åŠ**ï¼š
1. å®ç° T001 (generate_script) å·¥å…·
2. ç”¨æˆ·ä¿®æ”¹ Topic åé‡æ–°è°ƒç”¨ T001
3. è¿æ¥ LLM API è¿›è¡Œè„šæœ¬é‡æ–°ç”Ÿæˆ
4. ä¿ç•™ç”¨æˆ·ä¿®æ”¹å†å²

**å½“å‰çŠ¶æ€**ï¼š
- âœ… UI æµç¨‹æ”¯æŒè¿”å›ä¿®æ”¹
- âš ï¸ è„šæœ¬é‡æ–°ç”Ÿæˆé€»è¾‘å»¶åè‡³ Phase 2 (éœ€è¦ LLM é›†æˆ)

---

### 16.4 WARNING é—®é¢˜æ¸…å• (Phase 2)

| ID | é—®é¢˜ | å½±å“ | ä¼˜å…ˆçº§ |
| :--- | :--- | :--- | :--- |
| W1 | äººå·¥å»¶è¿Ÿ 1.2s ä¸æ€§èƒ½å£°æ˜çŸ›ç›¾ | ç”¨æˆ·ä½“éªŒä¸ç¬¦åˆ PRD æ‰¿è¯º | P1 |
| W2 | Autosave ç¼ºå°‘ debounce | é¢‘ç¹å†™å…¥ LocalStorage | P1 |
| W3 | ~~StoryboardScene.id ç±»å‹ä¸ä¸€è‡´~~ | âœ… v2.7 å·²ä¿®å¤ (æ”¹ä¸º string UUID + order) | - |
| W4 | IOM ç”Ÿæˆæ—¶æœºé”™è¯¯ | ä¿å­˜çš„ Draft ç¼ºå°‘ cinematicPrompt | P1 |
| W5 | T001/T002 å·¥å…·æœªå®ç° | æ ¸å¿ƒç”Ÿæˆé€»è¾‘ç¼ºå¤± | P1 |
| W6 | é”™è¯¯å¤„ç†æœªå®ç° | æ— å¼‚å¸¸å¤„ç†æœºåˆ¶ | P2 |
| W7 | æ‹–æ‹½æ’åºæœªæµ‹è¯• | åŠŸèƒ½å­˜åœ¨ä½†æ— æµ‹è¯•è¦†ç›– | P2 |
| W8 | æ–‡ä»¶ä¸Šä¼ æœªå®ç° | Visual Anchor æ— æ³•ä½¿ç”¨ | P1 |
| W9 | Export/Save æŒ‰é’®æ— åŠŸèƒ½ | ç”¨æˆ·æ— æ³•å¯¼å‡ºåˆ†é•œ | P2 |
| W10 | LocalStorage é…é¢æœªæµ‹è¯• | ERR_003 å®šä¹‰ä½†æ— æµ‹è¯• | P3 |
| W11 | å‘å¸ƒå¤±è´¥æœªæµ‹è¯• | æ— å¤±è´¥åœºæ™¯æµ‹è¯• | P2 |
| W12 | BGM é€‰æ‹©åœ¨ UI ä½†æœªå®ç° | UI ä¸åŠŸèƒ½ä¸åŒ¹é… | P3 |

---

### 16.5 SUGGESTION æ¸…å• (æœªæ¥å¢å¼º)

| ID | å»ºè®® | ä»·å€¼ | å®ç°éš¾åº¦ |
| :--- | :--- | :--- | :--- |
| S1 | æ·»åŠ åºåˆ—å›¾ | æå‡å¼€å‘è€…ç†è§£ | ä½ |
| S2 | å®šä¹‰å›æ»šç­–ç•¥ | æå‡å®¹é”™æ€§ | ä¸­ |
| S3 | æ·»åŠ æ€§èƒ½åŸºå‡† | é‡åŒ–æ€§èƒ½ç›®æ ‡ | ä½ |
| S4 | æ¾„æ¸… Hydration æ¦‚å¿µ | å‡å°‘æœ¯è¯­æ··æ·† | ä½ |
| S5 | æ·»åŠ è¿ç§»æŒ‡å— | æ”¯æŒç‰ˆæœ¬å‡çº§ | ä¸­ |
| S6 | çŠ¶æ€è½¬æ¢éªŒè¯ | é˜²æ­¢éæ³•çŠ¶æ€ | ä¸­ |
| S7 | Token è®¡æ•°å™¨å®ç° | è¿æ¥çœŸå® LLM ç”¨é‡ | é«˜ |
| S8 | Emoji ä¸€è‡´æ€§ | ç»Ÿä¸€è§†è§‰è¯­è¨€ | ä½ |

---

### 16.6 MVP å°±ç»ªè¯„ä¼°

#### âœ… å·²æ»¡è¶³çš„ MVP è¦æ±‚

1. **æ•°æ®æ¨¡å‹å®Œæ•´æ€§**
   - Draft æ¥å£åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
   - StoryboardScene æ¥å£æ”¯æŒ IOM å­—æ®µ
   - DraftStatus ç±»å‹æ­£ç¡®å®šä¹‰

2. **æ¶æ„åˆè§„æ€§**
   - ç»„ä»¶æ—  Router ä¾èµ–
   - é€šè¿‡ Props å®ç°è§£è€¦
   - ç¬¦åˆ PRD ç¬¬ 14.1 èŠ‚è¦æ±‚

3. **UI åŠŸèƒ½å®Œæ•´æ€§**
   - æ‰€æœ‰ Visual Intent é€‰é¡¹å¯ç”¨
   - IOM å¼€å…³è¡Œä¸ºç¬¦åˆè§„èŒƒ
   - Scene Detail Sheet åŠŸèƒ½å®Œæ•´

4. **æµ‹è¯•è¦†ç›–**
   - æ ¸å¿ƒ Gherkin åœºæ™¯å¯æ‰§è¡Œ
   - æ•°æ®å¥‘çº¦éªŒè¯åœºæ™¯é€šè¿‡
   - IOM äº¤äº’åœºæ™¯é€šè¿‡

#### âš ï¸ Phase 2 å¿…éœ€åŠŸèƒ½

1. **æ–‡ä»¶ä¸Šä¼ ** (W8, C6 remaining)
   - Visual Anchor å®Œæ•´å®ç°
   - å›¾ç‰‡é¢„è§ˆå’Œæ¸²æŸ“

2. **LLM é›†æˆ** (W5, C7 remaining)
   - T001/T002 å·¥å…·å®ç°
   - Script Checkpoint é‡æ–°ç”Ÿæˆ

3. **æ€§èƒ½ä¼˜åŒ–** (W1, W2)
   - ç§»é™¤äººå·¥å»¶è¿Ÿ
   - å®ç° autosave debounce

4. **é”™è¯¯å¤„ç†** (W6)
   - å®ç° AgentError æœºåˆ¶
   - æ·»åŠ é”™è¯¯æ¢å¤é€»è¾‘

---

### 16.7 éªŒè¯ç»“è®º

**æ€»ä½“è¯„ä¼°**ï¼šâœ… MVP å°±ç»ª

**å…³é”®å‘ç°**ï¼š
- v2.4 æ·»åŠ  IOM åŠŸèƒ½æ—¶æœªæ›´æ–°åŸºç¡€æ•°æ®ç»“æ„ï¼Œå¯¼è‡´å®ç°æ¼‚ç§»
- æ‰€æœ‰é˜»å¡æ€§é—®é¢˜å·²ä¿®å¤ï¼Œä»£ç ä¸ PRD è§„èŒƒå¯¹é½
- å‰©ä½™é—®é¢˜ä¸ºå¢å¼ºåŠŸèƒ½ï¼Œä¸å½±å“ MVP äº¤ä»˜

**æ¨èè¡ŒåŠ¨**ï¼š
1. **ç«‹å³æ‰§è¡Œ**ï¼šè¿è¡Œæ‰‹åŠ¨æµ‹è¯•æ¸…å•ï¼ŒéªŒè¯æ‰€æœ‰ä¿®å¤
2. **æœ¬å‘¨å®Œæˆ**ï¼šä¿®å¤ P1 çº§åˆ«çš„ WARNING é—®é¢˜ (W1, W2, W4, W5, W8)
3. **ä¸‹å‘¨å®Œæˆ**ï¼šä¿®å¤ P2 çº§åˆ«çš„ WARNING é—®é¢˜
4. **æœªæ¥è§„åˆ’**ï¼šè¯„ä¼° SUGGESTION æ¸…å•ï¼Œçº³å…¥äº§å“è·¯çº¿å›¾

**é£é™©è¯„ä¼°**ï¼š
- **æŠ€æœ¯é£é™©**ï¼šä½ - æ‰€æœ‰é˜»å¡é—®é¢˜å·²è§£å†³
- **ç”¨æˆ·ä½“éªŒé£é™©**ï¼šä¸­ - Visual Anchor å’Œ Script Checkpoint éƒ¨åˆ†åŠŸèƒ½å»¶å
- **æ€§èƒ½é£é™©**ï¼šä½ - äººå·¥å»¶è¿Ÿå¯å¿«é€Ÿç§»é™¤

**é¢„ä¼°å·¥ä½œé‡**ï¼š
- Phase 2 P1 åŠŸèƒ½ï¼š3-5 å¤©
- Phase 2 P2 åŠŸèƒ½ï¼š2-3 å¤©
- SUGGESTION å®ç°ï¼š5-7 å¤©

---

### 16.8 é™„å½•ï¼šä¿®å¤æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | è¡Œæ•°å˜åŒ– | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| `src/app/lib/draft-service.ts` | æ•°æ®æ¨¡å‹ | +12 | æ–°å¢ DraftStatus ç±»å‹å’Œå­—æ®µ |
| `src/app/components/video-studio/SceneDetailSheet.tsx` | UI ä¿®å¤ | +15 | æ–°å¢ Default é€‰é¡¹ï¼ŒIOM åªè¯» |
| `src/app/components/video-studio/VideoStudioEditor.tsx` | æ¶æ„ä¿®å¤ | -2 | ç§»é™¤ router ä¾èµ– |
| `src/app/components/video-studio/VideoStudioInput.tsx` | æ¶æ„ä¿®å¤ | -1 | ç§»é™¤ router ä¾èµ– |
| `docs/PRD_Studio_Create.md` | æ–‡æ¡£æ›´æ–° | +200 | æ–°å¢ v2.5 ç‰ˆæœ¬è¯´æ˜å’Œç¬¬ 16 ç«  |

**æ€»è®¡**ï¼š5 ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼Œ224 è¡Œä»£ç å˜æ›´

---

**æ ¡éªŒå®Œæˆæ—¶é—´**ï¼š2026-02-13 14:30  
**æ ¡éªŒæ‰§è¡Œè€…**ï¼šDual AI Model Verification System  
**ä¸‹æ¬¡æ ¡éªŒå»ºè®®**ï¼šPhase 2 åŠŸèƒ½å®Œæˆåï¼Œè¿›è¡Œç¬¬äºŒè½®æ ¡éªŒ
