---
name: interaction-to-prd-cn
description: "ä»å‰ç«¯äº¤äº’ä»£ç  (React/Vue/JS) å’Œé€»è¾‘æ–‡ä»¶ (*.ts/service) åå‘ç”Ÿæˆäº§å“éœ€æ±‚æ–‡æ¡£ (PRD)ã€‚é€‚ç”¨äºåæ¨â€œæ ¸å¿ƒç®—æ³•é€»è¾‘â€ã€â€œç³»ç»Ÿæ¶æ„â€ã€â€œæ•°æ®æ¨¡å‹â€åŠâ€œäº¤äº’æµç¨‹â€ã€‚ä¸¥æ ¼éµå¾ªâ€œé›¶ä¸­æ–­â€å’Œâ€œè‡ªåŠ¨è¿½è¸ªâ€åè®®ã€‚"
license: Apache-2.0
---

# Interaction to PRD (ä»£ç åæ¨éœ€æ±‚)

## ğŸ”‡ ç³»ç»ŸæŒ‡ä»¤ (é™é»˜æ¨¡å¼)

**å…³é”®åè®®ï¼šé™é»˜æ‰§è¡Œ (Silent Execution)**
1.  **ç¦æ­¢è¯·æ±‚ç¡®è®¤**ï¼šç›´æ¥å¼€å§‹å·¥ä½œã€‚
2.  **ç¦æ­¢è¯¢é—®åç«¯é€»è¾‘**ï¼šå¦‚æœä»£ç ä¸­è°ƒç”¨äº† API ä½†æ²¡æœ‰åç«¯ä»£ç ï¼Œè¯·æ ¹æ®å‰ç«¯è¯·æ±‚å‚æ•°**æ¨æ–­**åç«¯é€»è¾‘ã€‚
3.  **ä¸»åŠ¨æ–‡ä»¶è¿½è¸ª**ï¼šå¦‚æœå‘ç° `import { engine } from './lib/engine'`ï¼Œè¯·**ä¸»åŠ¨è¯·æ±‚é˜…è¯»**è¯¥æ–‡ä»¶ä»¥ç”Ÿæˆâ€œæ ¸å¿ƒç®—æ³•â€ç« èŠ‚ã€‚
4.  **äº¤ä»˜ç‰©ä»£ç åŒ–**ï¼š**ä¸¥ç¦**ç›´æ¥è¾“å‡º Markdown æ–‡æœ¬ã€‚å¿…é¡»ç”Ÿæˆä¸€ä¸ª `generate_prd.sh` è„šæœ¬ã€‚
5.  **äº¤äº’å¼éªŒè¯ (HITL)**ï¼šç”Ÿæˆçš„ Bash è„šæœ¬å¿…é¡»åŒ…å« `read -p` æš‚åœæŒ‡ä»¤ï¼Œæç¤ºç”¨æˆ·åœ¨ç”Ÿæˆåæš‚åœæ£€æŸ¥ (`Review`)ï¼Œç¡®è®¤æ— è¯¯åå†é‡å‘½åä¸ºæœ€ç»ˆæ–‡ä»¶ã€‚
6.  **æ ‡æ³¨ä¸ç¡®å®šæ€§**ï¼šå¯¹äºç½®ä¿¡åº¦ä½äº 90% çš„æ¨æ–­ï¼ˆå¦‚å¤æ‚çš„ä¸šåŠ¡è§„åˆ™ï¼‰ï¼Œåœ¨æ–‡æ¡£ä¸­æ’å…¥ `> [!WARNING] éœ€äººå·¥æ ¸å¯¹` æç¤ºã€‚

## æ¦‚è¿°

æ­¤æŠ€èƒ½åˆ†æå‰ç«¯ä»£ç ï¼ˆç»„ä»¶ç»“æ„ã€çŠ¶æ€ç®¡ç†ã€API è°ƒç”¨å’ŒéªŒè¯æ¨¡å¼ï¼‰ï¼Œä»¥åå‘å·¥ç¨‹ PRD çš„ç‰¹å®šéƒ¨åˆ†ã€‚

**ç›®æ ‡**ï¼šå°†â€œä»£ç äº‹å®â€ï¼ˆCode Factsï¼‰è½¬åŒ–ä¸ºâ€œPRD è§„èŒƒâ€ï¼ˆPRD Specificationsï¼‰ã€‚

## è¾“å…¥/è¾“å‡ºå¥‘çº¦

### è¾“å…¥
*   **æºä»£ç **ï¼šReact/Vue ç»„ä»¶ã€API æœåŠ¡æ–‡ä»¶ (`*.service.ts`)ã€é€»è¾‘å¼•æ“ (`*.engine.ts`)ã€ç±»å‹å®šä¹‰ (`types.ts`)ã€‚
*   **ç›®æ ‡äººç¾¤ (Target Audience)**ï¼šå¿…å¡«ã€‚æè¿°æ ¸å¿ƒç”¨æˆ·ç”»åƒï¼ˆå¦‚ "æ–°æ‰‹å†…å®¹åˆ›ä½œè€…", "ç”µå•†è¿è¥"ï¼‰ã€‚
*   **åŠŸèƒ½æ„å›¾ (Feature Intent)**ï¼šå¿…å¡«ã€‚æè¿°è¯¥æ¨¡å—çš„æ ¸å¿ƒä¸šåŠ¡ç›®æ ‡ï¼ˆå¦‚ "é™ä½è§†é¢‘åˆ¶ä½œé—¨æ§›", "æé«˜æ‰¹é‡ç”Ÿäº§æ•ˆç‡"ï¼‰ã€‚

### è¾“å‡ºæ ‡å‡†
è¾“å‡ºå¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹ Markdown ç»“æ„ã€‚**ä¸è¦**å°†ä¸€çº§/äºŒçº§æ ‡é¢˜åŒ…è£¹åœ¨ä»£ç å—ä¸­ï¼Œç›´æ¥ä½¿ç”¨æ ‡å‡† Markdown æ¸²æŸ“ã€‚

## å·¥ä½œæµä¸è‡ªåŠ¨åŒ–é€»è¾‘

### 1. æ•°æ®è¾“å…¥è§„èŒƒ (ç¬¬å››ç« ï¼šæ•°æ®è¾“å…¥è§„èŒƒ)
*   **æ¥æº**ï¼šæŸ¥æ‰¾ `zod`, `yup`, `interface`, `PropTypes` å®šä¹‰ï¼Œæˆ–è¡¨å•çŠ¶æ€ (`const [formData, setFormData]`)ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   å¦‚æœå­˜åœ¨æ ¡éªŒè§„åˆ™ï¼ˆå¦‚ `.min(10)`ï¼‰ï¼Œå°†å…¶è®°å½•ä¸ºâ€œçº¦æŸæ¡ä»¶â€ã€‚
    *   å¦‚æœå­˜åœ¨ç¡¬ç¼–ç é™åˆ¶ï¼ˆå¦‚ `if (items > 5)`ï¼‰ï¼Œè®°å½•ä¸ºâ€œçº¦æŸæ¡ä»¶ï¼šæœ€å¤š 5 é¡¹ (æ¥æºï¼šä»£ç ç¡¬é™åˆ¶)â€ã€‚
    *   å¦‚æœç±»å‹ä¸æ˜ç¡®ï¼Œæ ¹æ®ç”¨æ³•æ¨æ–­ï¼ˆä¾‹å¦‚ `checked` å±æ€§ -> booleanï¼‰ã€‚

### 2. Tools & Skills è®¾è®¡ (ç¬¬äº”ç« ï¼šTools & Skills è®¾è®¡)
*   **æ¥æº**ï¼šæŸ¥æ‰¾ `fetch`, `axios`, `useQuery`, `useMutation` è°ƒç”¨ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™ï¼ˆç¼ºå¤±åç«¯æ—¶ï¼‰**ï¼š
    *   å¦‚æœåç«¯é€»è¾‘æœªçŸ¥ï¼Œæ ¹æ® API ç«¯ç‚¹åç§°å’Œè´Ÿè½½**æ¨æ–­**å…¶é€»è¾‘ç”¨é€”ã€‚
    *   **ä¸è¦**ç”Ÿæˆâ€œç­‰å¾…åç«¯å¼€å‘â€çš„å ä½ç¬¦ã€‚
    *   ç¤ºä¾‹ï¼š`POST /api/login` -> Tool: `LoginUser`, Input: `username, password`ã€‚

### 3. ç”¨æˆ·äº¤äº’æµç¨‹ (ç¬¬å…­ç« ï¼šç”¨æˆ·äº¤äº’æµç¨‹)
*   **æ¥æº**ï¼šæŸ¥æ‰¾äº‹ä»¶å¤„ç†ç¨‹åº (`onClick`, `onSubmit`)ã€çŠ¶æ€å˜æ›´ (`setSuccess(true)`) å’Œå¯¼èˆª (`router.push`)ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   å°† `isLoading` æ˜ å°„ä¸ºâ€œç³»ç»Ÿåé¦ˆï¼šåŠ è½½æŒ‡å¼•â€ã€‚
    *   å°† `toast.success()` æ˜ å°„ä¸ºâ€œç³»ç»Ÿåé¦ˆï¼šæˆåŠŸæç¤ºâ€ã€‚

### 3.5 ç”¨æˆ·æ—…ç¨‹åœ°å›¾ (ç¬¬ä¸‰ç« ï¼šç”¨æˆ·æ—…ç¨‹)
*   **æ¥æº**ï¼šç»“åˆ `Target Audience`ï¼ˆç›®æ ‡äººç¾¤ï¼‰å’Œ `Interaction Flow`ï¼ˆæ“ä½œæ­¥éª¤ï¼‰ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   **Phase 1 (Human Input)**: ä½¿ç”¨ç”¨æˆ·æä¾›çš„ç”»åƒä½œä¸ºæ—…ç¨‹ä¸»ä½“ã€‚
    *   **Phase 2 (AI Mapping)**: å°†ä»£ç ä¸­çš„äº¤äº’æ­¥éª¤æ˜ å°„åˆ°è¯¥ç”»åƒçš„ "è§¦è¾¾ -> äº¤äº’ -> äº¤ä»˜" é˜¶æ®µã€‚
    *   **ä¸å…è®¸**ï¼šä½¿ç”¨é€šç”¨çš„ "ç”¨æˆ·" ç§°è°“ï¼Œå¿…é¡»ä½¿ç”¨å…·ä½“çš„ç”»åƒåç§°ï¼ˆå¦‚ "è¿›é˜¶åˆ›ä½œè€…"ï¼‰ã€‚

### 3.6 åŠŸèƒ½è¯¦ç»†è¯´æ˜ (ç¬¬å››ç« ï¼šåŠŸèƒ½è¯´æ˜)
*   **æ¥æº**ï¼š`Feature Intent`ï¼ˆåŠŸèƒ½æ„å›¾ï¼‰ + ä»£ç é€»è¾‘ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   å°† `Feature Intent` è½¬åŒ–ä¸º "åŠŸèƒ½ä»·å€¼" æˆ– "è®¾è®¡ç›®æ ‡"ã€‚
    *   å°†ä»£ç ä¸­çš„ Props/State è½¬åŒ–ä¸ºå…·ä½“çš„ "åŠŸèƒ½è§„æ ¼"ã€‚
    *   ç¤ºä¾‹ï¼šç”¨æˆ·æ„å›¾="é™ä½é—¨æ§›" + ä»£ç =`mode='auto'` -> åŠŸèƒ½ç‚¹="ä¸€é”®æ™ºèƒ½æ‰˜ç®¡æ¨¡å¼"ã€‚

### 4. æ ¸å¿ƒç®—æ³•é€»è¾‘ (ç¬¬äº”ç« ï¼šæ ¸å¿ƒç®—æ³•é€»è¾‘)
*   **æ¥æº**ï¼š`*-engine.ts`, `*-service.ts`, `lib/*.ts`ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   æå–æ ¸å¿ƒå‡½æ•°çš„è¾“å…¥/è¾“å‡ºå’Œå¤„ç†æ­¥éª¤ã€‚
    *   å°† `switch/case` é€»è¾‘åæ¨ä¸ºâ€œçŠ¶æ€æœºâ€æˆ–â€œç­–ç•¥è¡¨â€ã€‚
    *   å°†åŠ¨æ€å‚æ•°æ„é€ é€»è¾‘ï¼ˆå¦‚å­—ç¬¦ä¸²æ‹¼æ¥ Promptï¼‰åæ¨ä¸ºâ€œç®—æ³•æ­¥éª¤â€ã€‚

### 5. Agent æ¶æ„è®¾è®¡ (ç¬¬å…­ç« ï¼šAgent æ¶æ„è®¾è®¡)
*   **æ¥æº**ï¼šç»„ä»¶é—´çš„æ•°æ®æµ (`props`)ã€å…¨å±€çŠ¶æ€ (`redux/zustand`)ã€API è°ƒç”¨é“¾ã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   ä½¿ç”¨ Mermaid `graph TD` ç»˜åˆ¶èŠ‚ç‚¹å…³ç³»ã€‚
    *   å®šä¹‰èŠ‚ç‚¹åŠŸèƒ½ï¼ˆå¦‚ N1: è¾“å…¥è§£æ, N2: çŠ¶æ€ç®¡ç†ï¼‰ã€‚

### 6. æ•°æ®æ¨¡å‹ (ç¬¬ä¸ƒç« ï¼šæ•°æ®æ¨¡å‹)
*   **æ¥æº**ï¼š`interface`, `type`, Zod Schemasã€‚
*   **è‡ªåŠ¨åŒ–è§„åˆ™**ï¼š
    *   ç”Ÿæˆè¯¦ç»†çš„ Schema è¡¨æ ¼ï¼ˆå­—æ®µ/ç±»å‹/å¿…å¡«/è¯´æ˜ï¼‰ã€‚
    *   **å¿…é¡»**ä¿ç•™æ‰€æœ‰æšä¸¾å€¼ (Enums)ã€‚

## Few-Shot Examples (ç¤ºä¾‹)

### âœ… æ­£ç¡®æ¡ˆä¾‹ (ä¸€æ¬¡æ€§ç”Ÿæˆ)

**ç”¨æˆ·è¾“å…¥:**
"è¿™æ˜¯æ³¨å†Œç»„ä»¶çš„ä»£ç ï¼š"
```jsx
const Register = () => {
  const [email, setEmail] = useState('');
  const handleSubmit = async () => {
    if (!email.includes('@')) return alert('é‚®ç®±æ ¼å¼é”™è¯¯');
    await api.post('/register', { email });
    history.push('/welcome');
  };
  return <button onClick={handleSubmit}>æ³¨å†Œ</button>;
}
```

**Claude è¾“å‡º:**
```markdown
## å››ã€æ•°æ®è¾“å…¥è§„èŒƒ (Data Input Specifications)
### æ³¨å†Œç»„ä»¶è¾“å…¥å­—æ®µ
| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | çº¦æŸæ¡ä»¶ | æè¿° (æ¨æ–­) |
| :--- | :--- | :--- | :--- | :--- |
| email | string | æ˜¯ | å¿…é¡»åŒ…å« '@' ç¬¦å· | ç”¨æˆ·æ³¨å†Œç”¨çš„é‚®ç®±åœ°å€ |

## äº”ã€Tools & Skills è®¾è®¡ (API Definitions)
### Tool: RegisterUser
*   **åŠŸèƒ½**: ä½¿ç”¨æä¾›çš„é‚®ç®±æ³¨å†Œæ–°ç”¨æˆ·ã€‚
*   **è¾“å…¥ Schema**: `{ email: string }`
*   **è¾“å‡º Schema**: æ ‡å‡†æˆåŠŸå“åº” (æ¨æ–­)
*   **å¼•ç”¨**: `POST /register`

## å…­ã€ç”¨æˆ·äº¤äº’æµç¨‹ (User Interaction Flow)
### æ³¨å†Œæµç¨‹é€»è¾‘
1.  **åˆå§‹çŠ¶æ€**: é‚®ç®±è¾“å…¥æ¡†ä¸ºç©ºã€‚
2.  **ç”¨æˆ·åŠ¨ä½œ**: ç”¨æˆ·è¾“å…¥é‚®ç®±å¹¶ç‚¹å‡»â€œæ³¨å†Œâ€ã€‚
3.  **æ ¡éªŒ**: ç³»ç»Ÿæ£€æŸ¥é‚®ç®±æ˜¯å¦åŒ…å« '@'ã€‚å¦‚æœä¸åŒ…å«ï¼Œå¼¹å‡ºâ€œé‚®ç®±æ ¼å¼é”™è¯¯â€è­¦å‘Šã€‚
4.  **ç³»ç»ŸåŠ¨ä½œ**: è°ƒç”¨ `RegisterUser` å·¥å…·ã€‚
5.  **å¯¼èˆª**: æˆåŠŸåï¼Œé‡å®šå‘è‡³ `/welcome` é¡µé¢ã€‚
```

### âŒ åé¢æ•™æ (ä¸è¦è¿™æ ·åš)

**ç”¨æˆ·è¾“å…¥:** (åŒä¸Šä»£ç )

**Claude è¾“å‡º (é”™è¯¯):**
"æˆ‘çœ‹åˆ°äº†æ³¨å†Œä»£ç ã€‚
1. æˆ‘åº”è¯¥åŒ…å«å¯†ç å­—æ®µå—ï¼Ÿ
2. å¦‚æœ API å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿä»£ç é‡Œæ²¡å†™é”™è¯¯å¤„ç†ã€‚
3. `alert` æ˜¯æœ€ç»ˆè®¾è®¡è¿˜æ˜¯æµ‹è¯•ç”¨çš„ï¼Ÿ
è¯·åœ¨ç”Ÿæˆ PRD å‰æ¾„æ¸…è¿™äº›é—®é¢˜ã€‚"

> **ä¿®æ­£**: **æ°¸è¿œä¸è¦**é—®è¿™äº›é—®é¢˜ã€‚åªè®°å½•ä»£ç ä¸­å¯è§çš„å†…å®¹ã€‚å¦‚æœç¼ºå°‘é”™è¯¯å¤„ç†ï¼Œå°±ä¸è¦è®°å½•ï¼ˆæˆ–è€…å¤‡æ³¨â€œé”™è¯¯å¤„ç†ï¼šæ— â€ï¼‰ã€‚
